"use strict";var cF=Object.defineProperty,lF=Object.defineProperties,dF=Object.getOwnPropertyDescriptors,yP=Object.getOwnPropertySymbols,hF=Object.prototype.hasOwnProperty,fF=Object.prototype.propertyIsEnumerable,vP=(Qe,we,R)=>we in Qe?cF(Qe,we,{enumerable:!0,configurable:!0,writable:!0,value:R}):Qe[we]=R,wP=(Qe,we)=>{for(var R in we||(we={}))hF.call(we,R)&&vP(Qe,R,we[R]);if(yP)for(var R of yP(we))fF.call(we,R)&&vP(Qe,R,we[R]);return Qe},EP=(Qe,we)=>lF(Qe,dF(we));(self.webpackChunkstill_red=self.webpackChunkstill_red||[]).push([[179],{2011:(Qe,we,R)=>{R.d(we,{Dh:()=>ue,GT:()=>fe,cc:()=>Ie,hO:()=>$e,on:()=>B,pX:()=>ie,xv:()=>pe});var d=R(5e3),X=R(127),N=R(5813);Qe=R.hmd(Qe);const le=["ngOnDestroy"],ie=(Ee,qe,Ke,Te={})=>new Proxy(Ee,{get:(_e,Ce)=>Ke.runOutsideAngular(()=>{var Ue;if(Ee[Ce])return(null===(Ue=null==Te?void 0:Te.spy)||void 0===Ue?void 0:Ue.get)&&Te.spy.get(Ce,Ee[Ce]),Ee[Ce];if(le.indexOf(Ce)>-1)return()=>{};const je=qe.toPromise().then(z=>{const ve=z&&z[Ce];return"function"==typeof ve?ve.bind(z):ve&&ve.then?ve.then(K=>Ke.run(()=>K)):Ke.run(()=>ve)});return new Proxy(()=>{},{get:(z,ve)=>je[ve],apply:(z,ve,K)=>je.then(ne=>{var ee;const ge=ne&&ne(...K);return(null===(ee=null==Te?void 0:Te.spy)||void 0===ee?void 0:ee.apply)&&Te.spy.apply(Ce,K,ge),ge})})})}),fe=(Ee,qe)=>{qe.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Te=>{Object.defineProperty(Ee.prototype,Te,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Te))})})};class de{constructor(qe){return qe}}const ue=new d.OlP("angularfire2.app.options"),pe=new d.OlP("angularfire2.app.name");function B(Ee,qe,Ke){const _e="object"==typeof Ke&&Ke||{};_e.name=_e.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const Ue=X.Z.apps.filter(je=>je&&je.name===_e.name)[0]||qe.runOutsideAngular(()=>X.Z.initializeApp(Ee,_e));try{JSON.stringify(Ee)!==JSON.stringify(Ue.options)&&H("error",`${Ue.name} Firebase App already initialized with different options${Qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new de(Ue)}const H=(Ee,...qe)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ee](...qe)},te={provide:de,useFactory:B,deps:[ue,d.R0b,[new d.FiY,pe]]};let $e=(()=>{class Ee{constructor(Ke){X.Z.registerVersion("angularfire",N.q4.full,"core"),X.Z.registerVersion("angularfire",N.q4.full,"app-compat"),X.Z.registerVersion("angular",d.q4F.full,Ke.toString())}static initializeApp(Ke,Te){return{ngModule:Ee,providers:[{provide:ue,useValue:Ke},{provide:pe,useValue:Te}]}}}return Ee.\u0275fac=function(Ke){return new(Ke||Ee)(d.LFG(d.Lbi))},Ee.\u0275mod=d.oAB({type:Ee}),Ee.\u0275inj=d.cJS({providers:[te]}),Ee})();function Ie(Ee,qe,Ke,Te,_e){const[,Ce,Ue]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===Ee)||[];if(Ce)return function Pe(Ee,qe){try{return Ee.toString()===qe.toString()}catch(Ke){return Ee===qe}}(_e,Ue)||(he("error",`${qe} was already initialized on the ${Ke} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:_e,was:Ue})),Ce;{const je=Te();return globalThis.\u0275AngularfireInstanceCache.push([Ee,je,_e]),je}}const Be=!!Qe.hot,he=(Ee,...qe)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ee](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Qe,we,R)=>{R.d(we,{q4:()=>Nt,iC:()=>vu,fc:()=>od,HU:()=>Pp,vb:()=>sd,JM:()=>_u});var d=R(5e3),X=R(5867),N=R(5861),le=R(9681),ie=R(2090),fe=R(4859),de=R(1877),ue=R(8766);const pe="@firebase/installations",B="0.5.12",te=`w:${B}`,$e="FIS_v2",qe=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(C){return C instanceof ie.ZR&&C.code.includes("request-failed")}function Te({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function _e(C){return{token:C.token,requestStatus:2,expiresIn:ne(C.expiresIn),creationTime:Date.now()}}function Ce(C,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*(C,D){const F=(yield D.json()).error;return qe.create("request-failed",{requestName:C,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function z(C,{refreshToken:D}){const x=je(C);return x.append("Authorization",function ee(C){return`${$e} ${C}`}(D)),x}function ve(C){return K.apply(this,arguments)}function K(){return(K=(0,N.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function ne(C){return Number(C.replace("s","000"))}function ge(C,D){return oe.apply(this,arguments)}function oe(){return(oe=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:x}){const F=Te(C),Y=je(C),re=D.getImmediate({optional:!0});if(re){const vt=yield re.getHeartbeatsHeader();vt&&Y.append("x-firebase-client",vt)}const He={method:"POST",headers:Y,body:JSON.stringify({fid:x,authVersion:$e,appId:C.appId,sdkVersion:te})},at=yield ve(()=>fetch(F,He));if(at.ok){const vt=yield at.json();return{fid:vt.fid||x,registrationStatus:2,refreshToken:vt.refreshToken,authToken:_e(vt.authToken)}}throw yield Ce("Create Installation",at)})).apply(this,arguments)}function Ne(C){return new Promise(D=>{setTimeout(D,C)})}const Bt=/^[cdef][\w-]{21}$/;function We(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const x=function Yt(C){return function lt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Bt.test(x)?x:""}catch(C){return""}}function mn(C){return`${C.appName}!${C.appId}`}const Xt=new Map;function qt(C,D){const x=mn(C);kt(x,D),function is(C,D){const x=function fr(){return!Jr&&"BroadcastChannel"in self&&(Jr=new BroadcastChannel("[Firebase] FID Change"),Jr.onmessage=C=>{kt(C.data.key,C.data.fid)}),Jr}();x&&x.postMessage({key:C,fid:D}),function Fr(){0===Xt.size&&Jr&&(Jr.close(),Jr=null)}()}(x,D)}function kt(C,D){const x=Xt.get(C);if(x)for(const F of x)F(D)}let Jr=null;const Lr="firebase-installations-store";let Oi=null;function mt(){return Oi||(Oi=(0,ue.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Lr)}})),Oi}function Vr(C,D){return _n.apply(this,arguments)}function _n(){return(_n=(0,N.Z)(function*(C,D){const x=mn(C),Y=(yield mt()).transaction(Lr,"readwrite"),re=Y.objectStore(Lr),be=yield re.get(x);return yield re.put(D,x),yield Y.done,(!be||be.fid!==D.fid)&&qt(C,D.fid),D})).apply(this,arguments)}function Un(C){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,N.Z)(function*(C){const D=mn(C),F=(yield mt()).transaction(Lr,"readwrite");yield F.objectStore(Lr).delete(D),yield F.done})).apply(this,arguments)}function ss(C,D){return yn.apply(this,arguments)}function yn(){return(yn=(0,N.Z)(function*(C,D){const x=mn(C),Y=(yield mt()).transaction(Lr,"readwrite"),re=Y.objectStore(Lr),be=yield re.get(x),He=D(be);return void 0===He?yield re.delete(x):yield re.put(He,x),yield Y.done,He&&(!be||be.fid!==He.fid)&&qt(C,He.fid),He})).apply(this,arguments)}function Sn(C){return pi.apply(this,arguments)}function pi(){return(pi=(0,N.Z)(function*(C){let D;const x=yield ss(C.appConfig,F=>{const Y=So(F),re=jt(C,Y);return D=re.registrationPromise,re.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function So(C){return xs(C||{fid:We(),registrationStatus:0})}function jt(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(qe.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function ot(C,D){return Et.apply(this,arguments)}(C,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:pr(C)}:{installationEntry:D}}function Et(){return(Et=(0,N.Z)(function*(C,D){try{const x=yield ge(C,D);return Vr(C.appConfig,x)}catch(x){throw Ke(x)&&409===x.customData.serverCode?yield Un(C.appConfig):yield Vr(C.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function pr(C){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,N.Z)(function*(C){let D=yield Vt(C.appConfig);for(;1===D.registrationStatus;)yield Ne(100),D=yield Vt(C.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Sn(C);return F||x}return D})).apply(this,arguments)}function Vt(C){return ss(C,D=>{if(!D)throw qe.create("installation-not-found");return xs(D)})}function xs(C){return function gr(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Cr(C,D){return dt.apply(this,arguments)}function dt(){return(dt=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:D},x){const F=Os(C,x),Y=z(C,x),re=D.getImmediate({optional:!0});if(re){const vt=yield re.getHeartbeatsHeader();vt&&Y.append("x-firebase-client",vt)}const He={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:te,appId:C.appId}})},at=yield ve(()=>fetch(F,He));if(at.ok)return _e(yield at.json());throw yield Ce("Generate Auth Token",at)})).apply(this,arguments)}function Os(C,{fid:D}){return`${Te(C)}/${D}/authTokens:generate`}function U(C){return q.apply(this,arguments)}function q(){return(q=(0,N.Z)(function*(C,D=!1){let x;const F=yield ss(C.appConfig,re=>{if(!ut(re))throw qe.create("not-registered");const be=re.authToken;if(!D&&Qt(be))return re;if(1===be.requestStatus)return x=L(C,D),re;{if(!navigator.onLine)throw qe.create("app-offline");const He=Yn(re);return x=Ae(C,He),He}});return x?yield x:F.authToken})).apply(this,arguments)}function L(C,D){return j.apply(this,arguments)}function j(){return(j=(0,N.Z)(function*(C,D){let x=yield G(C.appConfig);for(;1===x.authToken.requestStatus;)yield Ne(100),x=yield G(C.appConfig);const F=x.authToken;return 0===F.requestStatus?U(C,D):F})).apply(this,arguments)}function G(C){return ss(C,D=>{if(!ut(D))throw qe.create("not-registered");return function Rt(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ae(C,D){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,N.Z)(function*(C,D){try{const x=yield Cr(C,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield Vr(C.appConfig,F),x}catch(x){if(!Ke(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Vr(C.appConfig,F)}else yield Un(C.appConfig);throw x}})).apply(this,arguments)}function ut(C){return void 0!==C&&2===C.registrationStatus}function Qt(C){return 2===C.requestStatus&&!function $t(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function Yn(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function Ri(){return(Ri=(0,N.Z)(function*(C){const D=C,{installationEntry:x,registrationPromise:F}=yield Sn(D);return F?F.catch(console.error):U(D).catch(console.error),x.fid})).apply(this,arguments)}function sa(){return(sa=(0,N.Z)(function*(C,D=!1){const x=C;return yield Bn(x),(yield U(x,D)).token})).apply(this,arguments)}function Bn(C){return br.apply(this,arguments)}function br(){return(br=(0,N.Z)(function*(C){const{registrationPromise:D}=yield Sn(C);D&&(yield D)})).apply(this,arguments)}function xo(C){return qe.create("missing-app-config-values",{valueName:C})}const Br="installations",ct=C=>{const D=C.getProvider("app").getImmediate(),x=function rr(C){if(!C||!C.options)throw xo("App Configuration");if(!C.name)throw xo("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!C.options[x])throw xo(x);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,le._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Jt=C=>{const D=C.getProvider("app").getImmediate(),x=(0,le._getProvider)(D,Br).getImmediate();return{getId:()=>function ei(C){return Ri.apply(this,arguments)}(x),getToken:Y=>function Mo(C){return sa.apply(this,arguments)}(x,Y)}};(function jr(){(0,le._registerComponent)(new fe.wA(Br,ct,"PUBLIC")),(0,le._registerComponent)(new fe.wA("installations-internal",Jt,"PRIVATE"))})(),(0,le.registerVersion)(pe,B),(0,le.registerVersion)(pe,B,"esm2017");const Ni="@firebase/remote-config",vn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ep{constructor(D,x,F,Y){this.client=D,this.storage=x,this.storageCache=F,this.logger=Y}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Y=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var x=this;return(0,N.Z)(function*(){const[F,Y]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Y&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Y;D.eTag=Y&&Y.eTag;const re=yield x.client.fetch(D),be=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&be.push(x.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(be),re})()}}function Ol(C=navigator){return C.languages&&C.languages[0]||C.language}class mr{constructor(D,x,F,Y,re,be){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=Y,this.apiKey=re,this.appId=be}fetch(D){var x=this;return(0,N.Z)(function*(){var F,Y,re;const[be,He]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),vt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},rt={sdk_version:x.sdkVersion,app_instance_id:be,app_instance_id_token:He,app_id:x.appId,language_code:Ol()},Pn={method:"POST",headers:bt,body:JSON.stringify(rt)},Rn=fetch(vt,Pn),Ws=new Promise((Ki,Ci)=>{D.signal.addEventListener(()=>{const Ko=new Error("The operation was aborted.");Ko.name="AbortError",Ci(Ko)})});let Ks;try{yield Promise.race([Rn,Ws]),Ks=yield Rn}catch(Ki){let Ci="fetch-client-network";throw"AbortError"===(null===(F=Ki)||void 0===F?void 0:F.name)&&(Ci="fetch-timeout"),vn.create(Ci,{originalErrorMessage:null===(Y=Ki)||void 0===Y?void 0:Y.message})}let Wi=Ks.status;const Cu=Ks.headers.get("ETag")||void 0;let Ta,yo;if(200===Ks.status){let Ki;try{Ki=yield Ks.json()}catch(Ci){throw vn.create("fetch-client-parse",{originalErrorMessage:null===(re=Ci)||void 0===re?void 0:re.message})}Ta=Ki.entries,yo=Ki.state}if("INSTANCE_STATE_UNSPECIFIED"===yo?Wi=500:"NO_CHANGE"===yo?Wi=304:("NO_TEMPLATE"===yo||"EMPTY_CONFIG"===yo)&&(Ta={}),304!==Wi&&200!==Wi)throw vn.create("fetch-status",{httpStatus:Wi});return{status:Wi,eTag:Cu,config:Ta}})()}}class Cp{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,N.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var Y=this;return(0,N.Z)(function*(){yield function ks(C,D){return new Promise((x,F)=>{const Y=Math.max(D-Date.now(),0),re=setTimeout(x,Y);C.addEventListener(()=>{clearTimeout(re),F(vn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const re=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),re}catch(re){if(!function Pl(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(re))throw re;const be={throttleEndTimeMillis:Date.now()+(0,ie.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(be),Y.attemptFetch(D,be)}})()}}class Rl{constructor(D,x,F,Y,re){this.app=D,this._client=x,this._storageCache=F,this._storage=Y,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function hc(C,D){var x;const F=C.target.error||void 0;return vn.create(D,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const Fs="app_namespace_store";class Tp{constructor(D,x,F,Y=function Dp(){return new Promise((C,D)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Y=>{D(hc(Y,"storage-open"))},F.onsuccess=Y=>{C(Y.target.result)},F.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(Fs,{keyPath:"compositeKey"})}}catch(F){D(vn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Y,re)=>{var be;const at=F.transaction([Fs],"readonly").objectStore(Fs),vt=x.createCompositeKey(D);try{const bt=at.get(vt);bt.onerror=rt=>{re(hc(rt,"storage-get"))},bt.onsuccess=rt=>{const Pn=rt.target.result;Y(Pn?Pn.value:void 0)}}catch(bt){re(vn.create("storage-get",{originalErrorMessage:null===(be=bt)||void 0===be?void 0:be.message}))}})})()}set(D,x){var F=this;return(0,N.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((re,be)=>{var He;const vt=Y.transaction([Fs],"readwrite").objectStore(Fs),bt=F.createCompositeKey(D);try{const rt=vt.put({compositeKey:bt,value:x});rt.onerror=Pn=>{be(hc(Pn,"storage-set"))},rt.onsuccess=()=>{re()}}catch(rt){be(vn.create("storage-set",{originalErrorMessage:null===(He=rt)||void 0===He?void 0:He.message}))}})})()}delete(D){var x=this;return(0,N.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Y,re)=>{var be;const at=F.transaction([Fs],"readwrite").objectStore(Fs),vt=x.createCompositeKey(D);try{const bt=at.delete(vt);bt.onerror=rt=>{re(hc(rt,"storage-delete"))},bt.onsuccess=()=>{Y()}}catch(bt){re(vn.create("storage-delete",{originalErrorMessage:null===(be=bt)||void 0===be?void 0:be.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class kl{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),re=yield x;re&&(D.lastFetchStatus=re);const be=yield F;be&&(D.lastSuccessfulFetchTimestampMillis=be);const He=yield Y;He&&(D.activeConfig=He)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function tu(){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,N.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Oo(){(0,le._registerComponent)(new fe.wA("remote-config",function C(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw vn.create("registration-window");if(!(0,ie.hl)())throw vn.create("indexed-db-unavailable");const{projectId:re,apiKey:be,appId:He}=F.options;if(!re)throw vn.create("registration-project-id");if(!be)throw vn.create("registration-api-key");if(!He)throw vn.create("registration-app-id");const at=new Tp(He,F.name,x=x||"firebase"),vt=new kl(at),bt=new de.Yd(Ni);bt.logLevel=de.in.ERROR;const rt=new mr(Y,le.SDK_VERSION,x,re,be,He),Pn=new Cp(rt,at),Rn=new Ep(Pn,at,vt,bt),Ws=new Rl(F,Rn,vt,at,bt);return function en(C){const D=(0,ie.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Ws),Ws},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(Ni,"0.3.11"),(0,le.registerVersion)(Ni,"0.3.11","esm2017")}();const Ll="/firebase-messaging-sw.js",_r="/firebase-cloud-messaging-push-scope",ro="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Po="google.c.a.c_id",Vl="google.c.a.c_l",Sh="google.c.a.ts",Ul="google.c.a.e";var Ro=(()=>{return(C=Ro||(Ro={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Ro;var C})();function Ir(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Bl(C){const x=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Y=new Uint8Array(F.length);for(let re=0;re<F.length;++re)Y[re]=F.charCodeAt(re);return Y}const Dr="fcm_token_details_db",ti="fcm_token_object_Store";function fc(C){return jl.apply(this,arguments)}function jl(){return jl=(0,N.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Dr))return null;let D=null;return(yield(0,ue.X3)(Dr,5,{upgrade:(F=(0,N.Z)(function*(Y,re,be,He){var at;if(re<2||!Y.objectStoreNames.contains(ti))return;const vt=He.objectStore(ti),bt=yield vt.index("fcmSenderId").get(C);if(yield vt.clear(),bt)if(2===re){const rt=bt;if(!rt.auth||!rt.p256dh||!rt.endpoint)return;D={token:rt.fcmToken,createTime:null!==(at=rt.createTime)&&void 0!==at?at:Date.now(),subscriptionOptions:{auth:rt.auth,p256dh:rt.p256dh,endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:"string"==typeof rt.vapidKey?rt.vapidKey:Ir(rt.vapidKey)}}}else if(3===re){const rt=bt;D={token:rt.fcmToken,createTime:rt.createTime,subscriptionOptions:{auth:Ir(rt.auth),p256dh:Ir(rt.p256dh),endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:Ir(rt.vapidKey)}}}else if(4===re){const rt=bt;D={token:rt.fcmToken,createTime:rt.createTime,subscriptionOptions:{auth:Ir(rt.auth),p256dh:Ir(rt.p256dh),endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:Ir(rt.vapidKey)}}}}),function(re,be,He,at){return F.apply(this,arguments)})})).close(),yield(0,ue.Lj)(Dr),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),pc(D)?D:null;var F}),jl.apply(this,arguments)}function pc(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Bi="firebase-messaging-store";let Mh=null;function tn(){return Mh||(Mh=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Bi)}})),Mh}function la(C){return so.apply(this,arguments)}function so(){return(so=(0,N.Z)(function*(C){const D=sr(C),F=yield(yield tn()).transaction(Bi).objectStore(Bi).get(D);if(F)return F;{const Y=yield fc(C.appConfig.senderId);if(Y)return yield zt(C,Y),Y}})).apply(this,arguments)}function zt(C,D){return da.apply(this,arguments)}function da(){return(da=(0,N.Z)(function*(C,D){const x=sr(C),Y=(yield tn()).transaction(Bi,"readwrite");return yield Y.objectStore(Bi).put(D,x),yield Y.done,D})).apply(this,arguments)}function nu(C){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,N.Z)(function*(C){const D=sr(C),F=(yield tn()).transaction(Bi,"readwrite");yield F.objectStore(Bi).delete(D),yield F.done})).apply(this,arguments)}function sr({appConfig:C}){return C.appId}const cn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ji(C,D){return or.apply(this,arguments)}function or(){return(or=(0,N.Z)(function*(C,D){var x;const F=yield Fo(C),Y=Vs(D),re={method:"POST",headers:F,body:JSON.stringify(Y)};let be;try{be=yield(yield fetch($i(C.appConfig),re)).json()}catch(He){throw cn.create("token-subscribe-failed",{errorInfo:null===(x=He)||void 0===x?void 0:x.toString()})}if(be.error)throw cn.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw cn.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function oo(C,D){return us.apply(this,arguments)}function us(){return(us=(0,N.Z)(function*(C,D){var x;const F=yield Fo(C),Y=Vs(D.subscriptionOptions),re={method:"PATCH",headers:F,body:JSON.stringify(Y)};let be;try{be=yield(yield fetch(`${$i(C.appConfig)}/${D.token}`,re)).json()}catch(He){throw cn.create("token-update-failed",{errorInfo:null===(x=He)||void 0===x?void 0:x.toString()})}if(be.error)throw cn.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw cn.create("token-update-no-token");return be.token})).apply(this,arguments)}function ha(C,D){return _i.apply(this,arguments)}function _i(){return(_i=(0,N.Z)(function*(C,D){var x;const Y={method:"DELETE",headers:yield Fo(C)};try{const be=yield(yield fetch(`${$i(C.appConfig)}/${D}`,Y)).json();if(be.error)throw cn.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(re){throw cn.create("token-unsubscribe-failed",{errorInfo:null===(x=re)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function $i({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Fo(C){return _t.apply(this,arguments)}function _t(){return(_t=(0,N.Z)(function*({appConfig:C,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Vs({p256dh:C,auth:D,endpoint:x,vapidKey:F}){const Y={web:{endpoint:x,auth:D,p256dh:C}};return F!==ro&&(Y.web.applicationPubKey=F),Y}const _c=6048e5;function fa(C){return yc.apply(this,arguments)}function yc(){return(yc=(0,N.Z)(function*(C){const D=yield Vo(C.swRegistration,C.vapidKey),x={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:Ir(D.getKey("auth")),p256dh:Ir(D.getKey("p256dh"))},F=yield la(C.firebaseDependencies);if(F){if(su(F.subscriptionOptions,x))return Date.now()>=F.createTime+_c?vc(C,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield ha(C.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return Se(C.firebaseDependencies,x)}return Se(C.firebaseDependencies,x)})).apply(this,arguments)}function ru(C){return iu.apply(this,arguments)}function iu(){return(iu=(0,N.Z)(function*(C){const D=yield la(C.firebaseDependencies);D&&(yield ha(C.firebaseDependencies,D.token),yield nu(C.firebaseDependencies));const x=yield C.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function vc(C,D){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,N.Z)(function*(C,D){try{const x=yield oo(C.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield zt(C.firebaseDependencies,F),x}catch(x){throw yield ru(C),x}})).apply(this,arguments)}function Se(C,D){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,N.Z)(function*(C,D){const F={token:yield ji(C,D),createTime:Date.now(),subscriptionOptions:D};return yield zt(C,F),F.token})).apply(this,arguments)}function Vo(C,D){return an.apply(this,arguments)}function an(){return(an=(0,N.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Bl(D)})})).apply(this,arguments)}function su(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function ao(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function ni(C,D){if(!D.notification)return;C.notification={};const x=D.notification.title;x&&(C.notification.title=x);const F=D.notification.body;F&&(C.notification.body=F);const Y=D.notification.image;Y&&(C.notification.image=Y)}(D,C),function wc(C,D){!D.data||(C.data=D.data)}(D,C),function Ec(C,D){var x,F,Y,re,be;if(!D.fcmOptions&&!(null===(x=D.notification)||void 0===x?void 0:x.click_action))return;C.fcmOptions={};const He=null!==(Y=null===(F=D.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Y?Y:null===(re=D.notification)||void 0===re?void 0:re.click_action;He&&(C.fcmOptions.link=He);const at=null===(be=D.fcmOptions)||void 0===be?void 0:be.analytics_label;at&&(C.fcmOptions.analyticsLabel=at)}(D,C),D}function Cc(C){return"object"==typeof C&&!!C&&Po in C}function $l(C,D){const x=[];for(let F=0;F<C.length;F++)x.push(C.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function cs(C){return cn.create("missing-app-config-values",{valueName:C})}$l("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$l("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yr{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Ap(C){if(!C||!C.options)throw cs("App Configuration Object");if(!C.name)throw cs("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=C;for(const F of D)if(!x[F])throw cs(F);return{appName:C.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ri(C){return ou.apply(this,arguments)}function ou(){return(ou=(0,N.Z)(function*(C){var D;try{C.swRegistration=yield navigator.serviceWorker.register(Ll,{scope:_r}),C.swRegistration.update().catch(()=>{})}catch(x){throw cn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=x)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function Us(C,D){return yi.apply(this,arguments)}function yi(){return(yi=(0,N.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield ri(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw cn.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function bc(C,D){return au.apply(this,arguments)}function au(){return(au=(0,N.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=ro)})).apply(this,arguments)}function Ic(){return(Ic=(0,N.Z)(function*(C,D){if(!navigator)throw cn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw cn.create("permission-blocked");return yield bc(C,null==D?void 0:D.vapidKey),yield Us(C,null==D?void 0:D.serviceWorkerRegistration),fa(C)})).apply(this,arguments)}function pa(C,D,x){return cu.apply(this,arguments)}function cu(){return(cu=(0,N.Z)(function*(C,D,x){const F=lu(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Po],message_name:x[Vl],message_time:x[Sh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function lu(C){switch(C){case Ro.NOTIFICATION_CLICKED:return"notification_open";case Ro.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Gl(){return(Gl=(0,N.Z)(function*(C,D){const x=D.data;if(!x.isFirebaseMessaging)return;C.onMessageHandler&&x.messageType===Ro.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(ao(x)):C.onMessageHandler.next(ao(x)));const F=x.data;Cc(F)&&"1"===F[Ul]&&(yield pa(C,x.messageType,F))})).apply(this,arguments)}const du="@firebase/messaging",ql=C=>{const D=new yr(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Hl(C,D){return Gl.apply(this,arguments)}(D,x)),D},Uo=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:F=>function uu(C,D){return Ic.apply(this,arguments)}(D,F)}};function hu(){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,N.Z)(function*(){try{yield(0,ie.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function zl(){(0,le._registerComponent)(new fe.wA("messaging",ql,"PUBLIC")),(0,le._registerComponent)(new fe.wA("messaging-internal",Uo,"PRIVATE")),(0,le.registerVersion)(du,"0.9.16"),(0,le.registerVersion)(du,"0.9.16","esm2017")}();const Zl="analytics",Sp="firebase_id",ls="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lo="https://www.googletagmanager.com/gtag/js",Hn=new de.Yd("@firebase/analytics");function Wl(C){return Promise.all(C.map(D=>D.catch(x=>x)))}function Mp(C,D){const x=document.createElement("script");x.src=`${lo}?l=${C}&id=${D}`,x.async=!0,document.head.appendChild(x)}function Bo(C,D,x,F,Y,re){return fu.apply(this,arguments)}function fu(){return(fu=(0,N.Z)(function*(C,D,x,F,Y,re){const be=F[Y];try{if(be)yield D[be];else{const at=(yield Wl(x)).find(vt=>vt.measurementId===Y);at&&(yield D[at.appId])}}catch(He){Hn.error(He)}C("config",Y,re)})).apply(this,arguments)}function xp(C,D,x,F,Y){return ds.apply(this,arguments)}function ds(){return(ds=(0,N.Z)(function*(C,D,x,F,Y){try{let re=[];if(Y&&Y.send_to){let be=Y.send_to;Array.isArray(be)||(be=[be]);const He=yield Wl(x);for(const at of be){const vt=He.find(rt=>rt.measurementId===at),bt=vt&&D[vt.appId];if(!bt){re=[];break}re.push(bt)}}0===re.length&&(re=Object.values(D)),yield Promise.all(re),C("event",F,Y||{})}catch(re){Hn.error(re)}})).apply(this,arguments)}function nn(){const C=window.document.getElementsByTagName("script");for(const D of Object.values(C))if(D.src&&D.src.includes(lo))return D;return null}const nt=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_a=new class On{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Kl(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function jo(C){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,N.Z)(function*(C){var D;const{appId:x,apiKey:F}=C,Y={method:"GET",headers:Kl(F)},re=ls.replace("{app-id}",x),be=yield fetch(re,Y);if(200!==be.status&&304!==be.status){let He="";try{const at=yield be.json();(null===(D=at.error)||void 0===D?void 0:D.message)&&(He=at.error.message)}catch(at){}throw nt.create("config-fetch-failed",{httpStatus:be.status,responseMessage:He})}return be.json()})).apply(this,arguments)}function wn(C){return js.apply(this,arguments)}function js(){return(js=(0,N.Z)(function*(C,D=_a,x){const{appId:F,apiKey:Y,measurementId:re}=C.options;if(!F)throw nt.create("no-app-id");if(!Y){if(re)return{measurementId:re,appId:F};throw nt.create("no-api-key")}const be=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},He=new Tc;return setTimeout((0,N.Z)(function*(){He.abort()}),void 0!==x?x:6e4),Hi({appId:F,apiKey:Y,measurementId:re},be,He,D)})).apply(this,arguments)}function Hi(C,D,x){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,N.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:x},F,Y=_a){var re,be;const{appId:He,measurementId:at}=C;try{yield Yl(F,D)}catch(vt){if(at)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${null===(re=vt)||void 0===re?void 0:re.message}]`),{appId:He,measurementId:at};throw vt}try{const vt=yield jo(C);return Y.deleteThrottleMetadata(He),vt}catch(vt){const bt=vt;if(!Ql(bt)){if(Y.deleteThrottleMetadata(He),at)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${null==bt?void 0:bt.message}]`),{appId:He,measurementId:at};throw vt}const rt=503===Number(null===(be=null==bt?void 0:bt.customData)||void 0===be?void 0:be.httpStatus)?(0,ie.$s)(x,Y.intervalMillis,30):(0,ie.$s)(x,Y.intervalMillis),Pn={throttleEndTimeMillis:Date.now()+rt,backoffCount:x+1};return Y.setThrottleMetadata(He,Pn),Hn.debug(`Calling attemptFetch again in ${rt} millis`),Hi(C,Pn,F,Y)}})).apply(this,arguments)}function Yl(C,D){return new Promise((x,F)=>{const Y=Math.max(D-Date.now(),0),re=setTimeout(x,Y);C.addEventListener(()=>{clearTimeout(re),F(nt.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Ql(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Tc{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let ya,Ho;function Gi(){return(Gi=(0,N.Z)(function*(C,D,x,F,Y){if(Y&&Y.global)C("event",x,F);else{const re=yield D;C("event",x,Object.assign(Object.assign({},F),{send_to:re}))}})).apply(this,arguments)}function wa(C){Ho=C}function Ea(C){ya=C}function Ca(){return ii.apply(this,arguments)}function ii(){return(ii=(0,N.Z)(function*(){var C;if(!(0,ie.hl)())return Hn.warn(nt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(D){return Hn.warn(nt.create("indexeddb-unavailable",{errorInfo:null===(C=D)||void 0===C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function Gn(){return(Gn=(0,N.Z)(function*(C,D,x,F,Y,re,be){var He;const at=wn(C);at.then(Rn=>{x[Rn.measurementId]=Rn.appId,C.options.measurementId&&Rn.measurementId!==C.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Rn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rn=>Hn.error(Rn)),D.push(at);const vt=Ca().then(Rn=>{if(Rn)return F.getId()}),[bt,rt]=yield Promise.all([at,vt]);nn()||Mp(re,bt.measurementId),Ho&&(Y("consent","default",Ho),wa(void 0)),Y("js",new Date);const Pn=null!==(He=null==be?void 0:be.config)&&void 0!==He?He:{};return Pn.origin="firebase",Pn.update=!0,null!=rt&&(Pn[Sp]=rt),Y("config",bt.measurementId,Pn),ya&&(Y("set",ya),Ea(void 0)),bt.measurementId})).apply(this,arguments)}class Ac{constructor(D){this.app=D}_delete(){return delete Ar[this.app.options.appId],Promise.resolve()}}let Ar={},hn=[];const Go={};let wi,ln,qi="dataLayer",Sr=!1;function Jl(C,D,x){!function zi(){const C=[];if((0,ie.ru)()&&C.push("This is a browser extension environment."),(0,ie.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),x=nt.create("invalid-analytics-context",{errorInfo:D});Hn.warn(x.message)}}();const F=C.options.appId;if(!F)throw nt.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw nt.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ar[F])throw nt.create("already-exists",{id:F});if(!Sr){!function ho(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(qi);const{wrappedGtag:re,gtagCore:be}=function Op(C,D,x,F,Y){let re=function(...be){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(re=window[Y]),window[Y]=function pu(C,D,x,F){function re(){return(re=(0,N.Z)(function*(be,He,at){try{"event"===be?yield xp(C,D,x,He,at):"config"===be?yield Bo(C,D,x,F,He,at):"consent"===be?C("consent","update",at):C("set",He)}catch(vt){Hn.error(vt)}})).apply(this,arguments)}return function Y(be,He,at){return re.apply(this,arguments)}}(re,C,D,x),{gtagCore:re,wrappedGtag:window[Y]}}(Ar,hn,Go,qi,"gtag");ln=re,wi=be,Sr=!0}return Ar[F]=function go(C,D,x,F,Y,re,be){return Gn.apply(this,arguments)}(C,hn,Go,D,wi,qi,x),new Ac(C)}function Xl(){return ed.apply(this,arguments)}function ed(){return(ed=(0,N.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(C){return!1}})).apply(this,arguments)}const En="@firebase/analytics";!function Ia(){(0,le._registerComponent)(new fe.wA(Zl,(D,{options:x})=>Jl(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,le._registerComponent)(new fe.wA("analytics-internal",function C(D){try{const x=D.getProvider(Zl).getImmediate();return{logEvent:(F,Y,re)=>function fs(C,D,x,F){C=(0,ie.m9)(C),function ar(C,D,x,F,Y){return Gi.apply(this,arguments)}(ln,Ar[C.app.options.appId],D,x,F).catch(Y=>Hn.error(Y))}(x,F,Y,re)}}catch(x){throw nt.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,le.registerVersion)(En,"0.8.0"),(0,le.registerVersion)(En,"0.8.0","esm2017")}();var nd=R(4408),Mr=R(7565);const Da=new class xr extends Mr.v{}(class Nh extends nd.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):D.flush(this)}});var _o=R(4986),zo=R(8505),qs=R(5363),mu=R(9468);const Nt=new d.GfV("7.4.1"),rd="__angularfire_symbol__analyticsIsSupportedValue",ps="__angularfire_symbol__analyticsIsSupported",qn="__angularfire_symbol__remoteConfigIsSupportedValue",zs="__angularfire_symbol__remoteConfigIsSupported",Zs="__angularfire_symbol__messagingIsSupportedValue",id="__angularfire_symbol__messagingIsSupported";function _u(C,D,x){if(D){if(1===D.length)return D[0];const re=D.filter(be=>be.app===x);if(1===re.length)return re[0]}return x.container.getProvider(C).getImmediate({optional:!0})}globalThis[ps]||(globalThis[ps]=Xl().then(C=>globalThis[rd]=C).catch(()=>globalThis[rd]=!1)),globalThis[id]||(globalThis[id]=hu().then(C=>globalThis[Zs]=C).catch(()=>globalThis[Zs]=!1)),globalThis[zs]||(globalThis[zs]=tu().then(C=>globalThis[qn]=C).catch(()=>globalThis[qn]=!1));const sd=(C,D)=>{const x=D?[D]:(0,X.C6)(),F=[];return x.forEach(Y=>{Y.container.getProvider(C).instances.forEach(be=>{F.includes(be)||F.push(be)})}),F};function un(){}class Xn{constructor(D,x=Da){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const Y=this.zone;return this.delegate.schedule(function(be){Y.runGuarded(()=>{D.apply(this,[be])})},x,F)}}class yu{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",un,{},un,un)),x.pipe((0,zo.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pp=(()=>{class C{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Xn(Zone.current)),this.insideAngular=x.run(()=>new Xn(Zone.current,_o.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(x){return new(x||C)(d.LFG(d.R0b))},C.\u0275prov=d.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Or(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function od(C){return C.pipe((0,qs.Q)(Or().outsideAngular))}function vu(C){return Or(),function wu(C){return function(x){return(x=x.lift(new yu(C.ngZone))).pipe((0,mu.R)(C.outsideAngular),(0,qs.Q)(C.insideAngular))}}(Or())(C)}},2090:(Qe,we,R)=>{R.d(we,{$s:()=>gr,BH:()=>$e,G6:()=>je,L:()=>ue,LL:()=>oe,Mn:()=>Ce,Sg:()=>Ie,UG:()=>he,US:()=>fe,ZB:()=>H,ZR:()=>ge,b$:()=>Ke,d:()=>Te,eu:()=>ve,hl:()=>z,jU:()=>Ee,m9:()=>Os,ne:()=>mt,pd:()=>Lr,r3:()=>Er,ru:()=>qe,tV:()=>pe,uI:()=>Be,vZ:()=>Jr,w1:()=>_e,xO:()=>xi,xb:()=>kt,z$:()=>Pe,zI:()=>K,zd:()=>Ms});const le=function(U){const q=[];let L=0;for(let j=0;j<U.length;j++){let G=U.charCodeAt(j);G<128?q[L++]=G:G<2048?(q[L++]=G>>6|192,q[L++]=63&G|128):55296==(64512&G)&&j+1<U.length&&56320==(64512&U.charCodeAt(j+1))?(G=65536+((1023&G)<<10)+(1023&U.charCodeAt(++j)),q[L++]=G>>18|240,q[L++]=G>>12&63|128,q[L++]=G>>6&63|128,q[L++]=63&G|128):(q[L++]=G>>12|224,q[L++]=G>>6&63|128,q[L++]=63&G|128)}return q},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,q){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let G=0;G<U.length;G+=3){const Ae=U[G],Ve=G+1<U.length,ut=Ve?U[G+1]:0,Qt=G+2<U.length,$t=Qt?U[G+2]:0;let ei=(15&ut)<<2|$t>>6,Ri=63&$t;Qt||(Ri=64,Ve||(ei=64)),j.push(L[Ae>>2],L[(3&Ae)<<4|ut>>4],L[ei],L[Ri])}return j.join("")},encodeString(U,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(U):this.encodeByteArray(le(U),q)},decodeString(U,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(U):function(U){const q=[];let L=0,j=0;for(;L<U.length;){const G=U[L++];if(G<128)q[j++]=String.fromCharCode(G);else if(G>191&&G<224){const Ae=U[L++];q[j++]=String.fromCharCode((31&G)<<6|63&Ae)}else if(G>239&&G<365){const Qt=((7&G)<<18|(63&U[L++])<<12|(63&U[L++])<<6|63&U[L++])-65536;q[j++]=String.fromCharCode(55296+(Qt>>10)),q[j++]=String.fromCharCode(56320+(1023&Qt))}else{const Ae=U[L++],Ve=U[L++];q[j++]=String.fromCharCode((15&G)<<12|(63&Ae)<<6|63&Ve)}}return q.join("")}(this.decodeStringToByteArray(U,q))},decodeStringToByteArray(U,q){this.init_();const L=q?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let G=0;G<U.length;){const Ae=L[U.charAt(G++)],ut=G<U.length?L[U.charAt(G)]:0;++G;const $t=G<U.length?L[U.charAt(G)]:64;++G;const Rt=G<U.length?L[U.charAt(G)]:64;if(++G,null==Ae||null==ut||null==$t||null==Rt)throw Error();j.push(Ae<<2|ut>>4),64!==$t&&(j.push(ut<<4&240|$t>>2),64!==Rt&&j.push($t<<6&192|Rt))}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ue=function(U){return function(U){const q=le(U);return fe.encodeByteArray(q,!0)}(U).replace(/\./g,"")},pe=function(U){try{return fe.decodeString(U,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function H(U,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return q}for(const L in q)!q.hasOwnProperty(L)||!te(L)||(U[L]=H(U[L],q[L]));return U}function te(U){return"__proto__"!==U}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,L)=>{this.resolve=q,this.reject=L})}wrapCallback(q){return(L,j)=>{L?this.reject(L):this.resolve(j),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(L):q(L,j))}}}function Ie(U,q){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const j=q||"demo-project",G=U.iat||0,Ae=U.sub||U.user_id;if(!Ae)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:G,exp:G+3600,auth_time:G,sub:Ae,user_id:Ae,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Ve)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Ee(){return"object"==typeof self&&self.self===self}function qe(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){return Pe().indexOf("Electron/")>=0}function _e(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ce(){return Pe().indexOf("MSAppHost/")>=0}function je(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return"object"==typeof indexedDB}function ve(){return new Promise((U,q)=>{try{let L=!0;const j="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(j);G.onsuccess=()=>{G.result.close(),L||self.indexedDB.deleteDatabase(j),U(!0)},G.onupgradeneeded=()=>{L=!1},G.onerror=()=>{var Ae;q((null===(Ae=G.error)||void 0===Ae?void 0:Ae.message)||"")}}catch(L){q(L)}})}function K(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ge extends Error{constructor(q,L,j){super(L),this.code=q,this.customData=j,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(q,L,j){this.service=q,this.serviceName=L,this.errors=j}create(q,...L){const j=L[0]||{},G=`${this.service}/${q}`,Ae=this.errors[q],Ve=Ae?function Ne(U,q){return U.replace(lt,(L,j)=>{const G=q[j];return null!=G?String(G):`<${j}?>`})}(Ae,j):"Error";return new ge(G,`${this.serviceName}: ${Ve} (${G}).`,j)}}const lt=/\{\$([^}]+)}/g;function Er(U,q){return Object.prototype.hasOwnProperty.call(U,q)}function kt(U){for(const q in U)if(Object.prototype.hasOwnProperty.call(U,q))return!1;return!0}function Jr(U,q){if(U===q)return!0;const L=Object.keys(U),j=Object.keys(q);for(const G of L){if(!j.includes(G))return!1;const Ae=U[G],Ve=q[G];if(fr(Ae)&&fr(Ve)){if(!Jr(Ae,Ve))return!1}else if(Ae!==Ve)return!1}for(const G of j)if(!L.includes(G))return!1;return!0}function fr(U){return null!==U&&"object"==typeof U}function xi(U){const q=[];for(const[L,j]of Object.entries(U))Array.isArray(j)?j.forEach(G=>{q.push(encodeURIComponent(L)+"="+encodeURIComponent(G))}):q.push(encodeURIComponent(L)+"="+encodeURIComponent(j));return q.length?"&"+q.join("&"):""}function Ms(U){const q={};return U.replace(/^\?/,"").split("&").forEach(j=>{if(j){const[G,Ae]=j.split("=");q[decodeURIComponent(G)]=decodeURIComponent(Ae)}}),q}function Lr(U){const q=U.indexOf("?");if(!q)return"";const L=U.indexOf("#",q);return U.substring(q,L>0?L:void 0)}function mt(U,q){const L=new Vr(U,q);return L.subscribe.bind(L)}class Vr{constructor(q,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{q(this)}).catch(j=>{this.error(j)})}next(q){this.forEachObserver(L=>{L.next(q)})}error(q){this.forEachObserver(L=>{L.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,L,j){let G;if(void 0===q&&void 0===L&&void 0===j)throw new Error("Missing Observer.");G=function Un(U,q){if("object"!=typeof U||null===U)return!1;for(const L of q)if(L in U&&"function"==typeof U[L])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:L,complete:j},void 0===G.next&&(G.next=Pi),void 0===G.error&&(G.error=Pi),void 0===G.complete&&(G.complete=Pi);const Ae=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch(Ve){}}),this.observers.push(G),Ae}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,q)}sendOne(q,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{L(this.observers[q])}catch(j){"undefined"!=typeof console&&console.error&&console.error(j)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pi(){}function gr(U,q=1e3,L=2){const j=q*Math.pow(L,U),G=Math.round(.5*j*(Math.random()-.5)*2);return Math.min(144e5,j+G)}function Os(U){return U&&U._delegate?U._delegate:U}},1153:(Qe,we,R)=>{var d=R(5e3);let X=null;function N(){return X}const de=new d.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function pe(){return(0,d.LFG)(H)}()},providedIn:"platform"}),n})();const B=new d.OlP("Location Initialized");let H=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){te()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){te()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function $e(){return new H((0,d.LFG)(de))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Ie(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ee(n){const e=(0,d.LFG)(de).location;return new Ke((0,d.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new d.OlP("appBaseHref");let Ke=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ie(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+Be(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+Be(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(qe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ie(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+Be(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+Be(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(qe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Pe(je(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function Ue(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Be,n.joinWithSlash=Ie,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ce(){return new _e((0,d.LFG)(he),(0,d.LFG)(ue))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}let mi=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})(),$n=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new en,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Xa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Xa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class en{constructor(){this.$implicit=null,this.ngIf=null}}function Xa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Ul=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function No(n){return"server"===n}let pc=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new ko((0,d.LFG)(de),window)}),n})();class ko{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Bi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gc(this.window.history)||gc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function gc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class so extends class la extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){X||(X=n)}(new so)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function da(){return zt=zt||document.querySelector("base"),zt?zt.getAttribute("href"):null}();return null==t?null:function Ls(n){nu=nu||document.createElement("a"),nu.setAttribute("href",n);const e=nu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function aa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let nu,zt=null;const sr=new d.OlP("TRANSITION_ID"),cn=[{provide:d.ip1,useFactory:function mc(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=N(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[sr,de,d.zs3],multi:!0}];class ji{static init(){(0,d.VLi)(new ji)}addToWindow(e){d.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(v){l=l||v,u--,0==u&&r(l)};o.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let or=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const oo=new d.OlP("EventManagerPlugins");let us=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ha{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=N().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let _i=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),$i=(()=>{class n extends _i{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,o.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Fo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Fo))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Fo(n){N().remove(n)}const _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vs=/%COMP%/g;function Lo(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Lo(n,o,t):(o=o.replace(Vs,n),t.push(o))}return t}function Se(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Vo=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new an(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ni(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case d.ifc.ShadowDom:return new wc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Lo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(us),d.LFG($i),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class an{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_t[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=_t[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=_t[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,o&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Se(r)):this.eventManager.addEventListener(e,t,Se(r))}}class ni extends an{constructor(e,t,r,o){super(e),this.component=r;const u=Lo(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function iu(n){return"_ngcontent-%COMP%".replace(Vs,n)}(o+"-"+r.id),this.hostAttr=function vc(n){return"_nghost-%COMP%".replace(Vs,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class wc extends an{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Lo(o.id,o.styles,[]);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ec=(()=>{class n extends ha{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Cc=["alt","control","meta","shift"],Ap={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ri=(()=>{class n extends ha{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="";if(Cc.forEach(v=>{const I=r.indexOf(v);I>-1&&(r.splice(I,1),l+=v+".")}),l+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=l,m}static getEventFullKey(t){let r="",o=function ou(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&cs.hasOwnProperty(e)&&(e=cs[e]))}return Ap[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Cc.forEach(u=>{u!=o&&yr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const uu=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Us(){so.makeCurrent(),ji.init()},multi:!0},{provide:de,useFactory:function bc(){return(0,d.RDi)(document),document},deps:[]}]),Ic=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function yi(){return new d.qLn},deps:[]},{provide:oo,useClass:Ec,multi:!0,deps:[de,d.R0b,d.Lbi]},{provide:oo,useClass:ri,multi:!0,deps:[de]},{provide:Vo,useClass:Vo,deps:[us,$i,d.AFp]},{provide:d.FYo,useExisting:Vo},{provide:_i,useExisting:$i},{provide:$i,useClass:$i,deps:[de]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:us,useClass:us,deps:[oo,d.R0b]},{provide:class tn{},useClass:or,deps:[]}];let pa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:sr,useExisting:d.AFp},cn]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Ic,imports:[Ul,d.hGG]}),n})();"undefined"!=typeof window&&window;var nn=R(8996),ma=R(7669);function nt(...n){const e=(0,ma.yG)(n);return(0,nn.D)(n,e)}var Tr=R(7579);class vi extends Tr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var On=R(8306);const{isArray:_a}=Array,{getPrototypeOf:Kl,prototype:jo,keys:Bs}=Object;function wn(n){if(1===n.length){const e=n[0];if(_a(e))return{args:e,keys:null};if(function js(n){return n&&"object"==typeof n&&Kl(n)===jo}(e)){const t=Bs(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Hi=R(4671),Tt=R(4004);const{isArray:Yl}=Array;function Tc(n){return(0,Tt.U)(e=>function Ql(n,e){return Yl(e)?n(...e):n(e)}(n,e))}function ya(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var ar=R(5403),Gi=R(9672);function $s(n,e,t){n?(0,Gi.f)(t,n,e):e()}var Hs=R(576);function $o(n,e){const t=(0,Hs.m)(n)?n:()=>n,r=o=>o.error(t());return new On.y(e?o=>e.schedule(r,0,o):r)}const fo=(0,R(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var po=R(8189);function wa(...n){return function Ho(){return(0,po.J)(1)}()((0,nn.D)(n,(0,ma.yG)(n)))}var Ea=R(8421);function Ca(n){return new On.y(e=>{(0,Ea.Xf)(n()).subscribe(e)})}var ii=R(515),go=R(727),Gn=R(4482);function Ac(){return(0,Gn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ar.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ar extends On.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Gn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new go.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ar.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=go.w0.EMPTY)}return e}refCount(){return Ac()(this)}}function hn(n,e){return(0,Gn.e)((t,r)=>{let o=null,u=0,l=!1;const m=()=>l&&!o&&r.complete();t.subscribe((0,ar.x)(r,v=>{null==o||o.unsubscribe();let I=0;const S=u++;(0,Ea.Xf)(n(v,S)).subscribe(o=(0,ar.x)(r,O=>r.next(e?e(v,O,S,I++):O),()=>{o=null,m()}))},()=>{l=!0,m()}))})}function Go(n){return n<=0?()=>ii.E:(0,Gn.e)((e,t)=>{let r=0;e.subscribe((0,ar.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function qi(...n){const e=(0,ma.yG)(n);return(0,Gn.e)((t,r)=>{(e?wa(n,t,e):wa(n,t)).subscribe(r)})}function Gs(n,e,t,r,o){return(u,l)=>{let m=t,v=e,I=0;u.subscribe((0,ar.x)(l,S=>{const O=I++;v=m?n(v,S,O):(m=!0,S),r&&l.next(v)},o&&(()=>{m&&l.next(v),l.complete()})))}}function wi(n,e){return(0,Gn.e)(Gs(n,e,arguments.length>=2,!0))}function ln(n,e){return(0,Gn.e)((t,r)=>{let o=0;t.subscribe((0,ar.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Sr(n){return(0,Gn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,ar.x)(t,void 0,void 0,l=>{u=(0,Ea.Xf)(n(l,Sr(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Jn=R(5577);function zi(n,e){return(0,Hs.m)(e)?(0,Jn.z)(n,e,1):(0,Jn.z)(n,1)}function Jl(n){return n<=0?()=>ii.E:(0,Gn.e)((e,t)=>{let r=[];e.subscribe((0,ar.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Sc(n=dn){return(0,Gn.e)((e,t)=>{let r=!1;e.subscribe((0,ar.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function dn(){return new fo}function Xl(n){return(0,Gn.e)((e,t)=>{let r=!1;e.subscribe((0,ar.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function ba(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ln((o,u)=>n(o,u,r)):Hi.y,Go(1),t?Xl(e):Sc(()=>new fo))}var Ei=R(8505);function Ph(n){return(0,Gn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class mo{constructor(e,t){this.id=e,this.url=t}}class Rh extends mo{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fs extends mo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class td extends mo{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class En extends mo{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qo extends mo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ia extends mo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nd extends mo{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Nh extends mo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mr extends mo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Da{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Mc{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _o{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qs{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Nt="primary";class rd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ps(n){return new rd(n)}const qn="ngNavigationCancelingError";function zs(n){const e=Error("NavigationCancelingError: "+n);return e[qn]=!0,e}function id(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function gs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!xc(n[o],e[o]))return!1;return!0}function xc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function kh(n){return Array.prototype.concat.apply([],n)}function _u(n){return n.length>0?n[n.length-1]:null}function un(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Xn(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,nn.D)(Promise.resolve(n)):nt(n)}const Pp={exact:function od(n,e,t){if(!F(n.segments,e.segments)||!Eu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!od(n.children[r],e.children[r],t))return!1;return!0},subset:vu},Or={exact:function si(n,e){return gs(n,e)},subset:function ad(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xc(n[t],e[t]))},ignored:()=>!0};function Wo(n,e,t){return Pp[t.paths](n.root,e.root,t.matrixParams)&&Or[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vu(n,e,t){return wu(n,e,e.segments,t)}function wu(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!F(o,t)||e.hasChildren()||!Eu(o,t,r))}if(n.segments.length===t.length){if(!F(n.segments,t)||!Eu(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!vu(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(F(n.segments,o)&&Eu(n.segments,o,r)&&n.children[Nt])&&wu(n.children[Nt],e,u,r)}}function Eu(n,e,t){return e.every((r,o)=>Or[t](n[o].parameters,r.parameters))}class Zi{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ps(this.queryParams)),this._queryParamMap}toString(){return He.serialize(this)}}class C{constructor(e,t){this.segments=e,this.children=t,this.parent=null,un(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return at(this)}}class D{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ps(this.parameters)),this._parameterMap}toString(){return Wi(this)}}function F(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class re{}class be{parse(e){const t=new Rp(e);return new Zi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${vt(e.root,!0)}`,r=function Ta(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${rt(t)}=${rt(o)}`).join("&"):`${rt(t)}=${rt(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Pn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const He=new be;function at(n){return n.segments.map(e=>Wi(e)).join("/")}function vt(n,e){if(!n.hasChildren())return at(n);if(e){const t=n.children[Nt]?vt(n.children[Nt],!1):"",r=[];return un(n.children,(o,u)=>{u!==Nt&&r.push(`${u}:${vt(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Y(n,e){let t=[];return un(n.children,(r,o)=>{o===Nt&&(t=t.concat(e(r,o)))}),un(n.children,(r,o)=>{o!==Nt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Nt?[vt(n.children[Nt],!1)]:[`${o}:${vt(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Nt]?`${at(n)}/${t[0]}`:`${at(n)}/(${t.join("//")})`}}function bt(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rt(n){return bt(n).replace(/%3B/gi,";")}function Rn(n){return bt(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ws(n){return decodeURIComponent(n)}function Ks(n){return Ws(n.replace(/\+/g,"%20"))}function Wi(n){return`${Rn(n.path)}${function Cu(n){return Object.keys(n).map(e=>`;${Rn(e)}=${Rn(n[e])}`).join("")}(n.parameters)}`}const yo=/^[^\/()?;=#]+/;function Ki(n){const e=n.match(yo);return e?e[0]:""}const Ci=/^[^=?&#]+/,Fh=/^[^&#]+/;class Rp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new C([],{}):new C([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Nt]=new C(e,t)),r}parseSegment(){const e=Ki(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new D(Ws(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ki(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Ki(this.remaining);o&&(r=o,this.capture(r))}e[Ws(t)]=Ws(r)}parseQueryParam(e){const t=function Ko(n){const e=n.match(Ci);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function o0(n){const e=n.match(Fh);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=Ks(t),u=Ks(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ki(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Nt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Nt]:new C([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Lh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Np(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Np(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=bu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return bu(e,this._root).map(t=>t.value)}}function Np(n,e){if(n===e.value)return e;for(const t of e.children){const r=Np(n,t);if(r)return r}return null}function bu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=bu(n,t);if(r.length)return r.unshift(e),r}return[]}class vo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Iu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Oc extends Lh{constructor(e,t){super(e),this.snapshot=t,ld(this,e)}toString(){return this.snapshot.toString()}}function ud(n,e){const t=function Du(n,e){const l=new wo([],{},{},"",{},Nt,e,null,n.root,-1,{});return new cd("",new vo(l,[]))}(n,e),r=new vi([new D("",{})]),o=new vi({}),u=new vi({}),l=new vi({}),m=new vi(""),v=new Tu(r,o,l,m,u,Nt,e,t.root);return v.snapshot=t.root,new Oc(new vo(v,[]),t)}class Tu{constructor(e,t,r,o,u,l,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>ps(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>ps(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function a0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class wo{constructor(e,t,r,o,u,l,m,v,I,S,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=v,this._urlSegment=I,this._lastPathIndex=S,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ps(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ps(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cd extends Lh{constructor(e,t){super(t),this.url=e,ld(this,t)}toString(){return Vh(this._root)}}function ld(n,e){e.value._routerState=n,e.children.forEach(t=>ld(n,t))}function Vh(n){const e=n.children.length>0?` { ${n.children.map(Vh).join(", ")} } `:"";return`${n.value}${e}`}function dd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),gs(e.params,t.params)||n.params.next(t.params),function Zo(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),gs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function hd(n,e){const t=gs(n.params,e.params)&&function x(n,e){return F(n,e)&&n.every((t,r)=>gs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||hd(n.parent,e.parent))}function Pc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Xm(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Pc(n,r,o);return Pc(n,r)})}(n,e,t);return new vo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>Pc(n,m)),l}}const r=function e_(n){return new Tu(new vi(n.url),new vi(n.params),new vi(n.queryParams),new vi(n.fragment),new vi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Pc(n,u));return new vo(r,o)}}function bi(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Eo(n){return"object"==typeof n&&null!=n&&n.outlets}function Rc(n,e,t,r,o){let u={};if(r&&un(r,(m,v)=>{u[v]=Array.isArray(m)?m.map(I=>`${I}`):`${m}`}),n===e)return new Zi(t,u,o);const l=n_(n,e,t);return new Zi(l,u,o)}function n_(n,e,t){const r={};return un(n.children,(o,u)=>{r[u]=o===e?t:n_(o,e,t)}),new C(n.segments,r)}class Lp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&bi(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Eo);if(o&&o!==_u(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Up(n,e,t){if(n||(n=new C([],{})),0===n.segments.length&&n.hasChildren())return pd(n,e,t);const r=function r_(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(Eo(m))break;const v=`${m}`,I=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&I&&"object"==typeof I&&void 0===I.outlets){if(!Bh(v,I,l))return u;r+=2}else{if(!Bh(v,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new C(n.segments.slice(0,r.pathIndex),{});return u.children[Nt]=new C(n.segments.slice(r.pathIndex),n.children),pd(u,0,o)}return r.match&&0===o.length?new C(n.segments,{}):r.match&&!n.hasChildren()?i_(n,e,t):r.match?pd(n,0,o):i_(n,e,t)}function pd(n,e,t){if(0===t.length)return new C(n.segments,{});{const r=function Vp(n){return Eo(n[0])?n[0].outlets:{[Nt]:n}}(t),o={};return un(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=Up(n.children[l],e,u))}),un(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new C(n.segments,o)}}function i_(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Eo(u)){const v=Aa(u.outlets);return new C(r,v)}if(0===o&&bi(t[0])){r.push(new D(n.segments[e].path,Nc(t[0]))),o++;continue}const l=Eo(u)?u.outlets[Nt]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&bi(m)?(r.push(new D(l,Nc(m))),o+=2):(r.push(new D(l,{})),o++)}return new C(r,{})}function Aa(n){const e={};return un(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=i_(new C([],{}),0,t))}),e}function Nc(n){const e={};return un(n,(t,r)=>e[r]=`${t}`),e}function Bh(n,e,t){return n==t.path&&gs(e,t.parameters)}class kc{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Iu(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),un(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Iu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Iu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Iu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new qs(u.value.snapshot))}),e.children.length&&this.forwardEvent(new _o(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(dd(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),dd(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=function gd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),v=m?m.module.componentFactoryResolver:null;l.attachRef=null,l.route=o,l.resolver=v,l.outlet&&l.outlet.activateWith(o,v),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class md{constructor(e,t){this.routes=e,this.module=t}}function Co(n){return"function"==typeof n}function Au(n){return n instanceof Zi}const _d=Symbol("INITIAL_VALUE");function yd(){return hn(n=>function gu(...n){const e=(0,ma.yG)(n),t=(0,ma.jO)(n),{args:r,keys:o}=wn(n);if(0===r.length)return(0,nn.D)([],e);const u=new On.y(function hs(n,e,t=Hi.y){return r=>{$s(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let v=0;v<o;v++)$s(e,()=>{const I=(0,nn.D)(n[v],e);let S=!1;I.subscribe((0,ar.x)(r,O=>{u[v]=O,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>ya(o,l):Hi.y));return t?u.pipe(Tc(t)):u}(n.map(e=>e.pipe(Go(1),qi(_d)))).pipe(wi((e,t)=>{let r=!1;return t.reduce((o,u,l)=>o!==_d?o:(u===_d&&(r=!0),r||!1!==u&&l!==t.length-1&&!Au(u)?o:u),e)},_d),ln(e=>e!==_d),(0,Tt.U)(e=>Au(e)?e:!0===e),Go(1)))}class jp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Su,this.attachRef=null}}class Su{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new jp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Lc=(()=>{class n{constructor(t,r,o,u,l){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=u||Nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,v=new s_(t,m,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Su),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class s_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Tu?this.route:e===Su?this.childContexts:this.parent.get(e,t)}}let $p=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[Lc],encapsulation:2}),n})();function Vc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Mu(r,o_(e,r))}}function Mu(n,e){n.children&&Vc(n.children,e)}function o_(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Uc(n){const e=n.children&&n.children.map(Uc),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Nt&&(t.component=$p),t}function Gr(n){return n.outlet||Nt}function Nn(n,e){const t=n.filter(r=>Gr(r)===e);return t.push(...n.filter(r=>Gr(r)!==e)),t}const Hp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Hp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||id)(t,n,e);if(!u)return Object.assign({},Hp);const l={};un(u.posParams,(v,I)=>{l[I]=v.path});const m=u.consumed.length>0?Object.assign(Object.assign({},l),u.consumed[u.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Sa(n,e,t,r,o="corrected"){if(t.length>0&&function u_(n,e,t){return t.some(r=>Yo(n,e,r)&&Gr(r)!==Nt)}(n,t,r)){const l=new C(e,function a_(n,e,t,r){const o={};o[Nt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Gr(u)!==Nt){const l=new C([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[Gr(u)]=l}return o}(n,e,r,new C(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function c_(n,e,t){return t.some(r=>Yo(n,e,r))}(n,t,r)){const l=new C(n.segments,function Gp(n,e,t,r,o,u){const l={};for(const m of r)if(Yo(n,t,m)&&!o[Gr(m)]){const v=new C([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[Gr(m)]=v}return Object.assign(Object.assign({},o),l)}(n,e,t,r,n.children,o));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new C(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Yo(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function qp(n,e,t,r){return!!(Gr(n)===r||r!==Nt&&Yo(e,t,n))&&("**"===n.path||vd(e,n,t).matched)}function zp(n,e,t){return 0===e.length&&!n.children[t]}class Hh{constructor(e){this.segmentGroup=e||null}}class xu{constructor(e){this.urlTree=e}}function er(n){return $o(new Hh(n))}function wd(n){return $o(new xu(n))}class Ou{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=Sa(this.urlTree.root,[],[],this.config).segmentGroup,t=new C(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Nt).pipe((0,Tt.U)(u=>this.createUrlTree(Bc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Sr(u=>{if(u instanceof xu)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Hh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Nt).pipe((0,Tt.U)(o=>this.createUrlTree(Bc(o),e.queryParams,e.fragment))).pipe(Sr(o=>{throw o instanceof Hh?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new C([],{[Nt]:e}):e;return new Zi(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Tt.U)(u=>new C([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,nn.D)(o).pipe(zi(u=>{const l=r.children[u],m=Nn(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,Tt.U)(v=>({segment:v,outlet:u})))}),wi((u,l)=>(u[l.outlet]=l.segment,u),{}),function ed(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ln((o,u)=>n(o,u,r)):Hi.y,Jl(1),t?Xl(e):Sc(()=>new fo))}())}expandSegment(e,t,r,o,u,l){return(0,nn.D)(r).pipe(zi(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,l).pipe(Sr(I=>{if(I instanceof Hh)return nt(null);throw I}))),ba(m=>!!m),Sr((m,v)=>{if(m instanceof fo||"EmptyError"===m.name)return zp(t,o,u)?nt(new C([],{})):er(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,l,m){return qp(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):er(t):er(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wd(u):this.lineralizeSegments(r,u).pipe((0,Jn.z)(l=>{const m=new C(l,{});return this.expandSegment(e,m,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:v,remainingSegments:I,positionalParamSegments:S}=vd(t,o,u);if(!m)return er(t);const O=this.applyRedirectCommands(v,o.redirectTo,S);return o.redirectTo.startsWith("/")?wd(O):this.lineralizeSegments(o,O).pipe((0,Jn.z)(V=>this.expandSegment(e,t,r,V.concat(I),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?nt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Tt.U)(O=>(r._loadedConfig=O,new C(o,{})))):nt(new C(o,{}));const{matched:l,consumedSegments:m,remainingSegments:v}=vd(t,r,o);return l?this.getChildConfig(e,r,o).pipe((0,Jn.z)(S=>{const O=S.module,V=S.routes,{segmentGroup:W,slicedSegments:J}=Sa(t,m,v,V),Me=new C(W.segments,W.children);if(0===J.length&&Me.hasChildren())return this.expandChildren(O,V,Me).pipe((0,Tt.U)(gt=>new C(m,gt)));if(0===V.length&&0===J.length)return nt(new C(m,{}));const Oe=Gr(r)===u;return this.expandSegment(O,Me,V,J,Oe?Nt:u,!0).pipe((0,Tt.U)(wt=>new C(m.concat(wt.segments),wt.children)))})):er(t)}getChildConfig(e,t,r){return t.children?nt(new md(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?nt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Jn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Tt.U)(u=>(t._loadedConfig=u,u))):function Ed(n){return $o(zs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):nt(new md([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?nt(o.map(l=>{const m=e.get(l);let v;if(function l0(n){return n&&Co(n.canLoad)}(m))v=m.canLoad(t,r);else{if(!Co(m))throw new Error("Invalid CanLoad guard");v=m(t,r)}return Xn(v)})).pipe(yd(),(0,Ei.b)(l=>{if(!Au(l))return;const m=zs(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw m.url=l,m}),(0,Tt.U)(l=>!0===l)):nt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return nt(r);if(o.numberOfChildren>1||!o.children[Nt])return $o(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Nt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Zi(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return un(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return un(t.children,(m,v)=>{l[v]=this.createSegmentGroup(e,m,r,o)}),new C(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Bc(n){const e={};for(const r of Object.keys(n.children)){const u=Bc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function qh(n){if(1===n.numberOfChildren&&n.children[Nt]){const e=n.children[Nt];return new C(n.segments.concat(e.segments),e.children)}return n}(new C(n.segments,e))}class qr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Qo{constructor(e,t){this.component=e,this.route=t}}function zh(n,e,t){const r=n._root;return jc(r,e?e._root:null,t,[r.value])}function Ma(n,e,t){const r=function Zh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function jc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Iu(e);return n.children.forEach(l=>{(function Cd(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const v=function h_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!F(n.url,e.url);case"pathParamsOrQueryParamsChange":return!F(n.url,e.url)||!gs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hd(n,e)||!gs(n.queryParams,e.queryParams);default:return!hd(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new qr(r)):(u.data=l.data,u._resolvedData=l._resolvedData),jc(n,e,u.component?m?m.children:null:t,r,o),v&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Qo(m.outlet.component,l))}else l&&Qi(e,m,o),o.canActivateChecks.push(new qr(r)),jc(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),un(u,(l,m)=>Qi(l,t.getContext(m),o)),o}function Qi(n,e,t){const r=Iu(n),o=n.value;un(r,(u,l)=>{Qi(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Qo(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class g_{}function ms(n){return new On.y(e=>e.error(n))}class Wp{constructor(e,t,r,o,u,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=l}recognize(){const e=Sa(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Nt);if(null===t)return null;const r=new wo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new vo(r,t),u=new cd(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=kp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const l=t.children[u],m=Nn(e,u),v=this.processSegmentGroup(m,l,u);if(null===v)return null;r.push(...v)}const o=Yp(r);return function Kp(n){n.sort((e,t)=>e.value.outlet===Nt?-1:t.value.outlet===Nt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const l=this.processSegmentAgainstRoute(u,t,r,o);if(null!==l)return l}return zp(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!qp(e,t,r,o))return null;let u,l=[],m=[];if("**"===e.path){const W=r.length>0?_u(r).parameters:{};u=new wo(r,W,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_(e),Gr(e),e.component,e,Qp(t),xa(t)+r.length,f(e))}else{const W=vd(t,e,r);if(!W.matched)return null;l=W.consumedSegments,m=W.remainingSegments,u=new wo(l,W.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_(e),Gr(e),e.component,e,Qp(t),xa(t)+l.length,f(e))}const v=function m_(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:I,slicedSegments:S}=Sa(t,l,m,v.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution);if(0===S.length&&I.hasChildren()){const W=this.processChildren(v,I);return null===W?null:[new vo(u,W)]}if(0===v.length&&0===S.length)return[new vo(u,[])];const O=Gr(e)===o,V=this.processSegment(v,I,S,O?Nt:o);return null===V?null:[new vo(u,V)]}}function Yh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Yp(n){const e=[],t=new Set;for(const r of n){if(!Yh(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Yp(r.children);e.push(new vo(r.value,o))}return e.filter(r=>!t.has(r))}function Qp(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function xa(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function _(n){return n.data||{}}function f(n){return n.resolve||{}}function Z(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Fe(n){return hn(e=>{const t=n(e);return t?(0,nn.D)(t).pipe((0,Tt.U)(()=>e)):nt(e)})}class ht extends class ft{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Cn=new d.OlP("ROUTES");class ai{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Tt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=u.create(e);return new md(kh(l.injector.get(Cn,void 0,d.XFs.Self|d.XFs.Optional)).map(Uc),l)}),Sr(u=>{throw t._loader$=void 0,u}));return t._loader$=new Ar(o,()=>new Tr.x).pipe(Ac()),t._loader$}loadModuleFactory(e){return Xn(e()).pipe((0,Jn.z)(t=>t instanceof d.YKP?nt(t):(0,nn.D)(this.compiler.compileModuleAsync(t))))}}class Qh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Jp(n){throw n}function Oa(n,e,t){return e.parse("/")}function Hc(n,e){return nt(null)}const Dd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xp={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let kn=(()=>{class n{constructor(t,r,o,u,l,m,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tr.x,this.errorHandler=Jp,this.malformedUriErrorHandler=Oa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hc,afterPreactivation:Hc},this.urlHandlingStrategy=new Qh,this.routeReuseStrategy=new ht,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(d.h0i),this.console=l.get(d.c2e);const O=l.get(d.R0b);this.isNgZoneEnabled=O instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function yu(){return new Zi(new C([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ai(l,m,V=>this.triggerEvent(new xr(V)),V=>this.triggerEvent(new Da(V))),this.routerState=ud(this.currentUrlTree,this.rootComponentType),this.transitions=new vi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ln(o=>0!==o.id),(0,Tt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),hn(o=>{let u=!1,l=!1;return nt(o).pipe((0,Ei.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),hn(m=>{const v=this.browserUrlTree.toString(),I=!this.navigated||m.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Xh(m.source)&&(this.browserUrlTree=m.extractedUrl),nt(m).pipe(hn(O=>{const V=this.transitions.getValue();return r.next(new Rh(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),V!==this.transitions.getValue()?ii.E:Promise.resolve(O)}),function l_(n,e,t,r){return hn(o=>function ur(n,e,t,r,o){return new Ou(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Tt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ei.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function p(n,e,t,r,o){return(0,Jn.z)(u=>function $c(n,e,t,r,o="emptyOnly",u="legacy"){try{const l=new Wp(n,e,t,r,o,u).recognize();return null===l?ms(new g_):nt(l)}catch(l){return ms(l)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Tt.U)(l=>Object.assign(Object.assign({},u),{targetSnapshot:l}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ei.b)(O=>{if("eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const W=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(W,O)}this.browserUrlTree=O.urlAfterRedirects}const V=new qo(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(V)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:W,source:J,restoredState:Me,extras:Oe}=m,pt=new Rh(V,this.serializeUrl(W),J,Me);r.next(pt);const wt=ud(W,this.rootComponentType).snapshot;return nt(Object.assign(Object.assign({},m),{targetSnapshot:wt,urlAfterRedirects:W,extras:Object.assign(Object.assign({},Oe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),ii.E}),Fe(m=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:O,extras:{skipLocationChange:V,replaceUrl:W}}=m;return this.hooks.beforePreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:O,skipLocationChange:!!V,replaceUrl:!!W})}),(0,Ei.b)(m=>{const v=new Ia(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),(0,Tt.U)(m=>Object.assign(Object.assign({},m),{guards:zh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function bd(n,e){return(0,Jn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?nt(Object.assign(Object.assign({},t),{guardsResult:!0})):function f_(n,e,t,r){return(0,nn.D)(n).pipe((0,Jn.z)(o=>function Kh(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?nt(u.map(m=>{const v=Ma(m,e,o);let I;if(function $h(n){return n&&Co(n.canDeactivate)}(v))I=Xn(v.canDeactivate(n,e,t,r));else{if(!Co(v))throw new Error("Invalid CanDeactivate guard");I=Xn(v(n,e,t,r))}return I.pipe(ba())})).pipe(yd()):nt(!0)}(o.component,o.route,t,e,r)),ba(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Jn.z)(m=>m&&function Bp(n){return"boolean"==typeof n}(m)?function p_(n,e,t,r){return(0,nn.D)(e).pipe(zi(o=>wa(function Zp(n,e){return null!==n&&e&&e(new Mc(n)),nt(!0)}(o.route.parent,r),function Id(n,e){return null!==n&&e&&e(new zo(n)),nt(!0)}(o.route,r),function Wh(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function d_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Ca(()=>nt(l.guards.map(v=>{const I=Ma(v,l.node,t);let S;if(function jh(n){return n&&Co(n.canActivateChild)}(I))S=Xn(I.canActivateChild(r,n));else{if(!Co(I))throw new Error("Invalid CanActivateChild guard");S=Xn(I(r,n))}return S.pipe(ba())})).pipe(yd())));return nt(u).pipe(yd())}(n,o.path,t),function oi(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return nt(!0);const o=r.map(u=>Ca(()=>{const l=Ma(u,e,t);let m;if(function Fc(n){return n&&Co(n.canActivate)}(l))m=Xn(l.canActivate(e,n));else{if(!Co(l))throw new Error("Invalid CanActivate guard");m=Xn(l(e,n))}return m.pipe(ba())}));return nt(o).pipe(yd())}(n,o.route,t))),ba(o=>!0!==o,!0))}(r,u,n,e):nt(m)),(0,Tt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Ei.b)(m=>{if(Au(m.guardsResult)){const I=zs(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw I.url=m.guardsResult,I}const v=new nd(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(v)}),ln(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Fe(m=>{if(m.guards.canActivateChecks.length)return nt(m).pipe((0,Ei.b)(v=>{const I=new Nh(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}),hn(v=>{let I=!1;return nt(v).pipe(function w(n,e){return(0,Jn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return nt(t);let u=0;return(0,nn.D)(o).pipe(zi(l=>function T(n,e,t,r){return function P(n,e,t,r){const o=Z(n);if(0===o.length)return nt({});const u={};return(0,nn.D)(o).pipe((0,Jn.z)(l=>function ae(n,e,t,r){const o=Ma(n,e,r);return Xn(o.resolve?o.resolve(e,t):o(e,t))}(n[l],e,t,r).pipe((0,Ei.b)(m=>{u[l]=m}))),Jl(1),(0,Jn.z)(()=>Z(u).length===o.length?nt(u):ii.E))}(n._resolve,n,e,r).pipe((0,Tt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),kp(n,t).resolve),null)))}(l.route,r,n,e)),(0,Ei.b)(()=>u++),Jl(1),(0,Jn.z)(l=>u===o.length?nt(t):ii.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ei.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),(0,Ei.b)(v=>{const I=new Mr(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}))}),Fe(m=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:O,extras:{skipLocationChange:V,replaceUrl:W}}=m;return this.hooks.afterPreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:O,skipLocationChange:!!V,replaceUrl:!!W})}),(0,Tt.U)(m=>{const v=function Fp(n,e,t){const r=Pc(n,e._root,t?t._root:void 0);return new Oc(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:v})}),(0,Ei.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Tt.U)(r=>(new kc(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Ei.b)({next(){u=!0},complete(){u=!0}}),Ph(()=>{var m;u||l||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Sr(m=>{if(l=!0,function Zs(n){return n&&n[qn]}(m)){const v=Au(m.url);v||(this.navigated=!0,this.restoreHistory(o,!0));const I=new td(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(I),v?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),O={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xh(o.source)};this.scheduleNavigation(S,"imperative",null,O,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new En(o.id,this.serializeUrl(o.extractedUrl),m);r.next(v);try{o.resolve(this.errorHandler(m))}catch(I){o.reject(I)}}return ii.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},l=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(l){const v=Object.assign({},l);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,l,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Vc(t),this.config=t.map(Uc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:v}=r,I=o||this.routerState.root,S=v?this.currentUrlTree.fragment:l;let O=null;switch(m){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=u||null}return null!==O&&(O=this.removeEmptyProps(O)),function t_(n,e,t,r,o){if(0===t.length)return Rc(e.root,e.root,e.root,r,o);const u=function u0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Lp(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return un(u.outlets,(v,I)=>{m[I]="string"==typeof v?v.split("/"):v}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Lp(t,e,r)}(t);if(u.toRoot())return Rc(e.root,e.root,new C([],{}),r,o);const l=function c0(n,e,t){if(n.isAbsolute)return new fd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new fd(u,u===e.root,0)}const r=bi(n.commands[0])?0:1;return function Uh(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new fd(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=l.processChildren?pd(l.segmentGroup,l.index,u.commands):Up(l.segmentGroup,l.index,u.commands);return Rc(e.root,l.segmentGroup,m,r,o)}(I,this.currentUrlTree,t,O,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Au(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Jh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Dd):!1===r?Object.assign({},Xp):r,Au(t))return Wo(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Wo(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new fs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,l){var m,v;if(this.disposed)return Promise.resolve(!1);let I,S,O;l?(I=l.resolve,S=l.reject,O=l.promise):O=new Promise((J,Me)=>{I=J,S=Me});const V=++this.navigationId;let W;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),W=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):W=0,this.setTransition({id:V,targetPageId:W,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:I,reject:S,promise:O,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),O.catch(J=>Promise.reject(J))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===l?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new td(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Xh(n){return"imperative"!==n}class eg{}class tg{preload(e,t){return nt(null)}}let p0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new ai(o,r,v=>t.triggerEvent(new xr(v)),v=>t.triggerEvent(new Da(v)))}setUpPreloading(){this.subscription=this.router.events.pipe(ln(t=>t instanceof fs),zi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const l=u._loadedConfig;o.push(this.processRoutes(l.module,l.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,nn.D)(o).pipe((0,po.J)(),(0,Tt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?nt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Jn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(kn),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(eg))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),__=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Rh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new mu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Nu=new d.OlP("ROUTER_CONFIGURATION"),ku=new d.OlP("ROUTER_FORROOT_GUARD"),g0=[_e,{provide:re,useClass:be},{provide:kn,useFactory:function v0(n,e,t,r,o,u,l={},m,v){const I=new kn(null,n,e,t,r,o,kh(u));return m&&(I.urlHandlingStrategy=m),v&&(I.routeReuseStrategy=v),function v_(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,I),l.enableTracing&&I.events.subscribe(S=>{var O,V;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(V=console.groupEnd)||void 0===V||V.call(console)}),I},deps:[re,Su,_e,d.zs3,d.Sil,Cn,Nu,[class Pu{},new d.FiY],[class Ye{},new d.FiY]]},Su,{provide:Tu,useFactory:function w0(n){return n.routerState.root},deps:[kn]},p0,tg,class f0{preload(e,t){return t().pipe(Sr(()=>nt(null)))}},{provide:Nu,useValue:{enableTracing:!1}}];function m0(){return new d.PXZ("Router",kn)}let _0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[g0,y_(t),{provide:ku,useFactory:y0,deps:[[kn,new d.FiY,new d.tp0]]},{provide:Nu,useValue:r||{}},{provide:he,useFactory:wb,deps:[ue,[new d.tBr(qe),new d.FiY],Nu]},{provide:__,useFactory:ng,deps:[kn,pc,Nu]},{provide:eg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:tg},{provide:d.PXZ,multi:!0,useFactory:m0},[Td,{provide:d.ip1,multi:!0,useFactory:rg,deps:[Td]},{provide:ig,useFactory:E0,deps:[Td]},{provide:d.tb,multi:!0,useExisting:ig}]]}}static forChild(t){return{ngModule:n,providers:[y_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ku,8),d.LFG(kn,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function ng(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new __(n,e,t)}function wb(n,e,t={}){return t.useHash?new Te(n,e):new Ke(n,e)}function y0(n){return"guarded"}function y_(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:Cn,multi:!0,useValue:n}]}let Td=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Tr.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(kn),l=this.injector.get(Nu);return"disabled"===l.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?nt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Nu),o=this.injector.get(p0),u=this.injector.get(__),l=this.injector.get(kn),m=this.injector.get(d.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),o.setUpPreloading(),u.init(),l.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function rg(n){return n.appInitializer.bind(n)}function E0(n){return n.bootstrapListener.bind(n)}const ig=new d.OlP("Router Initializer");var Ad=R(4986),Fn=R(5813),Ii=R(2011),I0=R(3942),me=R(5861),_s=R(9681),It=R(2090),tf=R(4859);const w_="firebasestorage.googleapis.com",D0="storageBucket";class zn extends It.ZR{constructor(e,t){super(ys(e),`Firebase Storage: ${t} (${ys(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zn.prototype)}_codeEquals(e){return ys(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ys(n){return"storage/"+n}function E_(){return new zn("unknown","An unknown error occurred, please check the error payload for server response.")}function M0(){return new zn("canceled","User canceled the upload/download.")}function C_(){return new zn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Pa(n){return new zn("invalid-argument",n)}function Ys(){return new zn("app-deleted","The Firebase app was deleted.")}function b_(n){return new zn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nf(n,e){return new zn("invalid-format","String does not match format '"+n+"': "+e)}function qc(n){throw new zn("internal-error","Internal error: "+n)}class bn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=bn.makeFromUrl(e,t)}catch(o){return new bn(e,"")}if(""===r.path)return r;throw function Sb(n){return new zn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+o+"(/(.*))?$","i");function I(st){st.path_=decodeURIComponent(st.path)}const O=t.replace(/[.]/g,"\\."),gt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${O}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:I},{regex:new RegExp(`^https?://${t===w_?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:I}];for(let st=0;st<gt.length;st++){const Ct=gt[st],Pt=Ct.regex.exec(e);if(Pt){let Qa=Pt[Ct.indices.path];Qa||(Qa=""),r=new bn(Pt[Ct.indices.bucket],Qa),Ct.postModify(r);break}}if(null==r)throw function Ab(n){return new zn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class I_{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function zc(n){return"string"==typeof n||n instanceof String}function rf(n){return sf()&&n instanceof Blob}function sf(){return"undefined"!=typeof Blob}function af(n,e,t,r){if(r<e)throw Pa(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Pa(`Invalid value for '${n}'. Expected ${t} or less.`)}function bo(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Mb(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Fu=(()=>{return(n=Fu||(Fu={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Fu;var n})();class xb{constructor(e,t,r,o,u,l,m,v,I,S,O){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=l,this.callback_=m,this.errorCallback_=v,this.timeout_=I,this.progressCallback_=S,this.connectionFactory_=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,W)=>{this.resolve_=V,this.reject_=W,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,l=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const v=this.callback_(m,m.getResponse());!function mS(n){return void 0!==n}(v)?u():u(v)}catch(v){l(v)}else if(null!==m){const v=E_();v.serverResponse=m.getErrorText(),l(this.errorCallback_?this.errorCallback_(m,v):v)}else l(o.canceled?this.appDelete_?Ys():M0():function S0(){return new zn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new sg(!1,null,!0)):this.backoffId_=function P0(n,e,t){let r=1,o=null,u=null,l=!1,m=0;function v(){return 2===m}let I=!1;function S(...Oe){I||(I=!0,e.apply(null,Oe))}function O(Oe){o=setTimeout(()=>{o=null,n(W,v())},Oe)}function V(){u&&clearTimeout(u)}function W(Oe,...pt){if(I)return void V();if(Oe)return V(),void S.call(null,Oe,...pt);if(v()||l)return V(),void S.call(null,Oe,...pt);let gt;r<64&&(r*=2),1===m?(m=2,gt=0):gt=1e3*(r+Math.random()),O(gt)}let J=!1;function Me(Oe){J||(J=!0,V(),!I&&(null!==o?(Oe||(m=2),clearTimeout(o),O(0)):Oe||(m=1)))}return O(0),u=setTimeout(()=>{l=!0,Me(!0)},t),Me}((r,o)=>{if(o)return void r(!1,new sg(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const l=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(l),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(l),this.pendingConnection_=null;const m=u.getErrorCode()===Fu.NO_ERROR,v=u.getStatus();if(!m||this.isRetryStatusCode_(v)){const S=u.getErrorCode()===Fu.ABORT;return void r(!1,new sg(!1,null,S))}const I=-1!==this.successCodes_.indexOf(v);r(!0,new sg(I,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function D_(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class sg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function F0(...n){const e=function k0(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(sf())return new Blob(n);throw new zn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Qs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class L0{constructor(e,t){this.data=e,this.contentType=t||null}}function V0(n,e){switch(n){case Qs.RAW:return new L0(Nb(e));case Qs.BASE64:case Qs.BASE64URL:return new L0(kb(n,e));case Qs.DATA_URL:return new L0(function ES(n){const e=new Fb(n);return e.base64?kb(Qs.BASE64,e.rest):function wS(n){let e;try{e=decodeURIComponent(n)}catch(t){throw nf(Qs.DATA_URL,"Malformed data URL.")}return Nb(e)}(e.rest)}(e),function CS(n){return new Fb(n).contentType}(e))}throw E_()}function Nb(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function kb(n,e){switch(n){case Qs.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw nf(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Qs.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw nf(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function T_(n){return atob(n)}(e)}catch(o){throw nf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class Fb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw nf(Qs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function bS(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class zr{constructor(e,t){let r=0,o="";rf(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(rf(this.data_)){const o=function Rb(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new zr(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new zr(r,!0)}}static getBlob(...e){if(sf()){const t=e.map(r=>r instanceof zr?r.data_:r);return new zr(F0.apply(null,t))}{const t=e.map(l=>zc(l)?V0(Qs.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(l=>{for(let m=0;m<l.length;m++)o[u++]=l[m]}),new zr(o,!0)}}uploadData(){return this.data_}}function uf(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function _S(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function og(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function B0(n,e){return e}class Zr{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||B0}}let ag=null;function Sd(){if(ag)return ag;const n=[];n.push(new Zr("bucket")),n.push(new Zr("generation")),n.push(new Zr("metageneration")),n.push(new Zr("name","fullPath",!0));const t=new Zr("name");t.xform=function e(u,l){return function Lu(n){return!zc(n)||n.length<2?n:og(n)}(l)},n.push(t);const o=new Zr("size");return o.xform=function r(u,l){return void 0!==l?Number(l):l},n.push(o),n.push(new Zr("timeCreated")),n.push(new Zr("updated")),n.push(new Zr("md5Hash",null,!0)),n.push(new Zr("cacheControl",null,!0)),n.push(new Zr("contentDisposition",null,!0)),n.push(new Zr("contentEncoding",null,!0)),n.push(new Zr("contentLanguage",null,!0)),n.push(new Zr("contentType",null,!0)),n.push(new Zr("metadata","customMetadata",!0)),ag=n,ag}function j0(n,e,t){const r=uf(e);return null===r?null:function A_(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const l=t[u];r[l.local]=l.xform(r,e[l.server])}return function Vb(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new bn(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function S_(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const H0="prefixes";class Di{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ji(n){if(!n)throw E_()}function Ra(n,e){return function t(r,o){const u=j0(n,o,e);return Ji(null!==u),u}}function Zc(n){return function e(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Db(){return new zn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Ib(){return new zn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function bb(n){return new zn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Tb(n){return new zn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function Wc(n){const e=Zc(n);return function t(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function A0(n){return new zn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function ug(n,e,t){const o=bo(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Di(o,"GET",Ra(n,t),l);return m.errorHandler=Wc(e),m}function q0(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const m=bo(e.bucketOnlyServerUrl(),n.host,n._protocol),I=n.maxOperationRetryTime,S=new Di(m,"GET",function Ub(n,e){return function t(r,o){const u=function M_(n,e,t){const r=uf(t);return null===r?null:function xd(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[H0])for(const o of t[H0]){const u=o.replace(/\/$/,""),l=n._makeStorageReference(new bn(e,u));r.prefixes.push(l)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new bn(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return Ji(null!==u),u}}(n,e.bucket),I);return S.urlParams=u,S.errorHandler=Zc(e),S}function x_(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Z0(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class lf{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function O_(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){Ji(!1)}return Ji(!!t&&-1!==(e||["active"]).indexOf(t)),t}const DS={STATE_CHANGED:"state_changed"},Xi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cg(n){switch(n){case"running":case"pausing":case"canceling":return Xi.RUNNING;case"paused":return Xi.PAUSED;case"success":return Xi.SUCCESS;case"canceled":return Xi.CANCELED;default:return Xi.ERROR}}class TS{constructor(e,t,r){if(function R0(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Od(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Hb extends class Y0{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw qc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qc("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw qc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Io(){return new Hb}class X0{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Sd(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function jb(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),l=x_(e,r,o),m={name:l.fullPath},v=bo(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},O=S_(l,t),J=new Di(v,"POST",function W(Me){let Oe;O_(Me);try{Oe=Me.getResponseHeader("X-Goog-Upload-URL")}catch(pt){Ji(!1)}return Ji(zc(Oe)),Oe},n.maxUploadRetryTime);return J.urlParams=m,J.headers=S,J.body=O,J.errorHandler=Zc(e),J}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Io,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function vs(n,e,t,r){const v=new Di(t,"POST",function u(I){const S=O_(I,["active","final"]);let O=null;try{O=I.getResponseHeader("X-Goog-Upload-Size-Received")}catch(W){Ji(!1)}O||Ji(!1);const V=Number(O);return Ji(!isNaN(V)),new lf(V,r.size(),"final"===S)},n.maxUploadRetryTime);return v.headers={"X-Goog-Upload-Command":"query"},v.errorHandler=Zc(e),v}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,Io,t,r);this._request=u,u.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new lf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let l;try{l=function $b(n,e,t,r,o,u,l,m){const v=new lf(0,0);if(l?(v.current=l.current,v.total=l.total):(v.current=0,v.total=r.size()),r.size()!==v.total)throw function x0(){return new zn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const I=v.total-v.current;let S=I;o>0&&(S=Math.min(S,o));const O=v.current,J={"X-Goog-Upload-Command":S===I?"upload, finalize":"upload","X-Goog-Upload-Offset":`${v.current}`},Me=r.slice(O,O+S);if(null===Me)throw C_();const gt=new Di(t,"POST",function Oe(st,Ct){const Pt=O_(st,["active","final"]),nr=v.current+S,Qa=r.size();let gS;return gS="final"===Pt?Ra(e,u)(st,Ct):null,new lf(nr,Qa,"final"===Pt,gS)},e.maxUploadRetryTime);return gt.headers=J,gt.body=Me.uploadData(),gt.progressCallback=m||null,gt.errorHandler=Zc(n),gt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(v){return this._error=v,void this._transition("error")}const m=this._ref.storage._makeRequest(l,Io,o,u);this._request=m,m.getPromise().then(v=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(v.current),v.finalized?(this._metadata=v.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=ug(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,Io,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function W0(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},v=function m(){let gt="";for(let st=0;st<2;st++)gt+=Math.random().toString().slice(2);return gt}();l["Content-Type"]="multipart/related; boundary="+v;const I=x_(e,r,o),S=S_(I,t),W=zr.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+v+"\r\nContent-Type: "+I.contentType+"\r\n\r\n",r,"\r\n--"+v+"--");if(null===W)throw C_();const J={name:I.fullPath},Me=bo(u,n.host,n._protocol),pt=n.maxUploadRetryTime,wt=new Di(Me,"POST",Ra(n,t),pt);return wt.urlParams=J,wt.headers=l,wt.body=W.uploadData(),wt.errorHandler=Zc(e),wt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Io,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=M0(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=cg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new TS(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(cg(this._state)){case Xi.SUCCESS:Od(this._resolve.bind(null,this.snapshot))();break;case Xi.CANCELED:case Xi.ERROR:Od(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(cg(this._state)){case Xi.RUNNING:case Xi.PAUSED:e.next&&Od(e.next.bind(e,this.snapshot))();break;case Xi.SUCCESS:e.complete&&Od(e.complete.bind(e))();break;default:e.error&&Od(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Kc{constructor(e,t){this._service=e,this._location=t instanceof bn?t:bn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Kc(e,t)}get root(){const e=new bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return og(this._location.path)}get storage(){return this._service}get parent(){const e=function Lb(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new bn(this._location.bucket,e);return new Kc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw b_(e)}}function rw(n,e,t){return iw.apply(this,arguments)}function iw(){return(iw=(0,me.Z)(function*(n,e,t){const o=yield R_(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield rw(n,e,o.nextPageToken))})).apply(this,arguments)}function R_(n,e){null!=e&&"number"==typeof e.maxResults&&af("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=q0(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Io)}function Kb(n){n._throwIfRoot("getDownloadURL");const e=function Bb(n,e,t){const o=bo(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,m=new Di(o,"GET",function G0(n,e){return function t(r,o){const u=j0(n,o,e);return Ji(null!==u),function $0(n,e,t,r){const o=uf(e);if(null===o||!zc(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const l=encodeURIComponent;return u.split(",").map(I=>{const O=n.fullPath;return bo("/b/"+l(n.bucket)+"/o/"+l(O),t,r)+Mb({alt:"media",token:I})})[0]}(u,o,n.host,n._protocol)}}(n,t),l);return m.errorHandler=Wc(e),m}(n.storage,n._location,Sd());return n.storage.makeRequestWithTokens(e,Io).then(t=>{if(null===t)throw function O0(){return new zn("no-download-url","The given file does not have any download URLs.")}();return t})}function sw(n,e){const t=function U0(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new bn(n._location.bucket,t);return new Kc(n.storage,r)}function hg(n,e){if(n instanceof pg){const t=n;if(null==t._bucket)throw function xt(){return new zn("no-default-bucket","No default bucket found. Did you set the '"+D0+"' property when initializing the app?")}();const r=new Kc(t,t._bucket);return null!=e?hg(r,e):r}return void 0!==e?sw(n,e):n}function Qb(n,e){if(e&&function Yb(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof pg)return function dg(n,e){return new Kc(n,e)}(n,e);throw Pa("To use ref(service, url), the first argument must be a Storage instance.")}return hg(n,e)}function fg(n,e){const t=null==e?void 0:e[D0];return null==t?null:bn.makeFromBucketSpec(t,n)}class pg{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=w_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?bn.makeFromBucketSpec(o,this._host):fg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?bn.makeFromBucketSpec(this._url,e):fg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){af("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){af("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kc(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new I_(Ys());{const u=function vS(n,e,t,r,o,u){const l=Mb(n.urlParams),m=n.url+l,v=Object.assign({},n.headers);return function yS(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function Ob(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function N0(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(v,u),function Pb(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new xb(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const Jb="@firebase/storage";function lw(n,e){return Qb(n=(0,It.m9)(n),e)}function nI(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new pg(t,r,o,e,_s.SDK_VERSION)}!function F_(){(0,_s._registerComponent)(new tf.wA("storage",nI,"PUBLIC").setMultipleInstances(!0)),(0,_s.registerVersion)(Jb,"0.9.9",""),(0,_s.registerVersion)(Jb,"0.9.9","esm2017")}();class df{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class L_{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new df(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new df(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?l=>t(new df(l,this,this._ref)):{next:t.next?l=>t.next(new df(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class V_{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ka(e,this._service))}get items(){return this._delegate.items.map(e=>new ka(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ka{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function SS(n,e){return sw(n,e)}(this._delegate,e);return new ka(t,this.storage)}get root(){return new ka(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ka(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new L_(function ow(n,e,t){return function Jo(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new X0(n,new zr(e),t)}(n=(0,It.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Qs.RAW,r){this._throwIfRoot("putString");const o=V0(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new L_(new X0(this._delegate,new zr(o.data,!0),u),this)}listAll(){return function Na(n){return function zb(n){const e={prefixes:[],items:[]};return rw(n,e).then(()=>e)}(n=(0,It.m9)(n))}(this._delegate).then(e=>new V_(e,this.storage))}list(e){return function cw(n,e){return R_(n=(0,It.m9)(n),e)}(this._delegate,e||void 0).then(t=>new V_(t,this.storage))}getMetadata(){return function aw(n){return function Zb(n){n._throwIfRoot("getMetadata");const e=ug(n.storage,n._location,Sd());return n.storage.makeRequestWithTokens(e,Io)}(n=(0,It.m9)(n))}(this._delegate)}updateMetadata(e){return function uw(n,e){return function Wb(n,e){n._throwIfRoot("updateMetadata");const t=function z0(n,e,t,r){const u=bo(e.fullServerUrl(),n.host,n._protocol),m=S_(t,r),I=n.maxOperationRetryTime,S=new Di(u,"PATCH",Ra(n,r),I);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=m,S.errorHandler=Wc(e),S}(n.storage,n._location,e,Sd());return n.storage.makeRequestWithTokens(t,Io)}(n=(0,It.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function mg(n){return Kb(n=(0,It.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function tI(n){return function N_(n){n._throwIfRoot("deleteObject");const e=function IS(n,e){const r=bo(e.fullServerUrl(),n.host,n._protocol),m=new Di(r,"DELETE",function l(v,I){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=Wc(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Io)}(n=(0,It.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw b_(e)}}class yg{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(pw(e))throw Pa("ref() expected a child path but got a URL, use refFromURL instead.");return new ka(lw(this._delegate,e),this)}refFromURL(e){if(!pw(e))throw Pa("refFromURL() expected a full URL but got a child path, use ref() instead.");try{bn.makeFromUrl(e,this._delegate.host)}catch(t){throw Pa("refFromUrl() expected a valid full URL but got an invalid one.")}return new ka(lw(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function hw(n,e,t,r={}){!function k_(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,It.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function pw(n){return/^[A-Za-z]+:\/\//.test(n)}function mw(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new yg(t,r)}!function iI(n){const e={TaskState:Xi,TaskEvent:DS,StringFormat:Qs,Storage:yg,Reference:ka};n.INTERNAL.registerComponent(new tf.wA("storage-compat",mw,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(I0.Z),R(5867);var Va=R(1877);const Ew=new Map,lI={activated:!1,tokenObservers:[]},NS={initialized:!1,enabled:!1};function Wr(n){return Ew.get(n)||lI}function ws(n,e){Ew.set(n,e)}function vg(){return NS}class bw{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new It.BH,yield function Iw(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new It.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ti=new It.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function j_(n){if(!Wr(n).activated)throw Ti.create("use-before-activation",{appName:n.name})}function ff(n,e){return $_.apply(this,arguments)}function $_(){return($_=(0,me.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const W=yield l.getHeartbeatsHeader();W&&(u["X-Firebase-Client"]=W)}const m={method:"POST",body:JSON.stringify(e),headers:u};let v,I;try{v=yield fetch(n,m)}catch(W){throw Ti.create("fetch-network-error",{originalErrorMessage:null===(r=W)||void 0===r?void 0:r.message})}if(200!==v.status)throw Ti.create("fetch-status-error",{httpStatus:v.status});try{I=yield v.json()}catch(W){throw Ti.create("fetch-parse-error",{originalErrorMessage:null===(o=W)||void 0===o?void 0:o.message})}const S=I.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw Ti.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${I.ttl}`});const O=1e3*Number(S[1]),V=Date.now();return{token:I.token,expireTimeMillis:V+O,issuedAtTimeMillis:V}})).apply(this,arguments)}function pI(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Vu="firebase-app-check-store";let Cg=null;function Rd(){return Cg||(Cg=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(Ti.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(Vu,{keyPath:"compositeKey"})}}catch(r){e(Ti.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Cg)}function Pr(){return(Pr=(0,me.Z)(function*(n,e){const r=(yield Rd()).transaction(Vu,"readwrite"),u=r.objectStore(Vu).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=v=>{l()},r.onerror=v=>{var I;m(Ti.create("storage-set",{originalErrorMessage:null===(I=v.target.error)||void 0===I?void 0:I.message}))}})})).apply(this,arguments)}const Qc=new Va.Yd("@firebase/app-check");function Jc(n,e){return(0,It.hl)()?function yI(n,e){return function Nd(n,e){return Pr.apply(this,arguments)}(function Es(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Qc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Xc(){return vg().enabled}function el(){return $u.apply(this,arguments)}function $u(){return($u=(0,me.Z)(function*(){const n=vg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Tw={error:"UNKNOWN_ERROR"};function Aw(n){return It.US.encodeString(JSON.stringify(n),!1)}function pf(n){return bg.apply(this,arguments)}function bg(){return(bg=(0,me.Z)(function*(n,e=!1){const t=n.app;j_(t);const r=Wr(t);let u,o=r.token;if(!o){const v=yield r.cachedTokenPromise;v&&Tg(v)&&(o=v)}if(!e&&o&&Tg(o))return{token:o.token};let m,l=!1;if(Xc()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ff(pI(t,yield el()),n.heartbeatServiceProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),l=!0);const v=yield r.exchangeTokenPromise;return yield Jc(t,v),ws(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),l=!0),o=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Qc.warn(v.message):Qc.error(v),u=v}return o?(m={token:o.token},ws(t,Object.assign(Object.assign({},r),{token:o})),yield Jc(t,o)):m=Mw(u),l&&q_(t,m),m})).apply(this,arguments)}function Dg(n,e){const t=Wr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ws(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function G_(n){const{app:e}=n,t=Wr(e);let r=t.tokenRefresher;r||(r=function Sw(n){const{app:e}=n;return new bw((0,me.Z)(function*(){let r;if(r=Wr(e).token?yield pf(n,!0):yield pf(n),r.error)throw r.error}),()=>!0,()=>{const t=Wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ws(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function q_(n,e){const t=Wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Tg(n){return n.expireTimeMillis-Date.now()>0}function Mw(n){return{token:Aw(Tw),error:n}}class vI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Wr(this.app);for(const t of e)Dg(this.app,t.next);return Promise.resolve()}}const kw="app-check-internal";!function Fw(){(0,_s._registerComponent)(new tf.wA("app-check",n=>function wI(n,e){return new vI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kw).initialize()})),(0,_s._registerComponent)(new tf.wA(kw,n=>function xw(n){return{getToken:e=>pf(n,e),addTokenListener:e=>function Ig(n,e,t,r){const{app:o}=n,u=Wr(o),l={next:t,error:r,type:e};if(ws(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,l]})),u.token&&Tg(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),G_(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>G_(n))}(n,"INTERNAL",e),removeTokenListener:e=>Dg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_s.registerVersion)("@firebase/app-check","0.5.12")}();class Mg{constructor(){return(0,Fn.vb)("app-check")}}"undefined"!=typeof window&&window;var LI=R(127);function mf(n){const e=function Og(n){return new On.y(e=>{const t=l=>e.next(l);t(n.snapshot);const u=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){u()}}).pipe(function Eb(n,e=Ad.z){return(0,Gn.e)((t,r)=>{let o=null,u=null,l=null;const m=()=>{if(o){o.unsubscribe(),o=null;const I=u;u=null,r.next(I)}};function v(){const I=l+n,S=e.now();if(S<I)return o=this.schedule(void 0,I-S),void r.add(o);m()}t.subscribe((0,ar.x)(r,I=>{u=I,l=e.now(),o||(o=e.schedule(v,n),r.add(o))},()=>{m(),r.complete()},void 0,()=>{u=o=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Tt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Bd(n){return{getDownloadURL:()=>nt(void 0).pipe(Fn.fc,hn(()=>n.getDownloadURL()),Fn.iC),getMetadata:()=>nt(void 0).pipe(Fn.fc,hn(()=>n.getMetadata()),Fn.iC),delete:()=>(0,nn.D)(n.delete()),child:e=>Bd(n.child(e)),updateMetadata:e=>(0,nn.D)(n.updateMetadata(e)),put:(e,t)=>mf(n.put(e,t)),putString:(e,t,r)=>mf(n.putString(e,t,r)),list:e=>(0,nn.D)(n.list(e)),listAll:()=>(0,nn.D)(n.listAll())}}const jS=new d.OlP("angularfire2.storageBucket"),VI=new d.OlP("angularfire2.storage.maxUploadRetryTime"),J_=new d.OlP("angularfire2.storage.maxOperationRetryTime"),X_=new d.OlP("angularfire2.storage.use-emulator");let $w=(()=>{class n{constructor(t,r,o,u,l,m,v,I,S,O){const V=(0,Ii.on)(t,l,r);this.storage=(0,Ii.cc)(`${V.name}.storage.${o}`,"AngularFireStorage",V.name,()=>{const W=l.runOutsideAngular(()=>V.storage(o||void 0)),J=S;return J&&W.useEmulator(...J),v&&W.setMaxUploadRetryTime(v),I&&W.setMaxOperationRetryTime(I),W},[v,I])}ref(t){return Bd(this.storage.ref(t))}refFromURL(t){return Bd(this.storage.refFromURL(t))}upload(t,r,o){return Bd(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ii.Dh),d.LFG(Ii.xv,8),d.LFG(jS,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Fn.HU),d.LFG(VI,8),d.LFG(J_,8),d.LFG(X_,8),d.LFG(Mg,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var Gw=R(6451),jd=R(5363),qw=R(6063);class jI extends Tr.x{constructor(e=1/0,t=1/0,r=qw.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=l;v+=2)m=v;m&&r.splice(0,m+1)}}}var zw=R(3099);function ey(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,zw.B)({connector:()=>new jI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Pg(n,e){return(0,Hs.m)(e)?hn(()=>n,e):hn(()=>n)}var Rg=R(9468);const Zw=new d.OlP("angularfire2.auth.use-emulator"),Ww=new d.OlP("angularfire2.auth.settings"),ty=new d.OlP("angularfire2.auth.tenant-id"),Ng=new d.OlP("angularfire2.auth.langugage-code"),ny=new d.OlP("angularfire2.auth.use-device-language"),ry=new d.OlP("angularfire.auth.persistence"),iy=(n,e,t,r,o,u,l,m)=>(0,Ii.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),l)for(const[I,S]of Object.entries(l))v.settings[I]=S;return m&&v.setPersistence(m),v},[t,r,o,u,l,m]);let _f=(()=>{class n{constructor(t,r,o,u,l,m,v,I,S,O,V,W){const J=new Tr.x,Me=nt(void 0).pipe((0,jd.Q)(l.outsideAngular),hn(()=>u.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,1451)))),(0,Tt.U)(()=>(0,Ii.on)(t,u,r)),(0,Tt.U)(Oe=>iy(Oe,u,m,I,S,O,v,V)),ey({bufferSize:1,refCount:!1}));if(No(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nt(null);else{Me.pipe(ba()).subscribe();const pt=Me.pipe(hn(st=>st.getRedirectResult().then(Ct=>Ct,()=>null)),Fn.iC,ey({bufferSize:1,refCount:!1})),wt=Me.pipe(hn(st=>new On.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>st.onAuthStateChanged(Pt=>Ct.next(Pt),Pt=>Ct.error(Pt),()=>Ct.complete()))})))),gt=Me.pipe(hn(st=>new On.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>st.onIdTokenChanged(Pt=>Ct.next(Pt),Pt=>Ct.error(Pt),()=>Ct.complete()))}))));this.authState=pt.pipe(Pg(wt),(0,Rg.R)(l.outsideAngular),(0,jd.Q)(l.insideAngular)),this.user=pt.pipe(Pg(gt),(0,Rg.R)(l.outsideAngular),(0,jd.Q)(l.insideAngular)),this.idToken=this.user.pipe(hn(st=>st?(0,nn.D)(st.getIdToken()):nt(null))),this.idTokenResult=this.user.pipe(hn(st=>st?(0,nn.D)(st.getIdTokenResult()):nt(null))),this.credential=(0,Gw.T)(pt,J,this.authState.pipe(ln(st=>!st))).pipe((0,Tt.U)(st=>(null==st?void 0:st.user)?st:null),(0,Rg.R)(l.outsideAngular),(0,jd.Q)(l.insideAngular))}return(0,Ii.pX)(this,Me,u,{spy:{apply:(Oe,pt,wt)=>{(Oe.startsWith("signIn")||Oe.startsWith("createUser"))&&wt.then(gt=>J.next(gt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ii.Dh),d.LFG(Ii.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Fn.HU),d.LFG(Zw,8),d.LFG(Ww,8),d.LFG(ty,8),d.LFG(Ng,8),d.LFG(ny,8),d.LFG(ry,8),d.LFG(Mg,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Kw=(()=>{class n{constructor(){LI.Z.registerVersion("angularfire",Fn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[_f]}),n})();function kg(){return(0,Gn.e)((n,e)=>{let t,r=!1;n.subscribe((0,ar.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Qw(n,e){return n===e}R(1451);var Je,HI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ua={},sy=sy||{},it=HI||self;function yf(){}function oy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ay="closure_uid_"+(1e9*Math.random()>>>0),Xw=0;function eE(n,e,t){return n.call.apply(n.bind,arguments)}function $d(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Kr(n,e,t){return(Kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?eE:$d).apply(null,arguments)}function Fg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Rr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function Hu(){this.s=this.s,this.o=this.o}var $S={};Hu.prototype.s=!1,Hu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Jw(n){return Object.prototype.hasOwnProperty.call(n,ay)&&n[ay]||(n[ay]=++Xw)}(this);delete $S[n]}},Hu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const uy=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Lg=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function nE(n){return Array.prototype.concat.apply([],arguments)}function cy(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Cs(n){return/^[\s\xa0]*$/.test(n)}var ui,Js=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function fn(n,e){return-1!=n.indexOf(e)}function Vg(n,e){return n<e?-1:n>e?1:0}e:{var rE=it.navigator;if(rE){var iE=rE.userAgent;if(iE){ui=iE;break e}}ui=""}function ly(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function sE(n){const e={};for(const t in n)e[t]=n[t];return e}var Ug="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hd(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Ug.length;u++)t=Ug[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function dy(n){return dy[" "](n),n}dy[" "]=yf;var qd,n,GI=fn(ui,"Opera"),tl=fn(ui,"Trident")||fn(ui,"MSIE"),hy=fn(ui,"Edge"),Gd=hy||tl,aE=fn(ui,"Gecko")&&!(fn(ui.toLowerCase(),"webkit")&&!fn(ui,"Edge"))&&!(fn(ui,"Trident")||fn(ui,"MSIE"))&&!fn(ui,"Edge"),uE=fn(ui.toLowerCase(),"webkit")&&!fn(ui,"Edge");function fy(){var n=it.document;return n?n.documentMode:void 0}e:{var zd="",Bg=(n=ui,aE?/rv:([^\);]+)(\)|;)/.exec(n):hy?/Edge\/([\d\.]+)/.exec(n):tl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uE?/WebKit\/(\S+)/.exec(n):GI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Bg&&(zd=Bg?Bg[1]:""),tl){var jg=fy();if(null!=jg&&jg>parseFloat(zd)){qd=String(jg);break e}}qd=zd}var cE={};var dE=it.document&&tl&&(fy()||parseInt(qd,10))||void 0,hE=function(){if(!it.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{it.addEventListener("test",yf,e),it.removeEventListener("test",yf,e)}catch(t){}return n}();function ci(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function wf(n,e){if(ci.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(aE){e:{try{dy(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:qI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&wf.Z.h.call(this)}}ci.prototype.h=function(){this.defaultPrevented=!0},Rr(wf,ci);var qI={2:"touch",3:"pen",4:"mouse"};wf.prototype.h=function(){wf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ef="closure_listenable_"+(1e6*Math.random()|0),zI=0;function ZI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++zI,this.ca=this.fa=!1}function Hg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Gg(n){this.src=n,this.g={},this.h=0}function gy(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=uy(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Hg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function my(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Gg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=my(n,e,r,o);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new ZI(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var _y="closure_lm_"+(1e6*Math.random()|0),yy={};function fE(n,e,t,r,o){if(r&&r.once)return gE(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)fE(n,e[u],t,r,o);return null}return t=Zg(t),n&&n[Ef]?n.N(e,t,vf(r)?!!r.capture:!!r,o):pE(n,e,t,!1,r,o)}function pE(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=vf(o)?!!o.capture:!!o,m=qg(n);if(m||(n[_y]=m=new Gg(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function WI(){var e=_E;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)hE||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(wy(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function gE(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)gE(n,e[u],t,r,o);return null}return t=Zg(t),n&&n[Ef]?n.O(e,t,vf(r)?!!r.capture:!!r,o):pE(n,e,t,!0,r,o)}function mE(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)mE(n,e[u],t,r,o);else r=vf(r)?!!r.capture:!!r,t=Zg(t),n&&n[Ef]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=my(u=n.g[e],t,r,o))&&(Hg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=qg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=my(e,t,r,o)),(t=-1<n?e[n]:null)&&vy(t))}function vy(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ef])gy(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(wy(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=qg(e))?(gy(t,n),0==t.h&&(t.src=null,e[_y]=null)):Hg(n)}}}function wy(n){return n in yy?yy[n]:yy[n]="on"+n}function _E(n,e){if(n.ca)n=!0;else{e=new wf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&vy(n),n=t.call(r,e)}return n}function qg(n){return(n=n[_y])instanceof Gg?n:null}var zg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zg(n){return"function"==typeof n?n:(n[zg]||(n[zg]=function(e){return n.handleEvent(e)}),n[zg])}function vr(){Hu.call(this),this.i=new Gg(this),this.P=this,this.I=null}function Nr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ci(e,n);else if(e instanceof ci)e.target=e.target||n;else{var o=e;Hd(e=new ci(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=Cf(l,r,!0,e)&&o}if(o=Cf(l=e.g=n,r,!0,e)&&o,o=Cf(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Cf(l=e.g=t[u],r,!1,e)&&o}function Cf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ca&&l.capture==t){var m=l.listener,v=l.ia||l.src;l.fa&&gy(n.i,l),o=!1!==m.call(v,r)&&o}}return o&&!r.defaultPrevented}Rr(vr,Hu),vr.prototype[Ef]=!0,vr.prototype.removeEventListener=function(n,e,t,r){mE(this,n,e,t,r)},vr.prototype.M=function(){if(vr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Hg(t[r]);delete n.g[e],n.h--}}this.I=null},vr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Wg=it.JSON.stringify;function yE(){var n=Cy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var wE,Gu=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new KI,n=>n.reset());class KI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function YI(n){it.setTimeout(()=>{throw n},0)}function qu(n,e){wE||function Ey(){var n=it.Promise.resolve(void 0);wE=function(){n.then(CE)}}(),EE||(wE(),EE=!0),Cy.add(n,e)}var EE=!1,Cy=new class vE{constructor(){this.h=this.g=null}add(e,t){const r=Gu.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function CE(){for(var n;n=yE();){try{n.h.call(n.g)}catch(t){YI(t)}var e=Gu;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}EE=!1}function by(n,e){vr.call(this),this.h=n||1,this.g=e||it,this.j=Kr(this.kb,this),this.l=Date.now()}function yt(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Iy(n,e,t){if("function"==typeof n)t&&(n=Kr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Kr(n.handleEvent,n)}return 2147483647<Number(e)?-1:it.setTimeout(n,e||0)}function bE(n){n.g=Iy(()=>{n.g=null,n.i&&(n.i=!1,bE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Rr(by,vr),(Je=by.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Nr(this,"tick"),this.da&&(yt(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){by.Z.M.call(this),yt(this),delete this.g};class QI extends Hu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bE(this)}M(){super.M(),this.g&&(it.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zu(n){Hu.call(this),this.h=n,this.g={}}Rr(zu,Hu);var IE=[];function bf(n,e,t,r){Array.isArray(t)||(t&&(IE[0]=t.toString()),t=IE);for(var o=0;o<t.length;o++){var u=fE(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function If(n){ly(n.g,function(e,t){this.g.hasOwnProperty(t)&&vy(e)},n),n.g={}}function pn(){this.g=!0}function Zd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function TE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return Wg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}zu.prototype.M=function(){zu.Z.M.call(this),If(this)},zu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},pn.prototype.Aa=function(){this.g=!1},pn.prototype.info=function(){};var Zu={},Dy=null;function Df(){return Dy=Dy||new vr}function AE(n){ci.call(this,Zu.Ma,n)}function Tf(n){const e=Df();Nr(e,new AE(e,n))}function SE(n,e){ci.call(this,Zu.STAT_EVENT,n),this.stat=e}function wr(n){const e=Df();Nr(e,new SE(e,n))}function ME(n,e){ci.call(this,Zu.Na,n),this.size=e}function Af(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return it.setTimeout(function(){n()},e)}Zu.Ma="serverreachability",Rr(AE,ci),Zu.STAT_EVENT="statevent",Rr(SE,ci),Zu.Na="timingevent",Rr(ME,ci);var Kg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Sf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Yg(){}function Ay(){}Yg.prototype.h=null;var Sy,Mf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function nl(){ci.call(this,"d")}function rl(){ci.call(this,"c")}function Qg(){}function xf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new zu(this),this.P=xE,this.W=new by(n=Gd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new My}function My(){this.i=null,this.g="",this.h=!1}Rr(nl,ci),Rr(rl,ci),Rr(Qg,Yg),Qg.prototype.g=function(){return new XMLHttpRequest},Qg.prototype.i=function(){return{}},Sy=new Qg;var xE=45e3,Jg={},Xg={};function em(n,e,t){n.K=1,n.v=Pf(Ba(e)),n.s=t,n.U=!0,OE(n,null)}function OE(n,e){n.F=Date.now(),tm(n),n.A=Ba(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),VE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new My,n.g=zy(n.l,t?e:null,!n.s),0<n.O&&(n.L=new QI(Kr(n.Ia,n,n.g),n.O)),bf(n.V,n.g,"readystatechange",n.gb),e=n.H?sE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Tf(1),function HS(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),v=0;v<m.length;v++){var I=m[v].split("=");if(1<I.length){var S=I[0];I=I[1];var O=S.split("_");l=2<=O.length&&"type"==O[1]?l+(S+"=")+I+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function PE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function XI(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=GS(n,t),o==Xg){4==e&&(n.o=4,wr(14),r=!1),Zd(n.j,n.m,null,"[Incomplete Response]");break}if(o==Jg){n.o=4,wr(15),Zd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zd(n.j,n.m,o,null),xy(n,o)}PE(n)&&o!=Xg&&o!=Jg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,wr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),qy(e),e.L=!0,wr(11))):(Zd(n.j,n.m,t,"[Invalid Chunked Response]"),il(n),Wu(n))}function GS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Xg:(t=Number(e.substring(t,r)),isNaN(t)?Jg:(r+=1)+t>e.length?Xg:(e=e.substr(r,t),n.C=r+t,e))}function tm(n){n.Y=Date.now()+n.P,eD(n,n.P)}function eD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Af(Kr(n.eb,n),e)}function Of(n){n.B&&(it.clearTimeout(n.B),n.B=null)}function Wu(n){0==n.l.G||n.I||YE(n.l,n)}function il(n){Of(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,yt(n.W),If(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xy(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||im(t.i,n)))if(t.I=n.N,!n.J&&im(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Af(Kr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;am(t),Lf(t)}Vf(t),wr(18)}if(1>=ky(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else ec(t,11)}else if((n.J||t.g==n)&&am(t),!Cs(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let I=o[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const S=I[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const O=I[4];null!=O&&(t.za=O,t.h.info("SVER="+t.za));const V=I[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const W=n.g;if(W){const J=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(J){var u=r.i;!u.g&&(fn(J,"spdy")||fn(J,"quic")||fn(J,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Fy(u,u.h),u.h=null))}if(r.D){const Me=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;Me&&(r.sa=Me,In(r.F,r.D,Me))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=_D(r,r.H?r.la:null,r.W),l.J){jE(r.i,l);var m=l,v=r.K;v&&m.setTimeout(v),m.B&&(Of(m),tm(m)),r.g=l}else KE(r);0<t.l.length&&Xu(t)}else"stop"!=I[0]&&"close"!=I[0]||ec(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?ec(t,7):sm(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}Tf(4)}catch(I){}}function sl(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(oy(n)||"string"==typeof n)Lg(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(oy(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function RE(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(oy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Wd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Wd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Oy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ol(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)ol(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function ol(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Je=xf.prototype).setTimeout=function(n){this.P=n},Je.gb=function(n){n=n.target;const e=this.L;e&&3==Ju(n)?e.l():this.Ia(n)},Je.Ia=function(n){try{if(n==this.g)e:{const S=Ju(this.g);var e=this.g.Da();const O=this.g.ba();if(!(3>S)&&(3!=S||Gd||this.g&&(this.h.h||this.g.ga()||$y(this.g)))){this.I||4!=S||7==e||Tf(8==e||0>=O?3:2),Of(this);var t=this.g.ba();this.N=t;t:if(PE(this)){var r=$y(this.g);n="";var o=r.length,u=4==Ju(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){il(this),Wu(this);var l="";break t}this.h.i=new it.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function DE(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cs(m)){var I=m;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,wr(12),il(this),Wu(this);break e}Zd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xy(this,t)}this.U?(XI(this,S,l),Gd&&this.i&&3==S&&(bf(this.V,this.W,"tick",this.fb),this.W.start())):(Zd(this.j,this.m,l,null),xy(this,l)),4==S&&il(this),this.i&&!this.I&&(4==S?YE(this.l,this):(this.i=!1,tm(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,wr(12)):(this.o=0,wr(13)),il(this),Wu(this)}}}catch(S){}},Je.fb=function(){if(this.g){var n=Ju(this.g),e=this.g.ga();this.C<e.length&&(Of(this),XI(this,n,e),this.i&&4!=n&&tm(this))}},Je.cancel=function(){this.I=!0,il(this)},Je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function JI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Tf(3),wr(17)),il(this),this.o=2,Wu(this)):eD(this,this.Y-n)},(Je=Wd.prototype).R=function(){Oy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Je.T=function(){return Oy(this),this.g.concat()},Je.get=function(n,e){return ol(this.h,n)?this.h[n]:e},Je.set=function(n,e){ol(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Je.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var NE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ku(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ku){this.g=void 0!==e?e:n.g,nm(this,n.j),this.s=n.s,ja(this,n.i),rm(this,n.m),this.l=n.l,e=n.h;var t=new ul;t.i=e.i,e.g&&(t.g=new Wd(e.g),t.h=e.h),Py(this,t),this.o=n.o}else n&&(t=String(n).match(NE))?(this.g=!!e,nm(this,t[1]||"",!0),this.s=Rf(t[2]||""),ja(this,t[3]||"",!0),rm(this,t[4]),this.l=Rf(t[5]||"",!0),Py(this,t[6]||"",!0),this.o=Rf(t[7]||"")):(this.g=!!e,this.h=new ul(null,this.g))}function Ba(n){return new Ku(n)}function nm(n,e,t){n.j=t?Rf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ja(n,e,t){n.i=t?Rf(e,!0):e}function rm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Py(n,e,t){e instanceof ul?(n.h=e,function aD(n,e){e&&!n.j&&(Yu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Ny(this,r),VE(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=al(e,sD)),n.h=new ul(e,n.g))}function In(n,e,t){n.h.set(e,t)}function Pf(n){return In(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Rf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function al(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,rD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function rD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ku.prototype.toString=function(){var n=[],e=this.j;e&&n.push(al(e,Ry,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(al(e,Ry,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(al(t,"/"==t.charAt(0)?iD:FE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",al(t,oD)),n.join("")};var Ry=/[#\/\?@]/g,FE=/[#\?:]/g,iD=/[#\?]/g,sD=/[#\?@]/g,oD=/#/g;function ul(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yu(n){n.g||(n.g=new Wd,n.h=0,n.i&&function tD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ny(n,e){Yu(n),e=Kd(n,e),ol(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ol((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Oy(n)))}function LE(n,e){return Yu(n),e=Kd(n,e),ol(n.g.h,e)}function VE(n,e,t){Ny(n,e),0<t.length&&(n.i=null,n.g.set(Kd(n,e),cy(t)),n.h+=t.length)}function Kd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function UE(n){this.l=n||cD,n=it.PerformanceNavigationTiming?0<(n=it.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(it.g&&it.g.Ea&&it.g.Ea()&&it.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=ul.prototype).add=function(n,e){Yu(this),this.i=null,n=Kd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){Yu(this),this.g.forEach(function(t,r){Lg(t,function(o){n.call(e,o,r,this)},this)},this)},Je.T=function(){Yu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Je.R=function(n){Yu(this);var e=[];if("string"==typeof n)LE(this,n)&&(e=nE(e,this.g.get(Kd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=nE(e,n[t])}return e},Je.set=function(n,e){return Yu(this),this.i=null,LE(this,n=Kd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var l=o;""!==r[u]&&(l+="="+encodeURIComponent(String(r[u]))),n.push(l)}}return this.i=n.join("&")};var cD=10;function BE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ky(n){return n.h?1:n.g?n.g.size:0}function im(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Fy(n,e){n.g?n.g.add(e):n.h=e}function jE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ly(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return cy(n.i)}function Vy(){}function lD(){this.g=new Vy}function dD(n,e,t){const r=t||"";try{sl(n,function(o,u){let l=o;vf(o)&&(l=Wg(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Yd(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Qd(n){this.l=n.$b||null,this.j=n.ib||!1}function Jd(n,e){vr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=By,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}UE.prototype.cancel=function(){if(this.i=Ly(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Vy.prototype.stringify=function(n){return it.JSON.stringify(n,void 0)},Vy.prototype.parse=function(n){return it.JSON.parse(n,void 0)},Rr(Qd,Yg),Qd.prototype.g=function(){return new Jd(this.l,this.j)},Qd.prototype.i=function(n){return function(){return n}}({}),Rr(Jd,vr);var By=0;function $E(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function cl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Nf(n)}function Nf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=Jd.prototype).open=function(n,e){if(this.readyState!=By)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Nf(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||it).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cl(this)),this.readyState=By},Je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Nf(this)),this.g&&(this.readyState=3,Nf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==it.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$E(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?cl(this):Nf(this),3==this.readyState&&$E(this)}},Je.Ua=function(n){this.g&&(this.response=this.responseText=n,cl(this))},Je.Ta=function(n){this.g&&(this.response=n,cl(this))},Je.ha=function(){this.g&&cl(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Jd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var HE=it.JSON.parse;function cr(n){vr.call(this),this.headers=new Wd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jy,this.K=this.L=!1}Rr(cr,vr);var jy="",hD=/^https?$/i,GE=["POST","PUT"];function fD(n){return"content-type"==n.toLowerCase()}function kf(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qE(n),Qu(n)}function qE(n){n.D||(n.D=!0,Nr(n,"complete"),Nr(n,"error"))}function ll(n){if(n.h&&void 0!==sy&&(!n.C[1]||4!=Ju(n)||2!=n.ba()))if(n.v&&4==Ju(n))Iy(n.Fa,0,n);else if(Nr(n,"readystatechange"),4==Ju(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(NE)[1]||null;if(!o&&it.self&&it.self.location){var u=it.self.location.protocol;o=u.substr(0,u.length-1)}r=!hD.test(o?o.toLowerCase():"")}t=r}if(t)Nr(n,"complete"),Nr(n,"success");else{n.m=6;try{var l=2<Ju(n)?n.g.statusText:""}catch(v){l=""}n.j=l+" ["+n.ba()+"]",qE(n)}}finally{Qu(n)}}}function Qu(n,e){if(n.g){zE(n);const t=n.g,r=n.C[0]?yf:null;n.g=null,n.C=null,e||Nr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function zE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(it.clearTimeout(n.A),n.A=null)}function Ju(n){return n.g?n.g.readyState:0}function $y(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case jy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Hy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function pD(n){let e="";return ly(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):In(n,e,t))}function Ff(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ZE(n){this.za=0,this.l=[],this.h=new pn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ff("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ff("baseRetryDelayMs",5e3,n),this.$a=Ff("retryDelaySeedMs",1e4,n),this.Ya=Ff("forwardChannelMaxRetries",2,n),this.ra=Ff("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new UE(n&&n.concurrentRequestLimit),this.Ca=new lD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function sm(n){if(om(n),3==n.G){var e=n.V++,t=Ba(n.F);In(t,"SID",n.J),In(t,"RID",e),In(t,"TYPE","terminate"),eh(n,t),(e=new xf(n,n.h,e,void 0)).K=2,e.v=Pf(Ba(t)),t=!1,it.navigator&&it.navigator.sendBeacon&&(t=it.navigator.sendBeacon(e.v.toString(),"")),!t&&it.Image&&((new Image).src=e.v,t=!0),t||(e.g=zy(e.l,null),e.g.ea(e.v)),e.F=Date.now(),tm(e)}hl(n)}function Lf(n){n.g&&(qy(n),n.g.cancel(),n.g=null)}function om(n){Lf(n),n.u&&(it.clearTimeout(n.u),n.u=null),am(n),n.i.cancel(),n.m&&("number"==typeof n.m&&it.clearTimeout(n.m),n.m=null)}function Xd(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Xu(n)}function Xu(n){BE(n.i)||n.m||(n.m=!0,qu(n.Ha,n),n.C=0)}function Gy(n,e){var t;t=e?e.m:n.V++;const r=Ba(n.F);In(r,"SID",n.J),In(r,"RID",t),In(r,"AID",n.U),eh(n,r),n.o&&n.s&&Hy(r,n.o,n.s),t=new xf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=WE(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Fy(n.i,t),em(t,r,e)}function eh(n,e){n.j&&sl({},function(t,r){In(e,r,t)})}function WE(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Kr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let I=o[v].h;const S=o[v].g;if(I-=u,0>I)u=Math.max(0,o[v].h-100),m=!1;else try{dD(S,l,"req"+I+"_")}catch(O){r&&r(S)}}if(m){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function KE(n){n.g||n.u||(n.Y=1,qu(n.Ga,n),n.A=0)}function Vf(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Af(Kr(n.Ga,n),dl(n,n.A)),n.A++,0))}function qy(n){null!=n.B&&(it.clearTimeout(n.B),n.B=null)}function mD(n){n.g=new xf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ba(n.oa);In(e,"RID","rpc"),In(e,"SID",n.J),In(e,"CI",n.N?"0":"1"),In(e,"AID",n.U),eh(n,e),In(e,"TYPE","xmlhttp"),n.o&&n.s&&Hy(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Pf(Ba(e)),t.s=null,t.U=!0,OE(t,n)}function am(n){null!=n.v&&(it.clearTimeout(n.v),n.v=null)}function YE(n,e){var t=null;if(n.g==e){am(n),qy(n),n.g=null;var r=2}else{if(!im(n.i,e))return;t=e.D,jE(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Nr(r=Df(),new ME(r,t,e,o)),Xu(n)}else KE(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function gD(n,e){return!(ky(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Af(Kr(n.Ha,n,e),dl(n,n.C)),n.C++,0)))}(n,e)||2==r&&Vf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:ec(n,5);break;case 4:ec(n,10);break;case 3:ec(n,6);break;default:ec(n,2)}}function dl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ec(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Kr(n.jb,n);t||(t=new Ku("//www.google.com/images/cleardot.gif"),it.location&&"http"==it.location.protocol||nm(t,"https"),Pf(t)),function Uy(n,e){const t=new pn;if(it.Image){const r=new Image;r.onload=Fg(Yd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Fg(Yd,t,r,"TestLoadImage: error",!1,e),r.onabort=Fg(Yd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fg(Yd,t,r,"TestLoadImage: timeout",!1,e),it.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else wr(2);n.G=0,n.j&&n.j.va(e),hl(n),om(n)}function hl(n){n.G=0,n.I=-1,n.j&&((0!=Ly(n.i).length||0!=n.l.length)&&(n.i.i.length=0,cy(n.l),n.l.length=0),n.j.ua())}function _D(n,e,t){let r=function nD(n){return n instanceof Ku?Ba(n):new Ku(n,void 0)}(t);if(""!=r.i)e&&ja(r,e+"."+r.i),rm(r,r.m);else{const o=it.location;r=function kE(n,e,t,r){var o=new Ku(null,void 0);return n&&nm(o,n),e&&ja(o,e),t&&rm(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&ly(n.aa,function(o,u){In(r,u,o)}),t=n.sa,(e=n.D)&&t&&In(r,e,t),In(r,"VER",n.ma),eh(n,r),r}function zy(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Ba&&!n.qa?new Qd({ib:!0}):n.qa)).L=n.H,e}function QE(){}function Zy(){if(tl&&!(10<=Number(dE)))throw Error("Environmental error: no available transport.")}function es(n,e){vr.call(this),this.g=new ZE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Cs(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cs(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new tc(this)}function yD(n){nl.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Wy(){rl.call(this),this.status=1}function tc(n){this.g=n}(Je=cr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Sy.g(),this.C=function Ty(n){return n.h||(n.h=n.i())}(this.u?this.u:Sy),this.g.onreadystatechange=Kr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void kf(this,u)}n=t||"";const o=new Wd(this.headers);r&&sl(r,function(u,l){o.set(l,u)}),r=function ea(n){e:{var e=fD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=it.FormData&&n instanceof it.FormData,!(0<=uy(GE,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,l){this.g.setRequestHeader(l,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zE(this),0<this.B&&((this.K=function qS(n){return tl&&function lE(){return function oE(n){var e=cE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Js(String(qd)).split("."),t=Js("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Vg(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Vg(0==o[2].length,0==u[2].length)||Vg(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kr(this.pa,this)):this.A=Iy(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){kf(this,u)}},Je.pa=function(){void 0!==sy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nr(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Nr(this,"complete"),Nr(this,"abort"),Qu(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qu(this,!0)),cr.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?ll(this):this.cb())},Je.cb=function(){ll(this)},Je.ba=function(){try{return 2<Ju(this)?this.g.status:-1}catch(n){return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),HE(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=ZE.prototype).ma=8,Je.G=1,Je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new xf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=sE(u),Hd(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=WE(this,o,e),In(t=Ba(this.F),"RID",n),In(t,"CVER",22),this.D&&In(t,"X-HTTP-Session-Id",this.D),eh(this,t),this.o&&u&&Hy(t,this.o,u),Fy(this.i,o),this.Ra&&In(t,"TYPE","init"),this.ja?(In(t,"$req",e),In(t,"SID","null"),o.$=!0,em(o,t,null)):em(o,t,e),this.G=2}}else 3==this.G&&(n?Gy(this,n):0==this.l.length||BE(this.i)||Gy(this))},Je.Ga=function(){if(this.u=null,mD(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Af(Kr(this.bb,this),n)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,wr(10),Lf(this),mD(this))},Je.ab=function(){null!=this.v&&(this.v=null,Lf(this),Vf(this),wr(19))},Je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),wr(2)):(this.h.info("Failed to ping google.com"),wr(1))},(Je=QE.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},Zy.prototype.g=function(n,e){return new es(n,e)},Rr(es,vr),es.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),qu(Kr(n.hb,n,e))),wr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=_D(n,null,n.W),Xu(n)},es.prototype.close=function(){sm(this.g)},es.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Xd(this.g,e)}else this.v?((e={}).__data__=Wg(n),Xd(this.g,e)):Xd(this.g,n)},es.prototype.M=function(){this.g.j=null,delete this.j,sm(this.g),delete this.g,es.Z.M.call(this)},Rr(yD,nl),Rr(Wy,rl),Rr(tc,QE),tc.prototype.xa=function(){Nr(this.g,"a")},tc.prototype.wa=function(n){Nr(this.g,new yD(n))},tc.prototype.va=function(n){Nr(this.g,new Wy(n))},tc.prototype.ua=function(){Nr(this.g,"b")},Zy.prototype.createWebChannel=Zy.prototype.g,es.prototype.send=es.prototype.u,es.prototype.open=es.prototype.m,es.prototype.close=es.prototype.close,Kg.NO_ERROR=0,Kg.TIMEOUT=8,Kg.HTTP_ERROR=6,Sf.COMPLETE="complete",Ay.EventType=Mf,Mf.OPEN="a",Mf.CLOSE="b",Mf.ERROR="c",Mf.MESSAGE="d",vr.prototype.listen=vr.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.La,cr.prototype.getLastErrorCode=cr.prototype.Da,cr.prototype.getStatus=cr.prototype.ba,cr.prototype.getResponseJson=cr.prototype.Qa,cr.prototype.getResponseText=cr.prototype.ga,cr.prototype.send=cr.prototype.ea;var vD=Ua.createWebChannelTransport=function(){return new Zy},JE=Ua.getStatEventTarget=function(){return Df()},Ky=Ua.ErrorCode=Kg,wD=Ua.EventType=Sf,ED=Ua.Event=Zu,XE=Ua.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},CD=Ua.FetchXmlHttpFactory=Qd,um=Ua.WebChannel=Ay,bD=Ua.XhrIo=cr;const eC="@firebase/firestore";class Zn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");let fl="9.9.2";const $a=new Va.Yd("@firebase/firestore");function cm(){return $a.logLevel}function Re(n,...e){if($a.logLevel<=Va.in.DEBUG){const t=e.map(Yy);$a.debug(`Firestore (${fl}): ${n}`,...t)}}function tr(n,...e){if($a.logLevel<=Va.in.ERROR){const t=e.map(Yy);$a.error(`Firestore (${fl}): ${n}`,...t)}}function pl(n,...e){if($a.logLevel<=Va.in.WARN){const t=e.map(Yy);$a.warn(`Firestore (${fl}): ${n}`,...t)}}function Yy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${fl}) INTERNAL ASSERTION FAILED: `+n;throw tr(e),new Error(e)}function At(n,e){n||et()}function Ze(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends It.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class To{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zn.UNAUTHENTICATED))}shutdown(){}}class Qy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Uf{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=I=>this.i!==o?(o=this.i,t(I)):Promise.resolve();let l=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new lr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const I=l;e.enqueueRetryable((0,me.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},v=I=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(I=>v(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?v(I):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new To(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new Zn(e)}}class TD{constructor(e,t,r){this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class AD{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new TD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Zn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lm{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.p;return this.p=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.p=t.token,new nC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function SD(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class rC{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=SD(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function gl(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function dm(n){return n+"\0"}class gn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gn.fromMillis(Date.now())}static fromDate(e){return gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new gn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new gn(0,0))}static max(){return new Dt(new gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bf{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Bf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends Bf{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const Xy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends Bf{construct(e,t,r){return new Dn(e,t,r)}static isValidIdentifier(e){return Xy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new xe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new xe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dn(t)}static emptyPath(){return new Dn([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Zt.fromString(e))}static fromName(e){return new Ge(Zt.fromString(e).popFirst(5))}static empty(){return new Ge(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Zt(e.slice()))}}class th{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function jf(n){return n.fields.find(e=>2===e.kind)}function ml(n){return n.fields.filter(e=>2!==e.kind)}th.UNKNOWN_ID=-1;class hm{constructor(e,t){this.fieldPath=e,this.kind=t}}class nh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nh(0,bs.min())}}function fm(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Dt.fromTimestamp(1e9===r?new gn(t+1,0):new gn(t,r));return new bs(o,Ge.empty(),e)}function ev(n){return new bs(n.readTime,n.key,-1)}class bs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bs(Dt.min(),Ge.empty(),-1)}static max(){return new bs(Dt.max(),Ge.empty(),-1)}}function pm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}const tv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ha(n){return gm.apply(this,arguments)}function gm(){return gm=(0,me.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==tv)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),gm.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},v=>r(v))}),l=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let v=0;v<u;v++){const I=v;t(e[I]).next(S=>{l[I]=S,++m,m===u&&r(l)},S=>o(S))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class $f{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new lr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new ta(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const o=nv(r.target.error);this.T.reject(new ta(e,o))}}static open(e,t,r,o){try{return new $f(t,e.transaction(o,r))}catch(u){throw new ta(t,u)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new OD(t)}}class Ao{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Ao.v((0,It.z$)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),rh(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,It.hl)())return!1;if(Ao.S())return!0;const e=(0,It.z$)(),t=Ao.v(e),r=0<t&&t<10,o=Ao.D(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,me.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new ta(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new xe(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new ta(e,m))},u.onupgradeneeded=l=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.P.M(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=r=>t.O(r)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,me.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.k(e);const v=$f.open(u.db,e,l?"readonly":"readwrite",r),I=o(v).next(S=>(v.R(),S)).catch(S=>(v.abort(S),se.reject(S))).toPromise();return I.catch(()=>{}),yield v.A,I}catch(v){const I=v,S="FirebaseError"!==I.name&&m<3;if(Re("SimpleDb","Transaction failed with error:",I.message,"Retrying:",S),u.close(),!S)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ai{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return rh(this.$.delete())}}class ta extends xe{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nc(n){return"IndexedDbTransactionError"===n.name}class OD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rh(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),rh(this.store.add(e))}get(e){return rh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),rh(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),rh(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.G(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}W(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const o=this.cursor(r);return this.G(o,(u,l,m)=>m.delete())}J(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.G(o,t)}Y(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const l=nv(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}G(e,t){const r=[];return new se((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const v=new Ai(m),I=t(m.primaryKey,m.value,v);if(I instanceof se){const S=I.catch(O=>(v.done(),se.reject(O)));r.push(S)}v.isDone?o():null===v.U?m.continue():m.continue(v.U)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rh(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=nv(r.target.error);t(o)}})}let ih=!1;function nv(n){const e=Ao.v((0,It.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ih||(ih=!0,setTimeout(()=>{throw r},0)),r}}return n}class rv{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Re("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){nc(r)?Re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ha(r)}yield t.Z(1)}))}}class PD{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Re("IndexBackiller",`Processing collection: ${l}`),this.nt(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.st(o,u)).next(m=>(Re("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}st(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=ev(u);pm(l,r)>0&&(r=l)}),new bs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Si{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function sC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _l(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Si.ot=-1;class Ln{constructor(e,t){this.comparator=e,this.root=t||dr.EMPTY}insert(e,t){return new Ln(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dr.BLACK,null,null))}remove(e){return new Ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hf(this.root,e,this.comparator,!0)}}class Hf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:dr.RED,this.left=null!=o?o:dr.EMPTY,this.right=null!=u?u:dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new dr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return dr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}dr.EMPTY=null,dr.RED=!0,dr.BLACK=!1,dr.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,o){return this}insert(n,e,t){return new dr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rn{constructor(e){this.comparator=e,this.data=new Ln(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new RD(this.data.getIterator())}getIteratorFrom(e){return new RD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rn(this.comparator);return t.data=e,t}}class RD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yl(n){return n.hasNext()?n.getNext():void 0}class Is{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new Is([])}unionWith(e){let t=new rn(Dn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Is(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Wn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wn.EMPTY_BYTE_STRING=new Wn("");const aC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rc(n){if(At(!!n),"string"==typeof n){let e=0;const t=aC.exec(n);if(At(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tn(n.seconds),nanos:Tn(n.nanos)}}function Tn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ga(n){return"string"==typeof n?Wn.fromBase64String(n):Wn.fromUint8Array(n)}function uC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function cC(n){const e=n.mapValue.fields.__previous_value__;return uC(e)?cC(e):e}function Gf(n){const e=rc(n.mapValue.fields.__local_write_time__.timestampValue);return new gn(e.seconds,e.nanos)}class lC{constructor(e,t,r,o,u,l,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class na{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new na("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof na&&e.projectId===this.projectId&&e.database===this.database}}function qf(n){return null==n}function sh(n){return 0===n&&1/n==-1/0}function iv(n){return"number"==typeof n&&Number.isInteger(n)&&!sh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_m={nullValue:"NULL_VALUE"};function sc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uC(n)?4:FD(n)?9007199254740991:10:et()}function ra(n,e){if(n===e)return!0;const t=sc(n);if(t!==sc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gf(n).isEqual(Gf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=rc(r.timestampValue),l=rc(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ga(n.bytesValue).isEqual(Ga(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Tn(r.geoPointValue.latitude)===Tn(o.geoPointValue.latitude)&&Tn(r.geoPointValue.longitude)===Tn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Tn(r.integerValue)===Tn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Tn(r.doubleValue),l=Tn(o.doubleValue);return u===l?sh(u)===sh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return gl(n.arrayValue.values||[],e.arrayValue.values||[],ra);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(sC(u)!==sC(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!ra(u[m],l[m])))return!1;return!0}(n,e);default:return et()}var o}function oh(n,e){return void 0!==(n.values||[]).find(t=>ra(t,e))}function qa(n,e){if(n===e)return 0;const t=sc(n),r=sc(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=Tn(o.integerValue||o.doubleValue),m=Tn(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return sv(n.timestampValue,e.timestampValue);case 4:return sv(Gf(n),Gf(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Ga(o),m=Ga(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let v=0;v<l.length&&v<m.length;v++){const I=Mt(l[v],m[v]);if(0!==I)return I}return Mt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Mt(Tn(o.latitude),Tn(u.latitude));return 0!==l?l:Mt(Tn(o.longitude),Tn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let v=0;v<l.length&&v<m.length;++v){const I=qa(l[v],m[v]);if(I)return I}return Mt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===ic.mapValue&&u===ic.mapValue)return 0;if(o===ic.mapValue)return 1;if(u===ic.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),v=u.fields||{},I=Object.keys(v);m.sort(),I.sort();for(let S=0;S<m.length&&S<I.length;++S){const O=Mt(m[S],I[S]);if(0!==O)return O;const V=qa(l[m[S]],v[I[S]]);if(0!==V)return V}return Mt(m.length,I.length)}(n.mapValue,e.mapValue);default:throw et()}}function sv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=rc(n),r=rc(e),o=Mt(t.seconds,r.seconds);return 0!==o?o:Mt(t.nanos,r.nanos)}function vl(n){return ov(n)}function ov(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=rc(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ga(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=ov(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${ov(r.fields[m])}`;return u+"}"}(n.mapValue):et();var e}function wl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dC(n){return!!n&&"integerValue"in n}function ah(n){return!!n&&"arrayValue"in n}function ND(n){return!!n&&"nullValue"in n}function kD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function av(n){return!!n&&"mapValue"in n}function ym(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _l(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ym(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ym(n.arrayValue.values[t]);return e}return Object.assign({},n)}function FD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function zS(n){return"nullValue"in n?_m:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wl(na.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function ZS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wl(na.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ic:et()}function LD(n,e){const t=qa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function zf(n,e){const t=qa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!av(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ym(t)}setAll(e){let t=Dn.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=ym(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());av(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];av(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){_l(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new li(ym(this.value))}}function uv(n){const e=[];return _l(n.fields,(t,r)=>{const o=new Dn([t]);if(av(r)){const u=uv(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new Is(e)}class on{constructor(e,t,r,o,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=l}static newInvalidDocument(e){return new on(e,0,Dt.min(),Dt.min(),li.empty(),0)}static newFoundDocument(e,t,r){return new on(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new on(e,2,t,Dt.min(),li.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Dt.min(),li.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hC{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.ut=null}}function cv(n,e=null,t=[],r=[],o=null,u=null,l=null){return new hC(n,e,t,r,o,u,l)}function uh(n){const e=Ze(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+vl(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vl(r)).join(",")),e.ut=t}return e.ut}function ch(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!hv(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ra(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Xs(n.startAt,e.startAt)&&Xs(n.endAt,e.endAt)}function vm(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Zf(n,e){return n.filters.filter(t=>t instanceof Yr&&t.field.isEqual(e))}function VD(n,e,t){let r=_m,o=!0;for(const u of Zf(n,e)){let l=_m,m=!0;switch(u.op){case"<":case"<=":l=zS(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=_m}LD({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];LD({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function fC(n,e,t){let r=ic,o=!0;for(const u of Zf(n,e)){let l=ic,m=!0;switch(u.op){case">=":case">":l=ZS(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=ic}zf({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];zf({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Yr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new dv(e,t,r):"array-contains"===t?new KS(e,r):"in"===t?new jD(e,r):"not-in"===t?new $D(e,r):"array-contains-any"===t?new HD(e,r):new Yr(e,t,r)}static ct(e,t,r){return"in"===t?new UD(e,r):new WS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(qa(t,this.value)):null!==t&&sc(this.value)===sc(t)&&this.at(qa(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class dv extends Yr{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.at(t)}}class UD extends Yr{constructor(e,t){super(e,"in",t),this.keys=BD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class WS extends Yr{constructor(e,t){super(e,"not-in",t),this.keys=BD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class KS extends Yr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ah(t)&&oh(t.arrayValue,this.value)}}class jD extends Yr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&oh(this.value.arrayValue,t)}}class $D extends Yr{constructor(e,t){super(e,"not-in",t)}matches(e){if(oh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!oh(this.value.arrayValue,t)}}class HD extends Yr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ah(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>oh(this.value.arrayValue,r))}}class El{constructor(e,t){this.position=e,this.inclusive=t}}class lh{constructor(e,t="asc"){this.field=e,this.dir=t}}function hv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function pC(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(l.referenceValue),t.key):qa(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Xs(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ra(n.position[t],e.position[t]))return!1;return!0}class za{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=v,this.lt=null,this.ft=null}}function wm(n,e,t,r,o,u,l,m){return new za(n,e,t,r,o,u,l,m)}function dh(n){return new za(n)}function gC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Wf(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Em(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Cm(n){return null!==n.collectionGroup}function hh(n){const e=Ze(n);if(null===e.lt){e.lt=[];const t=Em(e),r=Wf(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new lh(t)),e.lt.push(new lh(Dn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.lt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new lh(Dn.keyField(),u))}}}return e.lt}function Mi(n){const e=Ze(n);if(!e.ft)if("F"===e.limitType)e.ft=cv(e.path,e.collectionGroup,hh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of hh(e))t.push(new lh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new El(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new El(e.startAt.position,e.startAt.inclusive):null;e.ft=cv(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.ft}function bm(n,e,t){return new za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kf(n,e){return ch(Mi(n),Mi(e))&&n.limitType===e.limitType}function mC(n){return`${uh(Mi(n))}|lt:${n.limitType}`}function Yf(n){return`Query(target=${function lv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${vl(r.value)}`;var r}).join(", ")}]`),qf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>vl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>vl(t)).join(",")),`Target(${e})`}(Mi(n))}; limitType=${n.limitType})`}function Za(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ge.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=pC(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,hh(t),r)||t.endAt&&!function(o,u,l){const m=pC(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,hh(t),r)));var t,r}function fv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pv(n){return(e,t)=>{let r=!1;for(const o of hh(n)){const u=GD(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function GD(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),v=l.data.field(o);return null!==m&&null!==v?qa(m,v):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function qD(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sh(e)?"-0":e}}function _C(n){return{integerValue:""+n}}function yC(n,e){return iv(e)?_C(e):qD(n,e)}class Im{constructor(){this._=void 0}}function vC(n,e,t){return n instanceof Qf?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Wa?gv(n,e):n instanceof Cl?EC(n,e):function(r,o){const u=wC(r,o),l=Dm(u)+Dm(r._t);return dC(u)&&dC(r._t)?_C(l):qD(r.wt,l)}(n,e)}function zD(n,e,t){return n instanceof Wa?gv(n,e):n instanceof Cl?EC(n,e):t}function wC(n,e){return n instanceof bl?dC(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Qf extends Im{}class Wa extends Im{constructor(e){super(),this.elements=e}}function gv(n,e){const t=Tm(e);for(const r of n.elements)t.some(o=>ra(o,r))||t.push(r);return{arrayValue:{values:t}}}class Cl extends Im{constructor(e){super(),this.elements=e}}function EC(n,e){let t=Tm(e);for(const r of n.elements)t=t.filter(o=>!ra(o,r));return{arrayValue:{values:t}}}class bl extends Im{constructor(e,t){super(),this.wt=e,this._t=t}}function Dm(n){return Tn(n.integerValue||n.doubleValue)}function Tm(n){return ah(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fh{constructor(e,t){this.field=e,this.transform=t}}class CC{constructor(e,t){this.version=e,this.transformResults=t}}class An{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Am(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Sm{}function WD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Jf(n.key,An.none()):new gh(n.key,n.data,An.none());{const t=n.data,r=li.empty();let o=new rn(Dn.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new oc(n.key,r,new Is(o.toArray()),An.none())}}function YS(n,e,t){n instanceof gh?function(r,o,u){const l=r.value.clone(),m=QD(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof oc?function(r,o,u){if(!Am(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=QD(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(YD(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ph(n,e,t,r){return n instanceof gh?function(o,u,l,m){if(!Am(o.precondition,u))return l;const v=o.value.clone(),I=JD(o.fieldTransforms,m,u);return v.setAll(I),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof oc?function(o,u,l,m){if(!Am(o.precondition,u))return l;const v=JD(o.fieldTransforms,m,u),I=u.data;return I.setAll(YD(o)),I.setAll(v),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,Am(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function KD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=wC(r.transform,o||null);null!=u&&(null===t&&(t=li.empty()),t.set(r.field,u))}return t||null}function bC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&gl(t,r,(o,u)=>function ZD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Wa&&r instanceof Wa||t instanceof Cl&&r instanceof Cl?gl(t.elements,r.elements,ra):t instanceof bl&&r instanceof bl?ra(t._t,r._t):t instanceof Qf&&r instanceof Qf);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class gh extends Sm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class oc extends Sm{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function YD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function QD(n,e,t){const r=new Map;At(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,zD(l,m,t[o]))}return r}function JD(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,vC(u,l,e))}return r}class Jf extends Sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mv extends Sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Mm{constructor(e){this.count=e}}var hr,Gt;function _v(n){switch(n){default:return et();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function ac(n){if(void 0===n)return tr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case hr.OK:return ce.OK;case hr.CANCELLED:return ce.CANCELLED;case hr.UNKNOWN:return ce.UNKNOWN;case hr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case hr.INTERNAL:return ce.INTERNAL;case hr.UNAVAILABLE:return ce.UNAVAILABLE;case hr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case hr.NOT_FOUND:return ce.NOT_FOUND;case hr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case hr.ABORTED:return ce.ABORTED;case hr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case hr.DATA_LOSS:return ce.DATA_LOSS;default:return et()}}(Gt=hr||(hr={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";class Ka{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_l(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return mm(this.inner)}size(){return this.innerSize}}const yv=new Ln(Ge.comparator);function di(){return yv}const IC=new Ln(Ge.comparator);function Il(...n){let e=IC;for(const t of n)e=e.insert(t.key,t);return e}function xm(n){let e=IC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ds(){return Om()}function XD(){return Om()}function Om(){return new Ka(n=>n.toString(),(n,e)=>n.isEqual(e))}const QS=new Ln(Ge.comparator),JS=new rn(Ge.comparator);function Ot(...n){let e=JS;for(const t of n)e=e.add(t);return e}const eT=new rn(Mt);function Pm(){return eT}class Xf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ep.createSynthesizedTargetChangeForCurrentChange(e,t)),new Xf(Dt.min(),r,Pm(),di(),Ot())}}class ep{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ep(Wn.EMPTY_BYTE_STRING,t,Ot(),Ot(),Ot())}}class tp{constructor(e,t,r,o){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=o}}class vv{constructor(e,t){this.targetId=e,this.It=t}}class wv{constructor(e,t,r=Wn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class DC{constructor(){this.Tt=0,this.Et=Rm(),this.At=Wn.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Ot(),t=Ot(),r=Ot();return this.Et.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:et()}}),new ep(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=Rm()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class tT{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=di(),this.Bt=Ev(),this.Lt=new rn(Mt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,o)=>{this.jt(o)&&t(o)})}zt(e){const t=e.targetId,r=e.It.count,o=this.Ht(t);if(o){const u=o.target;if(vm(u))if(0===r){const l=new Ge(u.path);this.Kt(t,l,on.newNoDocument(l,Dt.min()))}else At(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((u,l)=>{const m=this.Ht(l);if(m){if(u.current&&vm(m.target)){const v=new Ge(m.target.path);null!==this.$t.get(v)||this.Xt(l,v)||this.Kt(l,v,on.newNoDocument(v,e))}u.vt&&(t.set(l,u.St()),u.Dt())}});let r=Ot();this.Bt.forEach((u,l)=>{let m=!0;l.forEachWhile(v=>{const I=this.Ht(v);return!I||2===I.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.$t.forEach((u,l)=>l.setReadTime(e));const o=new Xf(e,t,this.Lt,this.$t,r);return this.$t=di(),this.Bt=Ev(),this.Lt=new rn(Mt),o}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const o=this.Qt(e);this.Xt(e,t)?o.Ct(t,1):o.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new DC,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new rn(Mt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new DC),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function Ev(){return new Ln(Ge.comparator)}function Rm(){return new Ln(Ge.comparator)}const XS={asc:"ASCENDING",desc:"DESCENDING"},TC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Cv{constructor(e,t){this.databaseId=e,this.dt=t}}function np(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AC(n,e){return n.dt?e.toBase64():e.toUint8Array()}function eM(n,e){return np(n,e.toTimestamp())}function Qr(n){return At(!!n),Dt.fromTimestamp(function(e){const t=rc(e);return new gn(t.seconds,t.nanos)}(n))}function bv(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function SC(n){const e=Zt.fromString(n);return At(Le(e)),e}function Nm(n,e){return bv(n.databaseId,e.path)}function Ya(n,e){const t=SC(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(xC(t))}function MC(n,e){return bv(n.databaseId,e)}function nT(n){const e=SC(n);return 4===e.length?Zt.emptyPath():xC(e)}function km(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xC(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function rT(n,e,t){return{name:Nm(n,e),fields:t.value.mapValue.fields}}function iT(n,e,t){const r=Ya(n,e.name),o=Qr(e.updateTime),u=new li({mapValue:{fields:e.fields}}),l=on.newFoundDocument(r,o,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function i(n,e){let t;if(e instanceof gh)t={update:rT(n,e.key,e.value)};else if(e instanceof Jf)t={delete:Nm(n,e.key)};else if(e instanceof oc)t={update:rT(n,e.key,e.data),updateMask:ye(e.fieldMask)};else{if(!(e instanceof mv))return et();t={verify:Nm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Qf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wa)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Cl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof bl)return{fieldPath:u.field.canonicalString(),increment:l._t};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:eM(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:et()),t;var o}function s(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?An.updateTime(Qr(o.updateTime)):void 0!==o.exists?An.exists(o.exists):An.none():An.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(At("REQUEST_TIME"===l.setToServerValue),m=new Qf):"appendMissingElements"in l?m=new Wa(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Cl(l.removeAllFromArray.values||[]):"increment"in l?m=new bl(u,l.increment):et();const v=Dn.fromServerFormat(l.fieldPath);return new fh(v,m)}(n,o)):[];var o;if(e.update){const o=Ya(n,e.update.name),u=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Is((e.updateMask.fieldPaths||[]).map(I=>Dn.fromServerFormat(I)));return new oc(o,u,l,t,r)}return new gh(o,u,t,r)}if(e.delete){const o=Ya(n,e.delete);return new Jf(o,t)}if(e.verify){const o=Ya(n,e.verify);return new mv(o,t)}return et()}function c(n,e){return{documents:[MC(n,e.path)]}}function h(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=MC(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=MC(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0===v.length)return;const I=v.map(S=>function(O){if("=="===O.op){if(kD(O.value))return{unaryFilter:{field:M(O.field),op:"IS_NAN"}};if(ND(O.value))return{unaryFilter:{field:M(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(kD(O.value))return{unaryFilter:{field:M(O.field),op:"IS_NOT_NAN"}};if(ND(O.value))return{unaryFilter:{field:M(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:M(O.field),op:A(O.op),value:O.value}}}(S));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(I=>{return{field:M((S=I).field),direction:b(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(I=e.limit,n.dt||qf(I)?I:{value:I});var I,m,v;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function g(n){let e=nT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){At(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=E(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new lh(k((O=S).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let m=null;t.limit&&(m=function(S){let O;return O="object"==typeof S?S.value:S,qf(O)?null:O}(t.limit));let v=null;var S;t.startAt&&(v=new El((S=t.startAt).values||[],!!S.before));let I=null;return t.endAt&&(I=function(S){return new El(S.values||[],!S.before)}(t.endAt)),wm(e,o,l,u,m,"F",v,I)}function E(n){return n?void 0!==n.unaryFilter?[Q(n)]:void 0!==n.fieldFilter?[$(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>E(e)).reduce((e,t)=>e.concat(t)):et():[]}function b(n){return XS[n]}function A(n){return TC[n]}function M(n){return{fieldPath:n.canonicalString()}}function k(n){return Dn.fromServerFormat(n.fieldPath)}function $(n){return Yr.create(k(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function Q(n){switch(n.unaryFilter.op){case"IS_NAN":const e=k(n.unaryFilter.field);return Yr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=k(n.unaryFilter.field);return Yr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=k(n.unaryFilter.field);return Yr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=k(n.unaryFilter.field);return Yr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function ye(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Le(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ke(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=De(e)),e=Xe(n.get(t),e);return De(e)}function Xe(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function De(n){return n+"\x01\x01"}function tt(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&et(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let v;0===o.length?v=m:(o+=m,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:et()}u=l+2}return new Zt(r)}const Ut=["userId","batchId"];function Wt(n,e){return[n,ke(e)]}function ts(n,e,t){return[n,ke(e),t]}const Dl={},Iv=["prefixPath","collectionGroup","readTime","documentId"],Dv=["prefixPath","collectionGroup","documentId"],Tv=["collectionGroup","readTime","prefixPath","documentId"],Av=["canonicalId","targetId"],Sv=["targetId","path"],Mv=["path","targetId"],xv=["collectionId","parent"],Ov=["indexId","uid"],Pv=["uid","sequenceNumber"],AP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],SP=["indexId","uid","orderedDocumentKey"],MP=["userId","collectionPath","documentId"],xP=["userId","collectionPath","largestBatchId"],OP=["userId","collectionGroup","largestBatchId"],rM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PP=[...rM,"documentOverlays"],iM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sM=iM,RP=[...sM,"indexConfiguration","indexState","indexEntries"];class sT extends iC{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function hi(n,e){const t=Ze(n);return Ao.N(t.ee,e)}class oT{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&YS(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ph(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ph(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XD();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const v=WD(l,m);null!==v&&r.set(o.key,v),l.isValidDocument()||l.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ot())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,(t,r)=>bC(t,r))&&gl(this.baseMutations,e.baseMutations,(t,r)=>bC(t,r))}}class aT{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){At(e.mutations.length===r.length);let o=QS;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new aT(e,t,r,o)}}class uT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mh{constructor(e,t,r,o,u=Dt.min(),l=Dt.min(),m=Wn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new mh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new mh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class oM{constructor(e){this.ne=e}}function aM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:OC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Nm(o=n.ne,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:np(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:rp(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:rp(e.version)}}var o,u;return r}function OC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function rp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ip(n){const e=new gn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function sp(n,e){const t=(e.baseMutations||[]).map(u=>s(n.ne,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>s(n.ne,u)),o=gn.fromMillis(e.localWriteTimeMs);return new oT(e.batchId,o,t,r)}function Rv(n){const e=ip(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ip(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var o;return void 0!==n.query.documents?(At(1===(o=n.query).documents.length),r=Mi(dh(nT(o.documents[0])))):r=Mi(g(n.query)),new mh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Wn.fromBase64String(n.resumeToken))}function uM(n,e){const t=rp(e.snapshotVersion),r=rp(e.lastLimboFreeSnapshotVersion);let o;o=vm(e.target)?c(n.ne,e.target):h(n.ne,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uh(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function cT(n){const e=g({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bm(e,e.limit,"L"):e}function lT(n,e){return new uT(e.largestBatchId,s(n.ne,e.overlayMutation))}function cM(n,e){const t=e.path.lastSegment();return[n,ke(e.path.popLast()),t]}function lM(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:rp(r.readTime),documentKey:ke(r.documentKey.path),largestBatchId:r.largestBatchId}}class kP{getBundleMetadata(e,t){return dM(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:ip(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return dM(e).put({bundleId:(r=t).id,createTime:rp(Qr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return hM(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:cT(o.bundledQuery),readTime:ip(o.readTime)};var o})}saveNamedQuery(e,t){return hM(e).put({name:(r=t).name,readTime:rp(Qr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function dM(n){return hi(n,"bundles")}function hM(n){return hi(n,"namedQueries")}class PC{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new PC(e,t.uid||"")}getOverlay(e,t){return Nv(e).get(cM(this.userId,t)).next(r=>r?lT(this.wt,r):null)}getOverlays(e,t){const r=Ds();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new uT(t,l);o.push(this.ie(e,m))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(ke(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Nv(e).W("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ds(),u=ke(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Nv(e).K("collectionPathOverlayIndex",l).next(m=>{for(const v of m){const I=lT(this.wt,v);o.set(I.getKey(),I)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Ds();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Nv(e).J({index:"collectionGroupOverlayIndex",range:m},(v,I,S)=>{const O=lT(this.wt,I);u.size()<o||O.largestBatchId===l?(u.set(O.getKey(),O),l=O.largestBatchId):S.done()}).next(()=>u)}ie(e,t){return Nv(e).put(function(r,o,u){const[l,m,v]=cM(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:i(r.ne,u.mutation)}}(this.wt,this.userId,t))}}function Nv(n){return hi(n,"documentOverlays")}class op{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Tn(e.integerValue));else if("doubleValue"in e){const r=Tn(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),sh(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Ga(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?FD(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):et()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const o of Object.keys(r))this.le(o,t),this.oe(r[o],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const o of r)this.oe(o,t)}_e(e,t){this.ce(t,37),Ge.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function FP(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function fM(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=FP(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}op.ye=new op;class LP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const o=t.codePointAt(0);this.Ie(240|o>>>18),this.Ie(128|63&o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}ve(e){const t=this.Ve(e),r=fM(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}De(e){const t=this.Ve(e),r=fM(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class VP{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class UP{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class kv{constructor(){this.Oe=new LP,this.Fe=new VP(this.Oe),this.$e=new UP(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class ap{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ap(this.indexId,this.documentKey,this.arrayValue,r)}}function up(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=pM(n.arrayValue,e.arrayValue),0!==t?t:(t=pM(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function pM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class BP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=jf(e);if(void 0!==t&&!this.Qe(t))return!1;const r=ml(e);let o=0,u=0;for(;o<r.length&&this.Qe(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Ke){const l=r[o];if(!this.je(this.Ke,l)||!this.We(this.Ue[u++],l))return!1;++o}for(;o<r.length;++o){const l=r[o];if(u>=this.Ue.length||!this.We(this.Ue[u++],l))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class jP{constructor(){this.ze=new dT}addToCollectionParentIndex(e,t){return this.ze.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(bs.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class dT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new rn(Zt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new rn(Zt.comparator)).toArray()}}const RC=new Uint8Array(0);class $P{constructor(e,t){this.user=e,this.databaseId=t,this.He=new dT,this.Je=new Ka(r=>uh(r),(r,o)=>ch(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const u={collectionId:r,parent:ke(o)};return gM(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[dm(t),""],!1,!0);return gM(e).K(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(tt(l.parent))}return r})}addFieldIndex(e,t){const r=NC(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=Lv(e);return u.next(m=>{l.put(lM(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=NC(e),o=Lv(e),u=Fv(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Fv(e);let o=!0;const u=new Map;return se.forEach(this.Ye(t),l=>this.Xe(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=Ot();const m=[];return se.forEach(u,(v,I)=>{var S;Re("IndexedDbIndexManager",`Using index ${S=v,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(gt=>`${gt.fieldPath}:${gt.kind}`).join(",")}`} to execute ${uh(t)}`);const O=function(gt,st){const Ct=jf(st);if(void 0===Ct)return null;for(const Pt of Zf(gt,Ct.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(I,v),V=function(gt,st){const Ct=new Map;for(const Pt of ml(st))for(const nr of Zf(gt,Pt.fieldPath))switch(nr.op){case"==":case"in":Ct.set(Pt.fieldPath.canonicalString(),nr.value);break;case"not-in":case"!=":return Ct.set(Pt.fieldPath.canonicalString(),nr.value),Array.from(Ct.values())}return null}(I,v),W=function(gt,st){const Ct=[];let Pt=!0;for(const nr of ml(st)){const Qa=0===nr.kind?VD(gt,nr.fieldPath,gt.startAt):fC(gt,nr.fieldPath,gt.startAt);Ct.push(Qa.value),Pt&&(Pt=Qa.inclusive)}return new El(Ct,Pt)}(I,v),J=function(gt,st){const Ct=[];let Pt=!0;for(const nr of ml(st)){const Qa=0===nr.kind?fC(gt,nr.fieldPath,gt.endAt):VD(gt,nr.fieldPath,gt.endAt);Ct.push(Qa.value),Pt&&(Pt=Qa.inclusive)}return new El(Ct,Pt)}(I,v),Me=this.Ze(v,I,W),Oe=this.Ze(v,I,J),pt=this.tn(v,I,V),wt=this.en(v.indexId,O,Me,W.inclusive,Oe,J.inclusive,pt);return se.forEach(wt,gt=>r.j(gt,t.limit).next(st=>{st.forEach(Ct=>{const Pt=Ge.fromSegments(Ct.documentKey);l.has(Pt)||(l=l.add(Pt),m.push(Pt))})}))}).next(()=>m)}return se.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,o,u,l,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),I=v/(null!=t?t.length:1),S=[];for(let O=0;O<v;++O){const V=t?this.nn(t[O/I]):RC,W=this.sn(e,V,r[O%I],o),J=this.rn(e,V,u[O%I],l),Me=m.map(Oe=>this.sn(e,V,Oe,!0));S.push(...this.createRange(W,J,Me))}return S}sn(e,t,r,o){const u=new ap(e,Ge.empty(),t,r);return o?u:u.Le()}rn(e,t,r,o){const u=new ap(e,Ge.empty(),t,r);return o?u.Le():u}Xe(e,t){const r=new BP(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.Ge(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;return se.forEach(this.Ye(t),o=>this.Xe(e,o).next(u=>{u?0!==r&&u.fields.length<function(l){let m=new rn(Dn.comparator),v=!1;for(const I of l.filters){const S=I;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:m=m.add(S.field))}for(const I of l.orderBy)I.field.isKeyField()||(m=m.add(I.field));return m.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new kv;for(const o of ml(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.Be(o.kind);op.ye.re(u,l)}return r.Me()}nn(e){const t=new kv;return op.ye.re(e,t.Be(0)),t.Me()}un(e,t){const r=new kv;return op.ye.re(wl(this.databaseId,t),r.Be(function(o){const u=ml(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Me()}tn(e,t,r){if(null===r)return[];let o=[];o.push(new kv);let u=0;for(const l of ml(e)){const m=r[u++];for(const v of o)if(this.cn(t,l.fieldPath)&&ah(m))o=this.an(o,l,m);else{const I=v.Be(l.kind);op.ye.re(m,I)}}return this.hn(o)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Me();return t}an(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const v=new kv;v.seed(m.Me()),op.ye.re(l,v.Be(t.kind)),u.push(v)}return u}cn(e,t){return!!e.filters.find(r=>r instanceof Yr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=NC(e),o=Lv(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(u=>{const l=[];return se.forEach(u,m=>o.get([m.indexId,this.uid]).next(v=>{l.push(function(I,S){const O=S?new nh(S.sequenceNumber,new bs(ip(S.readTime),new Ge(tt(S.documentKey)),S.largestBatchId)):nh.empty(),V=I.fields.map(([W,J])=>new hm(Dn.fromServerFormat(W),J));return new th(I.indexId,I.collectionGroup,V,O)}(m,v))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Mt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=NC(e),u=Lv(e);return this.ln(e).next(l=>o.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,v=>u.put(lM(v.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?se.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),se.forEach(m,v=>this.fn(e,o,v).next(I=>{const S=this.dn(u,v);return I.isEqual(S)?se.resolve():this._n(e,u,v,I,S)}))))})}wn(e,t,r,o){return Fv(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,o){return Fv(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const o=Fv(e);let u=new rn(up);return o.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(l,m)=>{u=u.add(new ap(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}dn(e,t){let r=new rn(up);const o=this.on(t,e);if(null==o)return r;const u=jf(t);if(null!=u){const l=e.data.field(u.fieldPath);if(ah(l))for(const m of l.arrayValue.values||[])r=r.add(new ap(t.indexId,e.key,this.nn(m),o))}else r=r.add(new ap(t.indexId,e.key,RC,o));return r}_n(e,t,r,o,u){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,v,I,S,O){const V=m.getIterator(),W=v.getIterator();let J=yl(V),Me=yl(W);for(;J||Me;){let Oe=!1,pt=!1;if(J&&Me){const wt=I(J,Me);wt<0?pt=!0:wt>0&&(Oe=!0)}else null!=J?pt=!0:Oe=!0;Oe?(S(Me),Me=yl(W)):pt?(O(J),J=yl(V)):(J=yl(V),Me=yl(W))}}(o,u,up,m=>{l.push(this.wn(e,t,r,m))},m=>{l.push(this.mn(e,t,r,m))}),se.waitFor(l)}ln(e){let t=1;return Lv(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>up(l,m)).filter((l,m,v)=>!m||0!==up(l,v[m-1]));const o=[];o.push(e);for(const l of r){const m=up(l,e),v=up(l,t);if(0===m)o[0]=e.Le();else if(m>0&&v<0)o.push(l),o.push(l.Le());else if(v>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2)u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,RC,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,RC,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mM)}getMinOffset(e,t){return se.mapArray(this.Ye(t),r=>this.Xe(e,r).next(o=>o||et())).next(mM)}}function gM(n){return hi(n,"collectionParents")}function Fv(n){return hi(n,"indexEntries")}function NC(n){return hi(n,"indexConfiguration")}function Lv(n){return hi(n,"indexState")}function mM(n){At(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;pm(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new bs(e.readTime,e.documentKey,t)}const _M={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class eo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new eo(e,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yM(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const v=r.J({range:l},(S,O,V)=>(m++,V.delete()));u.push(v.next(()=>{At(1===m)}));const I=[];for(const S of t.mutations){const O=ts(e,S.key.path,t.batchId);u.push(o.delete(O)),I.push(S.key)}return se.waitFor(u).next(()=>I)}function kC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}eo.DEFAULT_COLLECTION_PERCENTILE=10,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eo.DEFAULT=new eo(41943040,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eo.DISABLED=new eo(-1,0,0);class FC{constructor(e,t,r,o){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=o,this.gn={}}static se(e,t,r,o){At(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new FC(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _h(e).J({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Fm(e),l=_h(e);return l.add({}).next(m=>{At("number"==typeof m);const v=new oT(m,t,r,o),I=function(V,W,J){const Me=J.baseMutations.map(pt=>i(V.ne,pt)),Oe=J.mutations.map(pt=>i(V.ne,pt));return{userId:W,batchId:J.batchId,localWriteTimeMs:J.localWriteTime.toMillis(),baseMutations:Me,mutations:Oe}}(this.wt,this.userId,v),S=[];let O=new rn((V,W)=>Mt(V.canonicalString(),W.canonicalString()));for(const V of o){const W=ts(this.userId,V.key.path,m);O=O.add(V.key.path.popLast()),S.push(l.put(I)),S.push(u.put(W,Dl))}return O.forEach(V=>{S.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.gn[m]=v.keys()}),se.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return _h(e).get(t).next(r=>r?(At(r.userId===this.userId),sp(this.wt,r)):null)}yn(e,t){return this.gn[t]?se.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.gn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return _h(e).J({index:"userMutationsIndex",range:o},(l,m,v)=>{m.userId===this.userId&&(At(m.batchId>=r),u=sp(this.wt,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return _h(e).J({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _h(e).K("userMutationsIndex",t).next(r=>r.map(o=>sp(this.wt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Wt(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Fm(e).J({range:o},(l,m,v)=>{const[I,S,O]=l,V=tt(S);if(I===this.userId&&t.path.isEqual(V))return _h(e).get(O).next(W=>{if(!W)throw et();At(W.userId===this.userId),u.push(sp(this.wt,W))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rn(Mt);const o=[];return t.forEach(u=>{const l=Wt(this.userId,u.path),m=IDBKeyRange.lowerBound(l),v=Fm(e).J({range:m},(I,S,O)=>{const[V,W,J]=I,Me=tt(W);V===this.userId&&u.path.isEqual(Me)?r=r.add(J):O.done()});o.push(v)}),se.waitFor(o).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Wt(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new rn(Mt);return Fm(e).J({range:l},(v,I,S)=>{const[O,V,W]=v,J=tt(V);O===this.userId&&r.isPrefixOf(J)?J.length===o&&(m=m.add(W)):S.done()}).next(()=>this.pn(e,m))}pn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(_h(e).get(u).next(l=>{if(null===l)throw et();At(l.userId===this.userId),r.push(sp(this.wt,l))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return yM(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Fm(e).J({range:r},(u,l,m)=>{if(u[0]===this.userId){const v=tt(u[1]);o.push(v)}else m.done()}).next(()=>{At(0===o.length)})})}containsKey(e,t){return vM(e,this.userId,t)}Tn(e){return wM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vM(n,e,t){const r=Wt(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Fm(n).J({range:u,H:!0},(m,v,I)=>{const[S,O,V]=m;S===e&&O===o&&(l=!0),I.done()}).next(()=>l)}function _h(n){return hi(n,"mutations")}function Fm(n){return hi(n,"documentMutations")}function wM(n){return hi(n,"mutationQueues")}class cp{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new cp(0)}static Rn(){return new cp(-1)}}class HP{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new cp(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Dt.fromTimestamp(new gn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pn(e,o)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Lm(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Lm(e).J((l,m)=>{const v=Rv(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Lm(e).J((r,o)=>{const u=Rv(o);t(u)})}bn(e){return EM(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}Pn(e,t){return EM(e).put("targetGlobalKey",t)}vn(e,t){return Lm(e).put(uM(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=uh(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Lm(e).J({range:o,index:"queryTargetsIndex"},(l,m,v)=>{const I=Rv(m);ch(t,I.target)&&(u=I,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=yh(e);return t.forEach(l=>{const m=ke(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=yh(e);return se.forEach(t,u=>{const l=ke(u.path);return se.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=yh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=yh(e);let u=Ot();return o.J({range:r,H:!0},(l,m,v)=>{const I=tt(l[1]),S=new Ge(I);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=ke(t.path),o=IDBKeyRange.bound([r],[dm(r)],!1,!0);let u=0;return yh(e).J({index:"documentTargetsIndex",H:!0,range:o},([l,m],v,I)=>{0!==l&&(u++,I.done())}).next(()=>u>0)}te(e,t){return Lm(e).get(t).next(r=>r?Rv(r):null)}}function Lm(n){return hi(n,"targets")}function EM(n){return hi(n,"targetGlobal")}function yh(n){return hi(n,"targetDocuments")}function CM([n,e],[t,r]){const o=Mt(n,t);return 0===o?Mt(e,r):o}class GP{constructor(e){this.Sn=e,this.buffer=new rn(CM),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();CM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){nc(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ha(r)}yield t.kn(3e5)}))}}class zP{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Si.ot);const r=new GP(t);return this.Mn.forEachTarget(e,o=>r.xn(o.sequenceNumber)).next(()=>this.Mn.Fn(e,o=>r.xn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(_M)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_M):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let r,o,u,l,m,v,I;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),o=this.params.maximumSequenceNumbersToCollect):o=O,l=Date.now(),this.nthSequenceNumber(e,o))).next(O=>(r=O,m=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(I=Date.now(),cm()<=Va.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${O} documents in `+(I-v)+`ms\nTotal Duration: ${I-S}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:O})))}}class ZP{constructor(e,t){this.db=e,this.garbageCollector=new zP(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,o)=>t(o))}addReference(e,t,r){return LC(e,r)}removeReference(e,t,r){return LC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return LC(e,t)}Un(e,t){return function(r,o){let u=!1;return wM(r).Y(l=>vM(r,l,o).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Ln(e,(l,m)=>{if(m<=t){const v=this.Un(e,l).next(I=>{if(!I)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),yh(e).delete([0,ke(l.path)])))});o.push(v)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return LC(e,t)}Ln(e,t){const r=yh(e);let o,u=Si.ot;return r.J({index:"documentTargetsIndex"},([l,m],{path:v,sequenceNumber:I})=>{0===l?(u!==Si.ot&&t(new Ge(tt(o)),u),u=I,o=v):u=Si.ot}).next(()=>{u!==Si.ot&&t(new Ge(tt(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function LC(n,e){return yh(n).put((r=n.currentSequenceNumber,{targetId:0,path:ke(e.path),sequenceNumber:r}));var r}class bM{constructor(){this.changes=new Ka(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WP{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lp(e).put(r)}removeEntry(e,t,r){return lp(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],OC(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=on.newInvalidDocument(t);return lp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vv(t))},(o,u)=>{r=this.Kn(t,u)}).next(()=>r)}Gn(e,t){let r={size:0,document:on.newInvalidDocument(t)};return lp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vv(t))},(o,u)=>{r={document:this.Kn(t,u),size:kC(u)}}).next(()=>r)}getEntries(e,t){let r=di();return this.Qn(e,t,(o,u)=>{const l=this.Kn(o,u);r=r.insert(o,l)}).next(()=>r)}jn(e,t){let r=di(),o=new Ln(Ge.comparator);return this.Qn(e,t,(u,l)=>{const m=this.Kn(u,l);r=r.insert(u,m),o=o.insert(u,kC(l))}).next(()=>({documents:r,Wn:o}))}Qn(e,t,r){if(t.isEmpty())return se.resolve();let o=new rn(AM);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(Vv(o.first()),Vv(o.last())),l=o.getIterator();let m=l.getNext();return lp(e).J({index:"documentKeyIndex",range:u},(v,I,S)=>{const O=Ge.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;m&&AM(m,O)<0;)r(m,null),m=l.getNext();m&&m.isEqual(O)&&(r(m,I),m=l.hasNext()?l.getNext():null),m?S.q(Vv(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),OC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lp(e).K(IDBKeyRange.bound(o,u,!0)).next(l=>{let m=di();for(const v of l){const I=this.Kn(Ge.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);m=m.insert(I.key,I)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=di();const l=TM(t,r),m=TM(t,bs.max());return lp(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(v,I,S)=>{const O=this.Kn(Ge.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(O.key,O),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new KP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return DM(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}qn(e,t){return DM(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function NP(n,e){let t;if(e.document)t=iT(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),o=ip(e.noDocument.readTime);t=on.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=Ge.fromSegments(e.unknownDocument.path),o=ip(e.unknownDocument.version);t=on.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new gn(r[0],r[1]);return Dt.fromTimestamp(o)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return on.newInvalidDocument(e)}}function IM(n){return new WP(n)}class KP extends bM{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Ka(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new rn((u,l)=>Mt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Hn.get(u);if(t.push(this.zn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const v=aM(this.zn.wt,l);o=o.add(u.path.popLast()),r+=kC(v)-m.size,t.push(this.zn.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=aM(this.zn.wt,l.convertToNoDocument(Dt.min()));t.push(this.zn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.zn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:o})=>(o.forEach((u,l)=>{this.Hn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function DM(n){return hi(n,"remoteDocumentGlobal")}function lp(n){return hi(n,"remoteDocumentsV14")}function Vv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TM(n,e){const t=e.documentKey.path.toArray();return[n,OC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function AM(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Mt(t[u],r[u]),o)return o;return o=Mt(t.length,r.length),o||(o=Mt(t[t.length-2],r[r.length-2]),o||Mt(t[t.length-1],r[r.length-1]))}class YP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class SM{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&ph(r.mutation,o,Is.empty(),gn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ot()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ot()){const o=Ds();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Il();return u.forEach((m,v)=>{l=l.insert(m,v.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ds();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ot()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=di();const l=Om(),m=Om();return t.forEach((v,I)=>{const S=r.get(I.key);o.has(I.key)&&(void 0===S||S.mutation instanceof oc)?u=u.insert(I.key,I):void 0!==S&&(l.set(I.key,S.mutation.getFieldMask()),ph(S.mutation,I,S.mutation.getFieldMask(),gn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((I,S)=>l.set(I,S)),t.forEach((I,S)=>{var O;return m.set(I,new YP(S,null!==(O=l.get(I))&&void 0!==O?O:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Om();let o=new Ln((l,m)=>l-m),u=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(v=>{const I=t.get(v);if(null===I)return;let S=r.get(v)||Is.empty();S=m.applyToLocalView(I,S),r.set(v,S);const O=(o.get(m.batchId)||Ot()).add(v);o=o.insert(m.batchId,O)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),I=v.key,S=v.value,O=XD();S.forEach(V=>{if(!u.has(V)){const W=WD(t.get(V),r.get(V));null!==W&&O.set(V,W),u=u.add(V)}}),l.push(this.documentOverlayCache.saveOverlays(e,I,O))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Cm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(Ds());let m=-1,v=u;return l.next(I=>se.forEach(I,(S,O)=>(m<O.largestBatchId&&(m=O.largestBatchId),u.get(S)?se.resolve():this.getBaseDocument(e,S,O).next(V=>{v=v.insert(S,V)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,v,I,Ot())).next(S=>({batchId:m,changes:xm(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let o=Il();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Il();return this.indexManager.getCollectionParents(e,o).next(l=>se.forEach(l,m=>{const v=(I=t,S=m.child(o),new za(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,S;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(I=>{I.forEach((S,O)=>{u=u.insert(S,O)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,v)=>{const I=v.getKey();null===o.get(I)&&(o=o.insert(I,on.newInvalidDocument(I)))});let l=Il();return o.forEach((m,v)=>{const I=u.get(m);void 0!==I&&ph(I.mutation,v,Is.empty(),gn.now()),Za(t,v)&&(l=l.insert(m,v))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(on.newInvalidDocument(t))}}class QP{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return se.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Qr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:cT(r.bundledQuery),readTime:Qr(r.readTime)}),se.resolve();var r}}class JP{constructor(){this.overlays=new Ln(Ge.comparator),this.Xn=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ds();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ie(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Xn.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Xn.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=Ds(),u=t.length+1,l=new Ge(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const v=m.getNext().value,I=v.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Ln((I,S)=>I-S);const l=this.overlays.getIterator();for(;l.hasNext();){const I=l.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let S=u.get(I.largestBatchId);null===S&&(S=Ds(),u=u.insert(I.largestBatchId,S)),S.set(I.getKey(),I)}}const m=Ds(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((I,S)=>m.set(I,S)),!(m.size()>=o)););return se.resolve(m)}ie(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.Xn.get(o.largestBatchId).delete(r.key);this.Xn.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new uT(t,r));let u=this.Xn.get(t);void 0===u&&(u=Ot(),this.Xn.set(t,u)),this.Xn.set(t,u.add(r.key))}}class hT{constructor(){this.Zn=new rn(fi.ts),this.es=new rn(fi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new fi(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new fi(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Ge(new Zt([])),r=new fi(t,e),o=new fi(t,e+1),u=[];return this.es.forEachInRange([r,o],l=>{this.rs(l),u.push(l.key)}),u}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ge(new Zt([])),r=new fi(t,e),o=new fi(t,e+1);let u=Ot();return this.es.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new fi(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class fi{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ge.comparator(e.key,t.key)||Mt(e.ls,t.ls)}static ns(e,t){return Mt(e.ls,t.ls)||Ge.comparator(e.key,t.key)}}class XP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new rn(fi.ts)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.fs;this.fs++;const l=new oT(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.ds=this.ds.add(new fi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,t){return se.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ws(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new fi(t,0),o=new fi(t,Number.POSITIVE_INFINITY),u=[];return this.ds.forEachInRange([r,o],l=>{const m=this._s(l.ls);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rn(Mt);return t.forEach(o=>{const u=new fi(o,0),l=new fi(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([u,l],m=>{r=r.add(m.ls)})}),se.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const l=new fi(new Ge(u),0);let m=new rn(Mt);return this.ds.forEachWhile(v=>{const I=v.key.path;return!!r.isPrefixOf(I)&&(I.length===o&&(m=m.add(v.ls)),!0)},l),se.resolve(this.gs(m))}gs(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){At(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return se.forEach(t.mutations,o=>{const u=new fi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new fi(t,0),o=this.ds.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class e1{constructor(e){this.ps=e,this.docs=new Ln(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let r=di();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():on.newInvalidDocument(o))}),se.resolve(r)}getAllFromCollection(e,t,r){let o=di();const u=new Ge(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:m,value:{document:v}}=l.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||pm(ev(v),r)<=0||(o=o.insert(v.key,v.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,r,o){et()}Is(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new t1(this)}getSize(e){return se.resolve(this.size)}}class t1 extends bM{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.zn.addEntry(e,o)):this.zn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class n1{constructor(e){this.persistence=e,this.Ts=new Ka(t=>uh(t),ch),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Es=0,this.As=new hT,this.targetCount=0,this.Rs=cp.An()}forEachTarget(e,t){return this.Ts.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),se.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new cp(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.vn(t),se.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Ts.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Ts.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.As.containsKey(t))}}class MM{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Si(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new n1(this),this.indexManager=new jP,this.remoteDocumentCache=new e1(r=>this.referenceDelegate.Ss(r)),this.wt=new oM(t),this.Ds=new QP(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new XP(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new r1(this.Ps.next());return this.referenceDelegate.Cs(),r(o).next(u=>this.referenceDelegate.xs(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ns(e,t){return se.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class r1 extends iC{constructor(e){super(),this.currentSequenceNumber=e}}class VC{constructor(e){this.persistence=e,this.ks=new hT,this.Ms=null}static Os(e){return new VC(e)}get Fs(){if(this.Ms)return this.Ms;throw et()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),se.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(o=>this.Fs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Fs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Fs,r=>{const o=Ge.fromPath(r);return this.$s(e,o).next(u=>{u||t.removeEntry(o,Dt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return se.or([()=>se.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class i1{constructor(e){this.wt=e}M(e,t,r,o){const u=new $f("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ut,{unique:!0}),m.createObjectStore("documentMutations"),xM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=se.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),xM(e)),l=l.next(()=>function(m){const v=m.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",I)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,v){return v.store("mutations").K().next(I=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ut,{unique:!0});const S=v.store("mutations"),O=I.map(V=>S.put(V));return se.waitFor(O)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Bs(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(u)))),r<7&&o>=7&&(l=l.next(()=>this.Us(u))),r<8&&o>=8&&(l=l.next(()=>this.qs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.Ks(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:MP});v.createIndex("collectionPathOverlayIndex",xP,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",OP,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:Iv});v.createIndex("documentKeyIndex",Dv),v.createIndex("collectionGroupIndex",Tv)}(e)).next(()=>this.Gs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.Qs(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Ov}).createIndex("sequenceNumberIndex",Pv,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:AP}).createIndex("documentKeyIndex",SP,{unique:!1})}(e))),l}Ls(e){let t=0;return e.store("remoteDocuments").J((r,o)=>{t+=kC(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(o=>se.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",l).next(m=>se.forEach(m,v=>{At(v.userId===u.userId);const I=sp(this.wt,v);return yM(e,u.userId,I).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.J((l,m)=>{const v=new Zt(l),I=[0,ke(v)];u.push(t.get(I).next(S=>S?se.resolve():t.put({targetId:0,path:ke(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:xv});const r=t.store("collectionParents"),o=new dT,u=l=>{if(o.add(l)){const m=l.lastSegment(),v=l.popLast();return r.put({collectionId:m,parent:ke(v)})}};return t.store("remoteDocuments").J({H:!0},(l,m)=>{const v=new Zt(l);return u(v.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,m,v],I)=>{const S=tt(m);return u(S.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,o)=>{const u=Rv(o),l=uM(this.wt,u);return t.put(l)})}Gs(e,t){const r=t.store("remoteDocuments"),o=[];return r.J((u,l)=>{const m=t.store("remoteDocumentsV14"),v=(I=l,I.document?new Ge(Zt.fromString(I.document.name).popFirst(5)):I.noDocument?Ge.fromSegments(I.noDocument.path):I.unknownDocument?Ge.fromSegments(I.unknownDocument.path):et()).path.toArray();var I;const S={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(S))}).next(()=>se.waitFor(o))}Qs(e,t){const r=t.store("mutations"),o=IM(this.wt),u=new MM(VC.Os,this.wt.ne);return r.K().next(l=>{const m=new Map;return l.forEach(v=>{var I;let S=null!==(I=m.get(v.userId))&&void 0!==I?I:Ot();sp(this.wt,v).keys().forEach(O=>S=S.add(O)),m.set(v.userId,S)}),se.forEach(m,(v,I)=>{const S=new Zn(I),O=PC.se(this.wt,S),V=u.getIndexManager(S),W=FC.se(S,this.wt,V,u.referenceDelegate);return new SM(o,W,O,V).recalculateAndSaveOverlaysForDocumentKeys(new sT(t,Si.ot),v).next()})})}}function xM(n){n.createObjectStore("targetDocuments",{keyPath:Sv}).createIndex("documentTargetsIndex",Mv,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Av,{unique:!0}),n.createObjectStore("targetGlobal")}const fT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pT{constructor(e,t,r,o,u,l,m,v,I,S,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=u,this.window=l,this.document=m,this.Ws=I,this.zs=S,this.Hs=O,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=V=>Promise.resolve(),!pT.V())throw new xe(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZP(this,o),this.ei=t+"main",this.wt=new oM(v),this.ni=new Ao(this.ei,this.Hs,new i1(this.wt)),this.Vs=new HP(this.referenceDelegate,this.wt),this.remoteDocumentCache=IM(this.wt),this.Ds=new kP,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===S&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,fT);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Si(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>UC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(nc(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Uv(e).get("owner").next(t=>se.resolve(this.di(t)))}_i(e){return UC(e).delete(this.clientId)}wi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=hi(r,"clientMetadata");return o.K().next(u=>{const l=e.gi(u,18e5),m=u.filter(v=>-1===l.indexOf(v));return se.forEach(m,v=>o.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?se.resolve(!0):Uv(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,fT);return!1}}return!(!this.networkEnabled||!this.inForeground)||UC(e).K().next(r=>void 0===this.gi(r,5e3).find(o=>{if(this.clientId!==o.clientId){const l=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||l&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new sT(t,Si.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>UC(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return FC.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $P(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return PC.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.Hs)?RP:14===l?sM:13===l?iM:12===l?PP:11===l?rM:void et();var l;let m;return this.ni.runTransaction(e,o,u,v=>(m=new sT(v,this.Ps?this.Ps.next():Si.ot),"readwrite-primary"===t?this.ai(m).next(I=>!!I||this.hi(m)).next(I=>{if(!I)throw tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new xe(ce.FAILED_PRECONDITION,tv);return r(m)}).next(I=>this.fi(m).next(()=>I)):this.bi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}bi(e){return Uv(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ce.FAILED_PRECONDITION,fT)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uv(e).put("owner",t)}static V(){return Ao.V()}li(e){const t=Uv(e);return t.get("owner").next(r=>this.di(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,It.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){tr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uv(n){return hi(n,"owner")}function UC(n){return hi(n,"clientMetadata")}function gT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class mT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=o}static Vi(e,t){let r=Ot(),o=Ot();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new mT(e,t.fromCache,r,o)}}class OM{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ci(e,t).next(u=>u||this.xi(e,t,o,r)).next(u=>u||this.Ni(e,t))}Ci(e,t){if(gC(t))return se.resolve(null);let r=Mi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=bm(t,null,"F"),r=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Ot(...u);return this.Di.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const I=this.ki(t,m);return this.Mi(t,I,l,v.readTime)?this.Ci(e,bm(t,null,"F")):this.Oi(e,I,t,v)}))})))}xi(e,t,r,o){return gC(t)||o.isEqual(Dt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(u=>{const l=this.ki(t,u);return this.Mi(t,l,r,o)?this.Ni(e,t):(cm()<=Va.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Yf(t)),this.Oi(e,l,t,fm(o,-1)))})}ki(e,t){let r=new rn(pv(e));return t.forEach((o,u)=>{Za(e,u)&&(r=r.add(u))}),r}Mi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ni(e,t){return cm()<=Va.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Yf(t)),this.Di.getDocumentsMatchingQuery(e,t,bs.min())}Oi(e,t,r,o){return this.Di.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class s1{constructor(e,t,r,o){this.persistence=e,this.Fi=t,this.wt=o,this.$i=new Ln(Mt),this.Bi=new Ka(u=>uh(u),ch),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SM(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function PM(n,e,t,r){return new s1(n,e,t,r)}function RM(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,me.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let v=Ot();for(const I of o){l.push(I.batchId);for(const S of I.mutations)v=v.add(S.key)}for(const I of u){m.push(I.batchId);for(const S of I.mutations)v=v.add(S.key)}return t.localDocuments.getDocuments(r,v).next(I=>({Ki:I,removedBatchIds:l,addedBatchIds:m}))})})}),_T.apply(this,arguments)}function o1(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Ui.newChangeBuffer({trackRemovals:!0});return function(l,m,v,I){const S=v.batch,O=S.keys();let V=se.resolve();return O.forEach(W=>{V=V.next(()=>I.getEntry(m,W)).next(J=>{const Me=v.docVersions.get(W);At(null!==Me),J.version.compareTo(Me)<0&&(S.applyToRemoteDocument(J,v),J.isValidDocument()&&(J.setReadTime(v.commitVersion),I.addEntry(J)))})}),V.next(()=>l.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Ot();for(let v=0;v<l.mutationResults.length;++v)l.mutationResults[v].transformResults.length>0&&(m=m.add(l.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function NM(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function a1(n,e){const t=Ze(n),r=e.snapshotVersion;let o=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Ui.newChangeBuffer({trackRemovals:!0});o=t.$i;const m=[];e.targetChanges.forEach((S,O)=>{const V=o.get(O);if(!V)return;m.push(t.Vs.removeMatchingKeys(u,S.removedDocuments,O).next(()=>t.Vs.addMatchingKeys(u,S.addedDocuments,O)));let W=V.withSequenceNumber(u.currentSequenceNumber);var J,Me,Oe;e.targetMismatches.has(O)?W=W.withResumeToken(Wn.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):S.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(S.resumeToken,r)),o=o.insert(O,W),Me=W,Oe=S,(0===(J=V).resumeToken.approximateByteSize()||Me.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=3e8||Oe.addedDocuments.size+Oe.modifiedDocuments.size+Oe.removedDocuments.size>0)&&m.push(t.Vs.updateTargetData(u,W))});let v=di(),I=Ot();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(kM(u,l,e.documentUpdates).next(S=>{v=S.Gi,I=S.Qi})),!r.isEqual(Dt.min())){const S=t.Vs.getLastRemoteSnapshotVersion(u).next(O=>t.Vs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return se.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,I)).next(()=>v)}).then(u=>(t.$i=o,u))}function kM(n,e,t){let r=Ot(),o=Ot();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=di();return t.forEach((m,v)=>{const I=u.get(m);v.isFoundDocument()!==I.isFoundDocument()&&(o=o.add(m)),v.isNoDocument()&&v.version.isEqual(Dt.min())?(e.removeEntry(m,v.readTime),l=l.insert(m,v)):!I.isValidDocument()||v.version.compareTo(I.version)>0||0===v.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(v),l=l.insert(m,v)):Re("LocalStore","Ignoring outdated watch update for ",m,". Current version:",I.version," Watch version:",v.version)}),{Gi:l,Qi:o}})}function u1(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vm(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Vs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Vs.allocateTargetId(r).next(l=>(o=new mh(e,l,0,r.currentSequenceNumber),t.Vs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.$i.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Um(n,e,t){return yT.apply(this,arguments)}function yT(){return yT=(0,me.Z)(function*(n,e,t){const r=Ze(n),o=r.$i.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!nc(l))throw l;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.$i=r.$i.remove(e),r.Bi.delete(o.target)}),yT.apply(this,arguments)}function BC(n,e,t){const r=Ze(n);let o=Dt.min(),u=Ot();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,v,I){const S=Ze(m),O=S.Bi.get(I);return void 0!==O?se.resolve(S.$i.get(O)):S.Vs.getTargetData(v,I)}(r,l,Mi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(l,m.targetId).next(v=>{u=v})}).next(()=>r.Fi.getDocumentsMatchingQuery(l,e,t?o:Dt.min(),t?u:Ot())).next(m=>(VM(r,fv(e),m),{documents:m,ji:u})))}function FM(n,e){const t=Ze(n),r=Ze(t.Vs),o=t.$i.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.te(u,e).next(l=>l?l.target:null))}function LM(n,e){const t=Ze(n),r=t.Li.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Ui.getAllFromCollectionGroup(o,e,fm(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(VM(t,e,o),o))}function VM(n,e,t){let r=Dt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Li.set(e,r)}function vT(){return vT=(0,me.Z)(function*(n,e,t,r){const o=Ze(n);let u=Ot(),l=di();for(const I of t){const S=e.Wi(I.metadata.name);I.document&&(u=u.add(S));const O=e.zi(I);O.setReadTime(e.Hi(I.metadata.readTime)),l=l.insert(S,O)}const m=o.Ui.newChangeBuffer({trackRemovals:!0}),v=yield Vm(o,(I=r,Mi(dh(Zt.fromString(`__bundle__/docs/${I}`)))));var I;return o.persistence.runTransaction("Apply bundle documents","readwrite",I=>kM(I,m,l).next(S=>(m.apply(I),S)).next(S=>o.Vs.removeMatchingKeysForTargetId(I,v.targetId).next(()=>o.Vs.addMatchingKeys(I,u,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(I,S.Gi,S.Qi)).next(()=>S.Gi)))}),vT.apply(this,arguments)}function l1(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,me.Z)(function*(n,e,t=Ot()){const r=yield Vm(n,Mi(cT(e.bundledQuery))),o=Ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Qr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.Ds.saveNamedQuery(u,e);const m=r.withResumeToken(Wn.EMPTY_BYTE_STRING,l);return o.$i=o.$i.insert(m.targetId,m),o.Vs.updateTargetData(u,m).next(()=>o.Vs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Vs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ds.saveNamedQuery(u,e))})}),wT.apply(this,arguments)}function UM(n,e){return`firestore_clients_${n}_${e}`}function BM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ET(n,e){return`firestore_targets_${n}_${e}`}class jC{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new xe(o.error.code,o.error.message))),l?new jC(e,t,o.state,u):(tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new Bv(e,r.state,o):(tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $C{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Pm();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=iv(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new $C(e,u):(tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class CT{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new CT(t.clientId,t.onlineState):(tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bT{constructor(){this.activeTargetIds=Pm()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IT{constructor(e,t,r,o,u){this.window=e,this.js=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Ln(Mt),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=UM(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new bT),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Ri();for(const o of t){if(o===e.tr)continue;const u=e.getItem(UM(e.persistenceKey,o));if(u){const l=$C.Ji(o,u);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ET(this.persistenceKey,e));if(r){const o=Bv.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ET(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let l=Si.ot;if(null!=u)try{const m=JSON.parse(u);At("number"==typeof m),l=m}catch(m){tr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==Si.ot&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new jC(this.currentUser,e,t,r),u=BM(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=BM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=ET(this.persistenceKey,e),u=new Bv(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return $C.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),o=Number(r[1]);return jC.Ji(new Zn(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return Bv.Ji(o,t)}wr(e){return CT.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),l=[],m=[];return u.forEach(v=>{o.has(v)||l.push(v)}),o.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Or(l,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Pm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class jM{constructor(){this.Fr=new bT,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new bT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class d1{Br(e){}shutdown(){}}class $M{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const h1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class f1{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class p1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const l=this.oo(e,t);Re("RestConnection","Sending: ",l,r);const m={};return this.uo(m,o,u),this.co(e,l,m,r).then(v=>(Re("RestConnection","Received: ",v),v),v=>{throw pl("RestConnection",`${e} failed with error: `,v,"url: ",l,"request:",r),v})}ao(e,t,r,o,u,l){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+fl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${h1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,l)=>{const m=new bD;m.listenOnce(wD.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Ky.NO_ERROR:const I=m.getResponseJson();Re("Connection","XHR received:",JSON.stringify(I)),u(I);break;case Ky.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),l(new xe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Ky.HTTP_ERROR:const S=m.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){const O=m.getResponseJson().error;if(O&&O.status&&O.message){const V=function(W){const J=W.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(J)>=0?J:ce.UNKNOWN}(O.status);l(new xe(V,O.message))}else l(new xe(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new xe(ce.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);m.send(t,"POST",v,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=vD(),l=JE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new CD({})),this.uo(m.initMessageHeaders,t,r),(0,It.uI)()||(0,It.b$)()||(0,It.d)()||(0,It.w1)()||(0,It.Mn)()||(0,It.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const v=o.join("");Re("Connection","Creating WebChannel: "+v,m);const I=u.createWebChannel(v,m);let S=!1,O=!1;const V=new f1({jr:J=>{O?Re("Connection","Not sending because WebChannel is closed:",J):(S||(Re("Connection","Opening WebChannel transport."),I.open(),S=!0),Re("Connection","WebChannel sending:",J),I.send(J))},Wr:()=>I.close()}),W=(J,Me,Oe)=>{J.listen(Me,pt=>{try{Oe(pt)}catch(wt){setTimeout(()=>{throw wt},0)}})};return W(I,um.EventType.OPEN,()=>{O||Re("Connection","WebChannel transport opened.")}),W(I,um.EventType.CLOSE,()=>{O||(O=!0,Re("Connection","WebChannel transport closed"),V.eo())}),W(I,um.EventType.ERROR,J=>{O||(O=!0,pl("Connection","WebChannel transport errored:",J),V.eo(new xe(ce.UNAVAILABLE,"The operation could not be completed")))}),W(I,um.EventType.MESSAGE,J=>{var Me;if(!O){const Oe=J.data[0];At(!!Oe);const pt=Oe,wt=pt.error||(null===(Me=pt[0])||void 0===Me?void 0:Me.error);if(wt){Re("Connection","WebChannel received error:",wt);const gt=wt.status;let st=function(Pt){const nr=hr[Pt];if(void 0!==nr)return ac(nr)}(gt),Ct=wt.message;void 0===st&&(st=ce.INTERNAL,Ct="Unknown error status: "+gt+" with message "+wt.message),O=!0,V.eo(new xe(st,Ct)),I.close()}else Re("Connection","WebChannel received:",Oe),V.no(Oe)}}),W(l,ED.STAT_EVENT,J=>{J.stat===XE.PROXY?Re("Connection","Detected buffering proxy"):J.stat===XE.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.Zr()},0),V}}function HM(){return"undefined"!=typeof window?window:null}function HC(){return"undefined"!=typeof document?document:null}function jv(n){return new Cv(n,!0)}class DT{constructor(e,t,r=1e3,o=1.5,u=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class GM{constructor(e,t,r,o,u,l,m,v){this.js=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new DT(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,me.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,me.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(tr(t.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new xe(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,me.Z)(function*(){e.state=0,e.start()}))}qo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class g1 extends GM{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.wt=u}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function nM(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:et(),o=e.targetChange.targetIds||[],u=function(v,I){return v.dt?(At(void 0===I||"string"==typeof I),Wn.fromBase64String(I||"")):(At(void 0===I||I instanceof Uint8Array),Wn.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(v){const I=void 0===v.code?ce.UNKNOWN:ac(v.code);return new xe(I,v.message||"")}(l);t=new wv(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ya(n,r.document.name),u=Qr(r.document.updateTime),l=new li({mapValue:{fields:r.document.fields}}),m=on.newFoundDocument(o,u,l);t=new tp(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Ya(n,r.document),u=r.readTime?Qr(r.readTime):Dt.min(),l=on.newNoDocument(o,u);t=new tp([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=Ya(n,r.document);t=new tp([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new Mm(r.count||0);t=new vv(r.targetId,u)}}var v;return t}(this.wt,e),r=function(o){if(!("targetChange"in o))return Dt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?Qr(u.readTime):Dt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=km(this.wt),t.addTarget=function(o,u){let l;const m=u.target;return l=vm(m)?{documents:c(o,m)}:{query:h(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=AC(o,u.resumeToken):u.snapshotVersion.compareTo(Dt.min())>0&&(l.readTime=np(o,u.snapshotVersion.toTimestamp())),l}(this.wt,e);const r=function y(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=km(this.wt),t.removeTarget=e,this.Oo(t)}}class m1 extends GM{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.wt=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function a(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,o){let u=Qr(r.updateTime?r.updateTime:o);return u.isEqual(Dt.min())&&(u=Qr(o)),new CC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.Jo(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=km(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>i(this.wt,r))};this.Oo(t)}}class _1 extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=o,this.Zo=!1}tu(){if(this.Zo)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ce.UNKNOWN,o.toString())})}ao(e,t,r,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.bo.ao(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ce.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class y1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(tr(t),this.su=!1):Re("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class v1{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,me.Z)(function*(){var v;vh(l)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,me.Z)(function*(I){const S=Ze(I);S.lu.add(4),yield Bm(S),S._u.set("Unknown"),S.lu.delete(4),yield $v(S)}),function(I){return v.apply(this,arguments)})(l))}))}),this._u=new y1(r,o)}}function $v(n){return TT.apply(this,arguments)}function TT(){return TT=(0,me.Z)(function*(n){if(vh(n))for(const e of n.fu)yield e(!0)}),TT.apply(this,arguments)}function Bm(n){return AT.apply(this,arguments)}function AT(){return AT=(0,me.Z)(function*(n){for(const e of n.fu)yield e(!1)}),AT.apply(this,arguments)}function GC(n,e){const t=Ze(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),xT(t)?MT(t):$m(t).Co()&&ST(t,e))}function Hv(n,e){const t=Ze(n),r=$m(t);t.hu.delete(e),r.Co()&&qM(t,e),0===t.hu.size&&(r.Co()?r.ko():vh(t)&&t._u.set("Unknown"))}function ST(n,e){n.wu.Nt(e.targetId),$m(n).Qo(e)}function qM(n,e){n.wu.Nt(e),$m(n).jo(e)}function MT(n){n.wu=new tT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),$m(n).start(),n._u.iu()}function xT(n){return vh(n)&&!$m(n).Do()&&n.hu.size>0}function vh(n){return 0===Ze(n).lu.size}function zM(n){n.wu=void 0}function w1(n){return OT.apply(this,arguments)}function OT(){return OT=(0,me.Z)(function*(n){n.hu.forEach((e,t)=>{ST(n,e)})}),OT.apply(this,arguments)}function E1(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,me.Z)(function*(n,e){zM(n),xT(n)?(n._u.uu(e),MT(n)):n._u.set("Unknown")}),PT.apply(this,arguments)}function C1(n,e,t){return RT.apply(this,arguments)}function RT(){return RT=(0,me.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof wv&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.hu.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.hu.delete(m),o.wu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qC(n,r)}else if(e instanceof tp?n.wu.Ut(e):e instanceof vv?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Dt.min()))try{const r=yield NM(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.wu.Yt(u);return l.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const I=o.hu.get(v);I&&o.hu.set(v,I.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const v=o.hu.get(m);if(!v)return;o.hu.set(m,v.withResumeToken(Wn.EMPTY_BYTE_STRING,v.snapshotVersion)),qM(o,m);const I=new mh(v.target,m,1,v.sequenceNumber);ST(o,I)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield qC(n,r)}var r}),RT.apply(this,arguments)}function qC(n,e,t){return NT.apply(this,arguments)}function NT(){return NT=(0,me.Z)(function*(n,e,t){if(!nc(e))throw e;n.lu.add(1),yield Bm(n),n._u.set("Offline"),t||(t=()=>NM(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield $v(n)}))}),NT.apply(this,arguments)}function ZM(n,e){return e().catch(t=>qC(n,t,e))}function jm(n){return kT.apply(this,arguments)}function kT(){return kT=(0,me.Z)(function*(n){const e=Ze(n),t=wh(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;b1(e);)try{const o=yield u1(e.localStore,r);if(null===o){0===e.au.length&&t.ko();break}r=o.batchId,I1(e,o)}catch(o){yield qC(e,o)}WM(e)&&KM(e)}),kT.apply(this,arguments)}function b1(n){return vh(n)&&n.au.length<10}function I1(n,e){n.au.push(e);const t=wh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function WM(n){return vh(n)&&!wh(n).Do()&&n.au.length>0}function KM(n){wh(n).start()}function D1(n){return FT.apply(this,arguments)}function FT(){return FT=(0,me.Z)(function*(n){wh(n).Xo()}),FT.apply(this,arguments)}function T1(n){return LT.apply(this,arguments)}function LT(){return LT=(0,me.Z)(function*(n){const e=wh(n);for(const t of n.au)e.Ho(t.mutations)}),LT.apply(this,arguments)}function A1(n,e,t){return VT.apply(this,arguments)}function VT(){return VT=(0,me.Z)(function*(n,e,t){const r=n.au.shift(),o=aT.from(r,e,t);yield ZM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield jm(n)}),VT.apply(this,arguments)}function S1(n,e){return UT.apply(this,arguments)}function UT(){return UT=(0,me.Z)(function*(n,e){var t;e&&wh(n).zo&&(yield(t=(0,me.Z)(function*(r,o){if(_v(u=o.code)&&u!==ce.ABORTED){const l=r.au.shift();wh(r).No(),yield ZM(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield jm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),WM(n)&&KM(n)}),UT.apply(this,arguments)}function YM(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,me.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=vh(t);t.lu.add(3),yield Bm(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield $v(t)}),BT.apply(this,arguments)}function jT(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,me.Z)(function*(n,e){const t=Ze(n);e?(t.lu.delete(2),yield $v(t)):e||(t.lu.add(2),yield Bm(t),t._u.set("Unknown"))}),$T.apply(this,arguments)}function $m(n){return n.mu||(n.mu=function(e,t,r){const o=Ze(e);return o.tu(),new g1(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:w1.bind(null,n),Jr:E1.bind(null,n),Go:C1.bind(null,n)}),n.fu.push(function(){var e=(0,me.Z)(function*(t){t?(n.mu.No(),xT(n)?MT(n):n._u.set("Unknown")):(yield n.mu.stop(),zM(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function wh(n){return n.gu||(n.gu=function(e,t,r){const o=Ze(e);return o.tu(),new m1(t,o.bo,o.authCredentials,o.appCheckCredentials,o.wt,r)}(n.datastore,n.asyncQueue,{zr:D1.bind(null,n),Jr:S1.bind(null,n),Yo:T1.bind(null,n),Jo:A1.bind(null,n)}),n.fu.push(function(){var e=(0,me.Z)(function*(t){t?(n.gu.No(),yield jm(n)):(yield n.gu.stop(),n.au.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class HT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new HT(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(n,e){if(tr("AsyncQueue",`${e}: ${n}`),nc(n))return new xe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Gm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Il(),this.sortedSet=new Ln(this.comparator)}static emptySet(e){return new Gm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Gm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class QM{constructor(){this.yu=new Ln(Ge.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):et():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class qm{constructor(e,t,r,o,u,l,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(l=>{u.push({type:0,doc:l})}),new qm(e,t,Gm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class M1{constructor(){this.Iu=void 0,this.listeners=[]}}class x1{constructor(){this.queries=new Ka(e=>mC(e),Kf),this.onlineState="Unknown",this.Tu=new Set}}function GT(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,me.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new M1),o)try{u.Iu=yield t.onListen(r)}catch(l){const m=Hm(l,`Initialization of query '${Yf(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&WT(t)}),qT.apply(this,arguments)}function zT(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,me.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),ZT.apply(this,arguments)}function O1(n,e){const t=Ze(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.Au(o)&&(r=!0);l.Iu=o}}r&&WT(t)}function P1(n,e,t){const r=Ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function WT(n){n.Tu.forEach(e=>{e.next()})}class KT{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new qm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class R1{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class JM{constructor(e){this.wt=e}Wi(e){return Ya(this.wt,e)}zi(e){return e.metadata.exists?iT(this.wt,e.document,!1):on.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Qr(e)}}class N1{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XM(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Zt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new JM(this.wt);for(const o of e)if(o.metadata.queries){const u=r.Wi(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||Ot()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function c1(n,e,t,r){return vT.apply(this,arguments)}(e.localStore,new JM(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield l1(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function XM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ex{constructor(e){this.key=e}}class tx{constructor(e){this.key=e}}class nx{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Ot(),this.mutatedKeys=Ot(),this.Lu=pv(e),this.Uu=new Gm(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new QM,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,I="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,O)=>{const V=o.get(S),W=Za(this.query,O)?O:null,J=!!V&&this.mutatedKeys.has(V.key),Me=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let Oe=!1;V&&W?V.data.isEqual(W.data)?J!==Me&&(r.track({type:3,doc:W}),Oe=!0):this.Qu(V,W)||(r.track({type:2,doc:W}),Oe=!0,(v&&this.Lu(W,v)>0||I&&this.Lu(W,I)<0)&&(m=!0)):!V&&W?(r.track({type:0,doc:W}),Oe=!0):V&&!W&&(r.track({type:1,doc:V}),Oe=!0,(v||I)&&(m=!0)),Oe&&(W?(l=l.add(W),u=Me?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Uu:l,Gu:r,Mi:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Gu.pu();u.sort((I,S)=>function(O,V){const W=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return W(O)-W(V)}(I.type,S.type)||this.Lu(I.doc,S.doc)),this.ju(r);const l=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,v=m!==this.$u;return this.$u=m,0!==u.length||v?{snapshot:new qm(this.query,e.Uu,o,u,e.mutatedKeys,0===m,v,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new QM,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Ot(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new tx(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new ex(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Ot();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return qm.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class k1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class F1{constructor(e){this.key=e,this.Xu=!1}}class L1{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new Ka(m=>mC(m),Kf),this.ec=new Map,this.nc=new Set,this.sc=new Ln(Ge.comparator),this.ic=new Map,this.rc=new hT,this.oc={},this.uc=new Map,this.cc=cp.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function V1(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,me.Z)(function*(n,e){const t=vA(n);let r,o;const u=t.tc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const l=yield Vm(t.localStore,Mi(e));t.isPrimaryClient&&GC(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield QT(t,e,r,"current"===m)}return o}),YT.apply(this,arguments)}function QT(n,e,t,r){return JT.apply(this,arguments)}function JT(){return JT=(0,me.Z)(function*(n,e,t,r){n.hc=(S,O,V)=>{return(W=(0,me.Z)(function*(J,Me,Oe,pt){let wt=Me.view.Ku(Oe);wt.Mi&&(wt=yield BC(J.localStore,Me.query,!1).then(({documents:Ct})=>Me.view.Ku(Ct,wt)));const gt=pt&&pt.targetChanges.get(Me.targetId),st=Me.view.applyChanges(wt,J.isPrimaryClient,gt);return uA(J,Me.targetId,st.zu),st.snapshot}),function(J,Me,Oe,pt){return W.apply(this,arguments)})(n,S,O,V);var W};const o=yield BC(n.localStore,e,!0),u=new nx(e,o.ji),l=u.Ku(o.documents),m=ep.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(l,n.isPrimaryClient,m);uA(n,t,v.zu);const I=new k1(e,t,u);return n.tc.set(e,I),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),v.snapshot}),JT.apply(this,arguments)}function U1(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,me.Z)(function*(n,e){const t=Ze(n),r=t.tc.get(e),o=t.ec.get(r.targetId);if(o.length>1)return t.ec.set(r.targetId,o.filter(u=>!Kf(u,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Um(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Hv(t.remoteStore,r.targetId),zm(t,r.targetId)}).catch(Ha))):(zm(t,r.targetId),yield Um(t.localStore,r.targetId,!0))}),XT.apply(this,arguments)}function eA(){return eA=(0,me.Z)(function*(n,e,t){const r=wA(n);try{const o=yield function(u,l){const m=Ze(u),v=gn.now(),I=l.reduce((V,W)=>V.add(W.key),Ot());let S,O;return m.persistence.runTransaction("Locally write mutations","readwrite",V=>{let W=di(),J=Ot();return m.Ui.getEntries(V,I).next(Me=>{W=Me,W.forEach((Oe,pt)=>{pt.isValidDocument()||(J=J.add(Oe))})}).next(()=>m.localDocuments.getOverlayedDocuments(V,W)).next(Me=>{S=Me;const Oe=[];for(const pt of l){const wt=KD(pt,S.get(pt.key).overlayedDocument);null!=wt&&Oe.push(new oc(pt.key,wt,uv(wt.value.mapValue),An.exists(!0)))}return m.mutationQueue.addMutationBatch(V,v,Oe,l)}).next(Me=>{O=Me;const Oe=Me.applyToLocalDocumentSet(S,J);return m.documentOverlayCache.saveOverlays(V,Me.batchId,Oe)})}).then(()=>({batchId:O.batchId,changes:xm(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let v=u.oc[u.currentUser.toKey()];v||(v=new Ln(Mt)),v=v.insert(l,m),u.oc[u.currentUser.toKey()]=v}(r,o.batchId,t),yield Tl(r,o.changes),yield jm(r.remoteStore)}catch(o){const u=Hm(o,"Failed to persist write");t.reject(u)}}),eA.apply(this,arguments)}function rx(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,me.Z)(function*(n,e){const t=Ze(n);try{const r=yield a1(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.ic.get(u);l&&(At(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.Xu=!0:o.modifiedDocuments.size>0?At(l.Xu):o.removedDocuments.size>0&&(At(l.Xu),l.Xu=!1))}),yield Tl(t,r,e)}catch(r){yield Ha(r)}}),tA.apply(this,arguments)}function ix(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.tc.forEach((u,l)=>{const m=l.view.Eu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=Ze(u);m.onlineState=l;let v=!1;m.queries.forEach((I,S)=>{for(const O of S.listeners)O.Eu(l)&&(v=!0)}),v&&WT(m)}(r.eventManager,e),o.length&&r.Zu.Go(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function j1(n,e,t){return nA.apply(this,arguments)}function nA(){return nA=(0,me.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ic.get(e),u=o&&o.key;if(u){let l=new Ln(Ge.comparator);l=l.insert(u,on.newNoDocument(u,Dt.min()));const m=Ot().add(u),v=new Xf(Dt.min(),new Map,new rn(Mt),l,m);yield rx(r,v),r.sc=r.sc.remove(u),r.ic.delete(e),cA(r)}else yield Um(r.localStore,e,!1).then(()=>zm(r,e,t)).catch(Ha)}),nA.apply(this,arguments)}function $1(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,me.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const o=yield o1(t.localStore,e);aA(t,r,null),oA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Tl(t,o)}catch(o){yield Ha(o)}}),rA.apply(this,arguments)}function H1(n,e,t){return iA.apply(this,arguments)}function iA(){return iA=(0,me.Z)(function*(n,e,t){const r=Ze(n);try{const o=yield function(u,l){const m=Ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return m.mutationQueue.lookupMutationBatch(v,l).next(S=>(At(null!==S),I=S.keys(),m.mutationQueue.removeMutationBatch(v,S))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,I,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,I)).next(()=>m.localDocuments.getDocuments(v,I))})}(r.localStore,e);aA(r,e,t),oA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Tl(r,o)}catch(o){yield Ha(o)}}),iA.apply(this,arguments)}function sA(){return sA=(0,me.Z)(function*(n,e){const t=Ze(n);vh(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ze(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.uc.get(r)||[];o.push(e),t.uc.set(r,o)}catch(r){const o=Hm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),sA.apply(this,arguments)}function oA(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function aA(n,e,t){const r=Ze(n);let o=r.oc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oc[r.currentUser.toKey()]=o}}function zm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||sx(n,r)})}function sx(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(Hv(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),cA(n))}function uA(n,e,t){for(const r of t)r instanceof ex?(n.rc.addReference(r.key,e),q1(n,r)):r instanceof tx?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||sx(n,r.key)):et()}function q1(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.nc.add(r),cA(n))}function cA(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Ge(Zt.fromString(e)),r=n.cc.next();n.ic.set(r,new F1(t)),n.sc=n.sc.insert(t,r),GC(n.remoteStore,new mh(Mi(dh(t.path)),r,2,Si.ot))}}function Tl(n,e,t){return lA.apply(this,arguments)}function lA(){return lA=(0,me.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[],l=[];var m;r.tc.isEmpty()||(r.tc.forEach((m,v)=>{l.push(r.hc(v,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,I.fromCache?"not-current":"current"),o.push(I);const S=mT.Vi(v.targetId,I);u.push(S)}}))}),yield Promise.all(l),r.Zu.Go(o),yield(m=(0,me.Z)(function*(v,I){const S=Ze(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>se.forEach(I,V=>se.forEach(V.Pi,W=>S.persistence.referenceDelegate.addReference(O,V.targetId,W)).next(()=>se.forEach(V.vi,W=>S.persistence.referenceDelegate.removeReference(O,V.targetId,W)))))}catch(O){if(!nc(O))throw O;Re("LocalStore","Failed to update sequence numbers: "+O)}for(const O of I){const V=O.targetId;if(!O.fromCache){const W=S.$i.get(V),Me=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);S.$i=S.$i.insert(V,Me)}}}),function(v,I){return m.apply(this,arguments)})(r.localStore,u))}),lA.apply(this,arguments)}function z1(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,me.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield RM(t.localStore,e);t.currentUser=e,(o=t).uc.forEach(l=>{l.forEach(m=>{m.reject(new xe(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Tl(t,r.Ki)}var o}),dA.apply(this,arguments)}function Z1(n,e){const t=Ze(n),r=t.ic.get(e);if(r&&r.Xu)return Ot().add(r.key);{let o=Ot();const u=t.ec.get(e);if(!u)return o;for(const l of u){const m=t.tc.get(l);o=o.unionWith(m.view.qu)}return o}}function W1(n,e){return hA.apply(this,arguments)}function hA(){return hA=(0,me.Z)(function*(n,e){const t=Ze(n),r=yield BC(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&uA(t,e.targetId,o.zu),o}),hA.apply(this,arguments)}function K1(n,e){return fA.apply(this,arguments)}function fA(){return fA=(0,me.Z)(function*(n,e){const t=Ze(n);return LM(t.localStore,e).then(r=>Tl(t,r))}),fA.apply(this,arguments)}function Y1(n,e,t,r){return pA.apply(this,arguments)}function pA(){return pA=(0,me.Z)(function*(n,e,t,r){const o=Ze(n),u=yield function(l,m){const v=Ze(l),I=Ze(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>I.yn(S,m).next(O=>O?v.localDocuments.getDocuments(S,O):se.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield jm(o.remoteStore):"acknowledged"===t||"rejected"===t?(aA(o,e,r||null),oA(o,e),m=e,Ze(Ze(o.localStore).mutationQueue).In(m)):et(),yield Tl(o,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),pA.apply(this,arguments)}function gA(){return gA=(0,me.Z)(function*(n,e){const t=Ze(n);if(vA(t),wA(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield ox(t,r.toArray());t.ac=!0,yield jT(t.remoteStore,!0);for(const u of o)GC(t.remoteStore,u)}else if(!1===e&&!1!==t.ac){const r=[];let o=Promise.resolve();t.ec.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(zm(t,l),Um(t.localStore,l,!0))),Hv(t.remoteStore,l)}),yield o,yield ox(t,r),function(u){const l=Ze(u);l.ic.forEach((m,v)=>{Hv(l.remoteStore,v)}),l.rc.cs(),l.ic=new Map,l.sc=new Ln(Ge.comparator)}(t),t.ac=!1,yield jT(t.remoteStore,!1)}}),gA.apply(this,arguments)}function ox(n,e,t){return mA.apply(this,arguments)}function mA(){return mA=(0,me.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[];for(const l of e){let m;const v=r.ec.get(l);if(v&&0!==v.length){m=yield Vm(r.localStore,Mi(v[0]));for(const I of v){const S=r.tc.get(I),O=yield W1(r,S);O.snapshot&&u.push(O.snapshot)}}else{const I=yield FM(r.localStore,l);m=yield Vm(r.localStore,I),yield QT(r,ax(I),l,!1)}o.push(m)}return r.Zu.Go(u),o}),mA.apply(this,arguments)}function ax(n){return wm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function J1(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Ri()}function X1(n,e,t,r){return _A.apply(this,arguments)}function _A(){return _A=(0,me.Z)(function*(n,e,t,r){const o=Ze(n);if(o.ac)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=o.ec.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield LM(o.localStore,fv(u[0])),m=Xf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Tl(o,l,m);break}case"rejected":yield Um(o.localStore,e,!0),zm(o,e,r);break;default:et()}}),_A.apply(this,arguments)}function eR(n,e,t){return yA.apply(this,arguments)}function yA(){return yA=(0,me.Z)(function*(n,e,t){const r=vA(n);if(r.ac){for(const o of e){if(r.ec.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const u=yield FM(r.localStore,o),l=yield Vm(r.localStore,u);yield QT(r,ax(u),l.targetId,!1),GC(r.remoteStore,l)}for(const o of t)r.ec.has(o)&&(yield Um(r.localStore,o,!1).then(()=>{Hv(r.remoteStore,o),zm(r,o)}).catch(Ha))}}),yA.apply(this,arguments)}function vA(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j1.bind(null,e),e.Zu.Go=O1.bind(null,e.eventManager),e.Zu.lc=P1.bind(null,e.eventManager),e}function wA(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H1.bind(null,e),e}class ux{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.wt=jv(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return PM(this.persistence,new OM,e.initialUser,this.wt)}_c(e){return new MM(VC.Os,this.wt)}dc(e){return new jM}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class cx extends ux{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield wA(r.yc.syncEngine),yield jm(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return PM(this.persistence,new OM,e.initialUser,this.wt)}mc(e,t){return new qP(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new PD(t,this.persistence);return new rv(e.asyncQueue,r)}_c(e){const t=gT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?eo.withCacheSize(this.cacheSizeBytes):eo.DEFAULT;return new pT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,HM(),HC(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new jM}}class nR extends cx{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.yc.syncEngine;r.sharedClientState instanceof IT&&(r.sharedClientState.syncEngine={kr:Y1.bind(null,o),Mr:X1.bind(null,o),Or:eR.bind(null,o),Ri:J1.bind(null,o),Nr:K1.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var u=(0,me.Z)(function*(l){yield function Q1(n,e){return gA.apply(this,arguments)}(r.yc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}dc(e){const t=HM();if(!IT.V(t))throw new xe(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new IT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class EA{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>ix(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=z1.bind(null,r.syncEngine),yield jT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new x1}createDatastore(e){const t=jv(e.databaseInfo.databaseId),r=new p1(e.databaseInfo);return new _1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>ix(this.syncEngine,m,0),l=$M.V()?new $M:new d1,new v1(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,v,I){const S=new L1(r,o,u,l,m,v);return I&&(S.ac=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ze(t);Re("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Bm(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lx(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class zC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class rR{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new lr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,me.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),o=Number(r);isNaN(o)&&e.Pc(`length string (${r}) is not valid number`);const u=yield e.vc(o);return new R1(JSON.parse(u),t.length+o)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,me.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class iR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(u,l){const m=Ze(u),v=km(m.wt)+"/documents",I={documents:l.map(W=>Nm(m.wt,W))},S=yield m.ao("BatchGetDocuments",v,I,l.length),O=new Map;S.forEach(W=>{const J=function tM(n,e){return"found"in e?function(t,r){At(!!r.found);const o=Ya(t,r.found.name),u=Qr(r.found.updateTime),l=new li({mapValue:{fields:r.found.fields}});return on.newFoundDocument(o,u,l)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const o=Ya(t,r.missing),u=Qr(r.readTime);return on.newNoDocument(o,u)}(n,e):et()}(m.wt,W);O.set(J.key.toString(),J)});const V=[];return l.forEach(W=>{const J=O.get(W.toString());At(!!J),V.push(J)}),V}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ge.fromPath(o);e.mutations.push(new mv(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(o,u){const l=Ze(o),m=km(l.wt)+"/documents",v={writes:u.map(I=>i(l.wt,I))};yield l.ro("Commit",m,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?An.updateTime(t):An.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new xe(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return An.updateTime(t)}return An.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class sR{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Dc=r.maxAttempts,this.So=new DT(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,me.Z)(function*(){const t=new iR(e.datastore),r=e.xc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Nc(u)}))}).catch(o=>{e.Nc(o)})}))}xc(e){try{const t=this.updateFunction(e);return!qf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!_v(t)}return!1}}class oR{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Zn.UNAUTHENTICATED,this.clientId=rC.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,me.Z)(function*(m){Re("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Re("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Hm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function dx(n,e){return CA.apply(this,arguments)}function CA(){return CA=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(u){r.isEqual(u)||(yield RM(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),CA.apply(this,arguments)}function hx(n,e){return bA.apply(this,arguments)}function bA(){return bA=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield IA(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>YM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>YM(e.remoteStore,u)),n.onlineComponents=e}),bA.apply(this,arguments)}function IA(n){return DA.apply(this,arguments)}function DA(){return DA=(0,me.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield dx(n,new ux)),n.offlineComponents}),DA.apply(this,arguments)}function ZC(n){return TA.apply(this,arguments)}function TA(){return TA=(0,me.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield hx(n,new EA)),n.onlineComponents}),TA.apply(this,arguments)}function fx(n){return IA(n).then(e=>e.persistence)}function WC(n){return IA(n).then(e=>e.localStore)}function px(n){return ZC(n).then(e=>e.remoteStore)}function AA(n){return ZC(n).then(e=>e.syncEngine)}function Zm(n){return SA.apply(this,arguments)}function SA(){return SA=(0,me.Z)(function*(n){const e=yield ZC(n),t=e.eventManager;return t.onListen=V1.bind(null,e.syncEngine),t.onUnlisten=U1.bind(null,e.syncEngine),t}),SA.apply(this,arguments)}function gx(n,e,t={}){const r=new lr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,l,m,v){const I=new zC({next:O=>{u.enqueueAndForget(()=>zT(o,S));const V=O.docs.has(l);!V&&O.fromCache?v.reject(new xe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&O.fromCache&&m&&"server"===m.source?v.reject(new xe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(O)},error:O=>v.reject(O)}),S=new KT(dh(l.path),I,{includeMetadataChanges:!0,Du:!0});return GT(o,S)}(yield Zm(n),n.asyncQueue,e,t,r)})),r.promise}function mx(n,e,t={}){const r=new lr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,l,m,v){const I=new zC({next:O=>{u.enqueueAndForget(()=>zT(o,S)),O.fromCache&&"server"===m.source?v.reject(new xe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(O)},error:O=>v.reject(O)}),S=new KT(l,I,{includeMetadataChanges:!0,Du:!0});return GT(o,S)}(yield Zm(n),n.asyncQueue,e,t,r)})),r.promise}const _x=new Map;function MA(n,e,t){if(!t)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yx(n,e,t,r){if(!0===e&&!0===r)throw new xe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vx(n){if(!Ge.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wx(n){if(Ge.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function KC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Kt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=KC(n);throw new xe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ex(n,e){if(e<=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Cx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cx({}),this._settingsFrozen=!1,e instanceof na?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new xe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(o.options.projectId)}(e))}get app(){if(!this._app)throw new xe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new DD;switch(t.type){case"gapi":const r=t.client;return At(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new AD(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_x.get(e);t&&(Re("ComponentProvider","Removing Datastore"),_x.delete(e),t.terminate())}(this),Promise.resolve()}}class Vn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class uc extends ns{constructor(e,t,r){super(e,t,dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new Ge(e))}withConverter(e){return new uc(this.firestore,e,this._path)}}function bx(n,e,...t){if(n=(0,It.m9)(n),MA("collection","path",e),n instanceof Gv){const r=Zt.fromString(e,...t);return wx(r),new uc(n,null,r)}{if(!(n instanceof Vn||n instanceof uc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return wx(r),new uc(n.firestore,null,r)}}function YC(n,e,...t){if(n=(0,It.m9)(n),1===arguments.length&&(e=rC.I()),MA("doc","path",e),n instanceof Gv){const r=Zt.fromString(e,...t);return vx(r),new Vn(n,null,new Ge(r))}{if(!(n instanceof Vn||n instanceof uc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return vx(r),new Vn(n.firestore,n instanceof uc?n.converter:null,new Ge(r))}}function Ix(n,e){return n=(0,It.m9)(n),e=(0,It.m9)(e),(n instanceof Vn||n instanceof uc)&&(e instanceof Vn||e instanceof uc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Dx(n,e){return n=(0,It.m9)(n),e=(0,It.m9)(e),n instanceof ns&&e instanceof ns&&n.firestore===e.firestore&&Kf(n._query,e._query)&&n.converter===e.converter}class _R{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new DT(this,"async_queue_retry"),this.Kc=()=>{const t=HC();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=HC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=HC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new lr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!nc(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,tr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const o=HT.createAndSchedule(this,e,t,r,u=>this.Wc(u));return this.$c.push(o),o}Gc(){this.Bc&&et()}verifyOperationInProgress(){}zc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function xA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class yR{constructor(){this._progressObserver={},this._taskCompletionResolver=new lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends Gv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new _R,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Tx(this),this._firestoreClient.terminate()}}function kr(n){return n._firestoreClient||Tx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Tx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new lC(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new oR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Ax(n,e,t){const r=new lr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield dx(n,t),yield hx(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===ce.FAILED_PRECONDITION||l.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;pl("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function Sx(n){if(n._initialized||n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Al{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cc(Wn.fromBase64String(e))}catch(t){throw new xe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cc(Wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dp{constructor(e){this._methodName=e}}class QC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const SR=/^__.*__$/;class MR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new oc(e,this.data,this.fieldMask,t,this.fieldTransforms):new gh(e,this.data,t,this.fieldTransforms)}}class Mx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new oc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class JC{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Xc(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new JC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.sa(e),o}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ta({path:r,na:!1});return o.Xc(),o}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return tb(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(xx(this.Zc)&&SR.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class xR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||jv(e)}aa(e,t,r,o=!1){return new JC({Zc:e,methodName:t,ca:r,path:Dn.emptyPath(),na:!1,ua:o},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function hp(n){const e=n._freezeSettings(),t=jv(n._databaseId);return new xR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XC(n,e,t,r,o,u={}){const l=n.aa(u.merge||u.mergeFields?2:0,e,t,o);NA("Data must be an object, but it was:",l,r);const m=Rx(r,l);let v,I;if(u.merge)v=new Is(l.fieldMask),I=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const O of u.mergeFields){const V=kA(e,O,t);if(!l.contains(V))throw new xe(ce.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);kx(S,V)||S.push(V)}v=new Is(S),I=l.fieldTransforms.filter(O=>v.covers(O.field))}else v=null,I=l.fieldTransforms;return new MR(new li(m),v,I)}class qv extends dp{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qv}}function Ox(n,e,t){return new JC({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class OA extends dp{_toFieldTransform(e){return new fh(e.path,new Qf)}isEqual(e){return e instanceof OA}}class OR extends dp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Ox(this,e,!0),r=this.ha.map(u=>fp(u,t)),o=new Wa(r);return new fh(e.path,o)}isEqual(e){return this===e}}class PR extends dp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Ox(this,e,!0),r=this.ha.map(u=>fp(u,t)),o=new Cl(r);return new fh(e.path,o)}isEqual(e){return this===e}}class RR extends dp{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new bl(e.wt,yC(e.wt,this.la));return new fh(e.path,t)}isEqual(e){return this===e}}function PA(n,e,t,r){const o=n.aa(1,e,t);NA("Data must be an object, but it was:",o,r);const u=[],l=li.empty();_l(r,(v,I)=>{const S=eb(e,v,t);I=(0,It.m9)(I);const O=o.ia(S);if(I instanceof qv)u.push(S);else{const V=fp(I,O);null!=V&&(u.push(S),l.set(S,V))}});const m=new Is(u);return new Mx(l,m,o.fieldTransforms)}function RA(n,e,t,r,o,u){const l=n.aa(1,e,t),m=[kA(e,r,t)],v=[o];if(u.length%2!=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(kA(e,u[V])),v.push(u[V+1]);const I=[],S=li.empty();for(let V=m.length-1;V>=0;--V)if(!kx(I,m[V])){const W=m[V];let J=v[V];J=(0,It.m9)(J);const Me=l.ia(W);if(J instanceof qv)I.push(W);else{const Oe=fp(J,Me);null!=Oe&&(I.push(W),S.set(W,Oe))}}const O=new Is(I);return new Mx(S,O,l.fieldTransforms)}function Px(n,e,t,r=!1){return fp(t,n.aa(r?4:3,e))}function fp(n,e){if(Nx(n=(0,It.m9)(n)))return NA("Unsupported field value:",e,n),Rx(n,e);if(n instanceof dp)return function(t,r){if(!xx(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=fp(l,r.ra(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,It.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yC(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=gn.fromDate(t);return{timestampValue:np(r.wt,o)}}if(t instanceof gn){const o=new gn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:np(r.wt,o)}}if(t instanceof QC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof cc)return{bytesValue:AC(r.wt,t._byteString)};if(t instanceof Vn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.oa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:bv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${KC(t)}`)}(n,e)}function Rx(n,e){const t={};return mm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_l(n,(r,o)=>{const u=fp(o,e.ea(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Nx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof gn||n instanceof QC||n instanceof cc||n instanceof Vn||n instanceof dp)}function NA(n,e,t){if(!Nx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=KC(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function kA(n,e,t){if((e=(0,It.m9)(e))instanceof Al)return e._internalPath;if("string"==typeof e)return eb(n,e);throw tb("Field path arguments must be of type string or ",n,!1,void 0,t)}const NR=new RegExp("[~\\*/\\[\\]]");function eb(n,e,t){if(e.search(NR)>=0)throw tb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Al(...e.split("."))._internalPath}catch(r){throw tb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tb(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||l)&&(v+=" (found",u&&(v+=` in field ${r}`),l&&(v+=` in document ${o}`),v+=")"),new xe(ce.INVALID_ARGUMENT,m+n+v)}function kx(n,e){return n.some(t=>t.isEqual(e))}class zv{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kR extends zv{data(){return super.data()}}function nb(n,e){return"string"==typeof e?eb(n,e):e instanceof Al?e._internalPath:e._delegate._internalPath}class pp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sl extends zv{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Zv extends Sl{data(e={}){return super.data(e)}}class Eh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new pp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zv(this._firestore,this._userDataWriter,r.key,r,new pp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Zv(r._firestore,r._userDataWriter,l.doc.key,l.doc,new pp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new Zv(r._firestore,r._userDataWriter,l.doc.key,l.doc,new pp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,I=-1;return 0!==l.type&&(v=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),I=u.indexOf(l.doc.key)),{type:FR(l.type),doc:m,oldIndex:v,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function FR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function Fx(n,e){return n instanceof Sl&&e instanceof Sl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Eh&&e instanceof Eh&&n._firestore===e._firestore&&Dx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Lx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wv{}function Ch(n,...e){for(const t of e)n=t._apply(n);return n}class LR extends Wv{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=hp(e.firestore),r=function(o,u,l,m,v,I,S){let O;if(v.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){Hx(S,I);const W=[];for(const J of S)W.push($x(m,o,J));O={arrayValue:{values:W}}}else O=$x(m,o,S)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||Hx(S,I),O=Px(l,"where",S,"in"===I||"not-in"===I);const V=Yr.create(v,I,O);return function(W,J){if(J.ht()){const Oe=Em(W);if(null!==Oe&&!Oe.isEqual(J.field))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Oe.toString()}' and '${J.field.toString()}'`);const pt=Wf(W);null!==pt&&Gx(0,J.field,pt)}const Me=function(Oe,pt){for(const wt of Oe.filters)if(pt.indexOf(wt.op)>=0)return wt.op;return null}(W,function(Oe){switch(Oe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(J.op));if(null!==Me)throw new xe(ce.INVALID_ARGUMENT,Me===J.op?`Invalid query. You cannot use more than one '${J.op.toString()}' filter.`:`Invalid query. You cannot use '${J.op.toString()}' filters with '${Me.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ns(e.firestore,e.converter,function(o,u){const l=o.filters.concat([u]);return new za(o.path,o.collectionGroup,o.explicitOrderBy.slice(),l,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class UR extends Wv{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new lh(o,u);return function(m,v){if(null===Wf(m)){const I=Em(m);null!==I&&Gx(0,I,v.field)}}(r,l),l}(e._query,this.fa,this.wa);return new ns(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new za(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Vx extends Wv{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new ns(e.firestore,e.converter,bm(e._query,this.ma,this.ga))}}class Ux extends Wv{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=jx(e,this.type,this.ya,this.pa);return new ns(e.firestore,e.converter,(o=t,new za((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class Bx extends Wv{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=jx(e,this.type,this.ya,this.pa);return new ns(e.firestore,e.converter,(o=t,new za((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function jx(n,e,t,r){if(t[0]=(0,It.m9)(t[0]),t[0]instanceof zv)return function(o,u,l,m,v){if(!m)throw new xe(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const I=[];for(const S of hh(o))if(S.field.isKeyField())I.push(wl(u,m.key));else{const O=m.data.field(S.field);if(uC(O))throw new xe(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const V=S.field.canonicalString();throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}I.push(O)}return new El(I,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=hp(n.firestore);return function(u,l,m,v,I,S){const O=u.explicitOrderBy;if(I.length>O.length)throw new xe(ce.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let W=0;W<I.length;W++){const J=I[W];if(O[W].field.isKeyField()){if("string"!=typeof J)throw new xe(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof J}`);if(!Cm(u)&&-1!==J.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${J}' contains a slash.`);const Me=u.path.child(Zt.fromString(J));if(!Ge.isDocumentKey(Me))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Me}' is not because it contains an odd number of segments.`);const Oe=new Ge(Me);V.push(wl(l,Oe))}else{const Me=Px(m,v,J);V.push(Me)}}return new El(V,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function $x(n,e,t){if("string"==typeof(t=(0,It.m9)(t))){if(""===t)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cm(e)&&-1!==t.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zt.fromString(t));if(!Ge.isDocumentKey(r))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wl(n,new Ge(r))}if(t instanceof Vn)return wl(n,t._key);throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${KC(t)}.`)}function Hx(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Gx(n,e,t){if(!t.isEqual(e))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const ZR={maxAttempts:5};class FA{convertValue(e,t="none"){switch(sc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return _l(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new QC(Tn(e.latitude),Tn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Gf(e));default:return null}}convertTimestamp(e){const t=rc(e);return new gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);At(Le(r));const o=new na(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return o.isEqual(t)||tr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function rb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class WR extends FA{constructor(e){super(),this.firestore=e}convertBytes(e){return new cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}class qx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hp(e)}set(e,t,r){this._verifyNotCommitted();const o=bh(e,this._firestore),u=rb(o.converter,t,r),l=XC(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,An.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=bh(e,this._firestore);let l;return l="string"==typeof(t=(0,It.m9)(t))||t instanceof Al?RA(this._dataReader,"WriteBatch.update",u._key,t,r,o):PA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bh(e,this._firestore);return this._mutations=this._mutations.concat(new Jf(t._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bh(n,e){if((n=(0,It.m9)(n)).firestore!==e)throw new xe(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gp extends FA{constructor(e){super(),this.firestore=e}convertBytes(e){return new cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}function zx(n,e,t){n=Kt(n,Vn);const r=Kt(n.firestore,Kn),o=rb(n.converter,e,t);return Wm(r,[XC(hp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,An.none())])}function Zx(n,e,t,...r){n=Kt(n,Vn);const o=Kt(n.firestore,Kn),u=hp(o);let l;return l="string"==typeof(e=(0,It.m9)(e))||e instanceof Al?RA(u,"updateDoc",n._key,e,t,r):PA(u,"updateDoc",n._key,e),Wm(o,[l.toMutation(n._key,An.exists(!0))])}function Wx(n,...e){var t,r,o;n=(0,It.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||xA(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(xA(e[l])){const O=e[l];e[l]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[l+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[l+2]=null===(o=O.complete)||void 0===o?void 0:o.bind(O)}let v,I,S;if(n instanceof Vn)I=Kt(n.firestore,Kn),S=dh(n._key.path),v={next:O=>{e[l]&&e[l](LA(I,n,O))},error:e[l+1],complete:e[l+2]};else{const O=Kt(n,ns);I=Kt(O.firestore,Kn),S=O._query;const V=new gp(I);v={next:W=>{e[l]&&e[l](new Eh(I,V,O,W))},error:e[l+1],complete:e[l+2]},Lx(n._query)}return function(O,V,W,J){const Me=new zC(J),Oe=new KT(V,Me,W);return O.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return GT(yield Zm(O),Oe)})),()=>{Me.Tc(),O.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return zT(yield Zm(O),Oe)}))}}(kr(I),S,m,v)}function Wm(n,e){return function(t,r){const o=new lr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function B1(n,e,t){return eA.apply(this,arguments)}(yield AA(t),r,o)})),o.promise}(kr(n),e)}function LA(n,e,t){const r=t.docs.get(e._key),o=new gp(n);return new Sl(n,o,e._key,r,new pp(t.hasPendingWrites,t.fromCache),e.converter)}class iN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hp(e)}get(e){const t=bh(e,this._firestore),r=new WR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return et();const u=o[0];if(u.isFoundDocument())return new zv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new zv(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const o=bh(e,this._firestore),u=rb(o.converter,t,r),l=XC(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=bh(e,this._firestore);let l;return l="string"==typeof(t=(0,It.m9)(t))||t instanceof Al?RA(this._dataReader,"Transaction.update",u._key,t,r,o):PA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=bh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bh(e,this._firestore),r=new gp(this._firestore);return super.get(e).then(o=>new Sl(this._firestore,r,t._key,o._document,new pp(!1,!1),t.converter))}}function VA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Yx(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function Qx(){if(!function oC(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){fl=_s.SDK_VERSION,(0,_s._registerComponent)(new tf.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Kn(o,new Uf(t.getProvider("auth-internal")),new lm(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,_s.registerVersion)(eC,"3.4.14",n),(0,_s.registerVersion)(eC,"3.4.14","esm2017")}();class Kv{constructor(e){this._delegate=e}static fromBase64String(e){return Qx(),new Kv(cc.fromBase64String(e))}static fromUint8Array(e){return Yx(),new Kv(cc.fromUint8Array(e))}toBase64(){return Qx(),this._delegate.toBase64()}toUint8Array(){return Yx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function UA(n){return function fN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class pN{enableIndexedDbPersistence(e,t){return function wR(n,e){Sx(n=Kt(n,Kn));const t=kr(n),r=n._freezeSettings(),o=new EA;return Ax(t,o,new cx(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ER(n){Sx(n=Kt(n,Kn));const e=kr(n),t=n._freezeSettings(),r=new EA;return Ax(e,r,new nR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function CR(n){if(n._initialized&&!n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Ao.V())return Promise.resolve();const o=r+"main";yield Ao.delete(o)}),function(r){return t.apply(this,arguments)})(gT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Jx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof na||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function gR(n,e,t,r={}){var o;const u=(n=Kt(n,Gv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&pl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Zn.MOCK_USER;else{l=(0,It.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new xe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Zn(v)}n._authCredentials=new Qy(new To(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function IR(n){return function aR(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield fx(n),t=yield px(n);return e.setNetworkEnabled(!0),function(r){const o=Ze(r);return o.lu.delete(0),$v(o)}(t)}))}(kr(n=Kt(n,Kn)))}(this._delegate)}disableNetwork(){return function DR(n){return function uR(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield fx(n),t=yield px(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const u=Ze(o);u.lu.add(0),yield Bm(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(kr(n=Kt(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function bR(n){return function(e){const t=new lr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function G1(n,e){return sA.apply(this,arguments)}(yield AA(e),t)})),t.promise}(kr(n=Kt(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function rN(n,e){return function dR(n,e){const t=new zC(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Zm(n),o=t,Ze(r).Tu.add(o),void o.next();var r,o})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Zm(n),o=t,void Ze(r).Tu.delete(o);var r,o}))}}(kr(n=Kt(n,Kn)),xA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Km(this,bx(this._delegate,e))}catch(t){throw Ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new ia(this,YC(this._delegate,e))}catch(t){throw Ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new As(this,function mR(n,e){if(n=Kt(n,Gv),MA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ns(n,null,(t=e,new za(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function sN(n,e,t){n=Kt(n,Kn);const r=Object.assign(Object.assign({},ZR),t);return function(o){if(o.maxAttempts<1)throw new xe(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function hR(n,e,t){const r=new lr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const o=yield(u=n,ZC(u).then(l=>l.datastore));var u;new sR(n.asyncQueue,o,t,e,r).run()})),r.promise}(kr(n),o=>e(new iN(n,o)),r)}(this._delegate,t=>e(new Xx(this,t)))}batch(){return kr(this._delegate),new eO(new qx(this._delegate,e=>Wm(this._delegate,e)))}loadBundle(e){return function TR(n,e){const t=kr(n=Kt(n,Kn)),r=new yR;return function fR(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,I){if(v instanceof Uint8Array)return lx(v,I);if(v instanceof ArrayBuffer)return lx(new Uint8Array(v),I);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new rR(v,l);var v}(t,jv(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function tR(n,e,t){const r=Ze(n);var o;(o=(0,me.Z)(function*(u,l,m){try{const v=yield l.getMetadata();if(yield function(V,W){const J=Ze(V),Me=Qr(W.createTime);return J.persistence.runTransaction("hasNewerBundle","readonly",Oe=>J.Ds.getBundleMetadata(Oe,W.id)).then(Oe=>!!Oe&&Oe.createTime.compareTo(Me)>=0)}(u.localStore,v))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=v).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(XM(v));const I=new N1(v,u.localStore,l.wt);let S=yield l.fc();for(;S;){const V=yield I.Nu(S);V&&m._updateProgress(V),S=yield l.fc()}const O=yield I.complete();return yield Tl(u,O.Ou,void 0),yield function(V,W){const J=Ze(V);return J.persistence.runTransaction("Save bundle","readwrite",Me=>J.Ds.saveBundleMetadata(Me,W))}(u.localStore,v),m._completeWith(O.progress),Promise.resolve(O.Mu)}catch(v){return pl("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var V}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield AA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function AR(n,e){return function pR(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=Ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ds.getNamedQuery(u,r))}(yield WC(n),e)}))}(kr(n=Kt(n,Kn)),e).then(t=>t?new ns(n,null,t.query):null)}(this._delegate,e).then(t=>t?new As(this,t):null)}}class ib extends FA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kv(new cc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ia.forKey(t,this.firestore,null)}}class Xx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ib(e)}get(e){const t=_p(e);return this._delegate.get(t).then(r=>new Yv(this._firestore,new Sl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=_p(e);return r?(VA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=_p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=_p(e);return this._delegate.delete(t),this}}class eO{constructor(e){this._delegate=e}set(e,t,r){const o=_p(e);return r?(VA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=_p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=_p(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Zv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qv(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=mp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new mp(e,new ib(e),t),o.set(t,u)),u}}mp.INSTANCES=new WeakMap;class ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ib(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ia(t,new Vn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new ia(t,new Vn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Km(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Km(this.firestore,bx(this._delegate,e))}catch(t){throw Ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,It.m9)(e))instanceof Vn&&Ix(this._delegate,e)}set(e,t){t=VA("DocumentReference.set",t);try{return t?zx(this._delegate,e,t):zx(this._delegate,e)}catch(r){throw Ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Zx(this._delegate,e):Zx(this._delegate,e,t,...r)}catch(o){throw Ts(o,"updateDoc()","DocumentReference.update()")}}delete(){return function tN(n){return Wm(Kt(n.firestore,Kn),[new Jf(n._key,An.none())])}(this._delegate)}onSnapshot(...e){const t=tO(e),r=nO(e,o=>new Yv(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Wx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function YR(n){n=Kt(n,Vn);const e=Kt(n.firestore,Kn),t=kr(e),r=new gp(e);return function cR(n,e){const t=new lr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,l){try{const m=yield function(v,I){const S=Ze(v);return S.persistence.runTransaction("read document","readonly",O=>S.localDocuments.getDocument(O,I))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new xe(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Hm(m,`Failed to get document '${u} from cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield WC(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Sl(e,r,n._key,o,new pp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function QR(n){n=Kt(n,Vn);const e=Kt(n.firestore,Kn);return gx(kr(e),n._key,{source:"server"}).then(t=>LA(e,n,t))}(this._delegate):function KR(n){n=Kt(n,Vn);const e=Kt(n.firestore,Kn);return gx(kr(e),n._key).then(t=>LA(e,n,t))}(this._delegate),t.then(r=>new Yv(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ia(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function Ts(n,e,t){return n.message=n.message.replace(e,t),n}function tO(n){for(const e of n)if("object"==typeof e&&!UA(e))return e;return{}}function nO(n,e){var t,r;let o;return o=UA(n[0])?n[0]:UA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Yv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Fx(this._delegate,e._delegate)}}class Qv extends Yv{data(e){const t=this._delegate.data(e);return function ID(n,e){n||et()}(void 0!==t),t}}class As{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ib(e)}where(e,t,r){try{return new As(this.firestore,Ch(this._delegate,function VR(n,e,t){const r=e,o=nb("where",n);return new LR(o,r,t)}(e,t,r)))}catch(o){throw Ts(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new As(this.firestore,Ch(this._delegate,function BR(n,e="asc"){const t=e,r=nb("orderBy",n);return new UR(r,t)}(e,t)))}catch(r){throw Ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new As(this.firestore,Ch(this._delegate,function jR(n){return Ex("limit",n),new Vx("limit",n,"F")}(e)))}catch(t){throw Ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new As(this.firestore,Ch(this._delegate,function $R(n){return Ex("limitToLast",n),new Vx("limitToLast",n,"L")}(e)))}catch(t){throw Ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new As(this.firestore,Ch(this._delegate,function HR(...n){return new Ux("startAt",n,!0)}(...e)))}catch(t){throw Ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new As(this.firestore,Ch(this._delegate,function GR(...n){return new Ux("startAfter",n,!1)}(...e)))}catch(t){throw Ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new As(this.firestore,Ch(this._delegate,function qR(...n){return new Bx("endBefore",n,!1)}(...e)))}catch(t){throw Ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new As(this.firestore,Ch(this._delegate,function zR(...n){return new Bx("endAt",n,!0)}(...e)))}catch(t){throw Ts(t,"endAt()","Query.endAt()")}}isEqual(e){return Dx(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function XR(n){n=Kt(n,ns);const e=Kt(n.firestore,Kn),t=kr(e),r=new gp(e);return function lR(n,e){const t=new lr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,l){try{const m=yield BC(o,u,!0),v=new nx(u,m.ji),I=v.Ku(m.documents),S=v.applyChanges(I,!1);l.resolve(S.snapshot)}catch(m){const v=Hm(m,`Failed to execute query '${u} against cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield WC(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Eh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function eN(n){n=Kt(n,ns);const e=Kt(n.firestore,Kn),t=kr(e),r=new gp(e);return mx(t,n._query,{source:"server"}).then(o=>new Eh(e,r,n,o))}(this._delegate):function JR(n){n=Kt(n,ns);const e=Kt(n.firestore,Kn),t=kr(e),r=new gp(e);return Lx(n._query),mx(t,n._query).then(o=>new Eh(e,r,n,o))}(this._delegate),t.then(r=>new BA(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=tO(e),r=nO(e,o=>new BA(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Wx(this._delegate,t,r)}withConverter(e){return new As(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}class mN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class BA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new As(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Qv(this._firestore,r))})}isEqual(e){return Fx(this._delegate,e._delegate)}}class Km extends As{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ia(this.firestore,e):null}doc(e){try{return new ia(this.firestore,void 0===e?YC(this._delegate):YC(this._delegate,e))}catch(t){throw Ts(t,"doc()","CollectionReference.doc()")}}add(e){return function nN(n,e){const t=Kt(n.firestore,Kn),r=YC(n),o=rb(n.converter,e);return Wm(t,[XC(hp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ia(this.firestore,t))}isEqual(e){return Ix(this._delegate,e._delegate)}withConverter(e){return new Km(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function _p(n){return Kt(n,Vn)}class jA{constructor(...e){this._delegate=new Al(...e)}static documentId(){return new jA(Dn.keyField().canonicalString())}isEqual(e){return(e=(0,It.m9)(e))instanceof Al&&this._delegate._internalPath.isEqual(e._internalPath)}}class yp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function aN(){return new OA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new yp(e)}static delete(){const e=function oN(){return new qv("deleteField")}();return e._methodName="FieldValue.delete",new yp(e)}static arrayUnion(...e){const t=function uN(...n){return new OR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new yp(t)}static arrayRemove(...e){const t=function cN(...n){return new PR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new yp(t)}static increment(e){const t=function lN(n){return new RR("increment",n)}(e);return t._methodName="FieldValue.increment",new yp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _N={Firestore:Jx,GeoPoint:QC,Timestamp:gn,Blob:Kv,Transaction:Xx,WriteBatch:eO,DocumentReference:ia,DocumentSnapshot:Yv,Query:As,QueryDocumentSnapshot:Qv,QuerySnapshot:BA,CollectionReference:Km,FieldPath:jA,FieldValue:yp,setLogLevel:function gN(n){!function tC(n){$a.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function rO(n,e){return function wN(n,e=Ad.z){return new On.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function $A(n,e){return rO(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function sb(n,e){return $A(n,e).pipe(qi(void 0),kg(),(0,Tt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const v=o.find(S=>S.doc.ref.isEqual(l.ref)),I=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(l.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(l.metadata)||!v&&I&&JSON.stringify(I.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function iO(n,e,t){return sb(n,t).pipe(wi((r,o)=>function CN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function bN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return HA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return HA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return HA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Yw(n,e=Hi.y){return n=null!=n?n:Qw,(0,Gn.e)((t,r)=>{let o,u=!0;t.subscribe((0,ar.x)(r,l=>{const m=e(l);(u||!n(o,m))&&(u=!1,o=m,r.next(l))}))})}(),(0,Tt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function HA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function sO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function vN(n){(function yN(n,e){n.INTERNAL.registerComponent(new tf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},_N)))})(n,(e,t)=>new Jx(e,t,new pN)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(I0.Z);class oO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=sb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(qi(void 0),kg(),ln(([r,o])=>o.length>0||!r),(0,Tt.U)(([r,o])=>o),Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sO(e);return iO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return $A(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Fn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(Fn.iC)}add(e){return this.ref.add(e)}doc(e){return new aO(this.ref.doc(e),this.afs)}}class aO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=uO(r,t);return new oO(o,u,this.afs)}snapshotChanges(){return function EN(n,e){return rO(n,e).pipe(qi(void 0),kg(),(0,Tt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nn.D)(this.ref.get(e)).pipe(Fn.iC)}}class IN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?sb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ln(t=>t.length>0),Fn.iC):sb(this.query,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sO(e);return iO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return $A(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Fn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(Fn.iC)}}const DN=new d.OlP("angularfire2.enableFirestorePersistence"),TN=new d.OlP("angularfire2.firestore.persistenceSettings"),AN=new d.OlP("angularfire2.firestore.settings"),SN=new d.OlP("angularfire2.firestore.use-emulator");function uO(n,e=(t=>t)){return{query:e(n),ref:n}}let MN=(()=>{class n{constructor(t,r,o,u,l,m,v,I,S,O,V,W,J,Me,Oe,pt,wt){this.schedulers=v;const gt=(0,Ii.on)(t,m,r),st=S;O&&iy(gt,m,V,J,Me,Oe,W,pt),[this.firestore,this.persistenceEnabled$]=(0,Ii.cc)(`${gt.name}.firestore`,"AngularFirestore",gt.name,()=>{const Ct=m.runOutsideAngular(()=>gt.firestore());if(u&&Ct.settings(u),st&&Ct.useEmulator(...st),o&&!No(l)){const Pt=()=>{try{return(0,nn.D)(Ct.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(nr){return"undefined"!=typeof console&&console.warn(nr),nt(!1)}};return[Ct,m.runOutsideAngular(Pt)]}return[Ct,nt(!1)]},[u,st,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=uO(o,r),m=this.schedulers.ngZone.run(()=>u);return new oO(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new IN(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new aO(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ii.Dh),d.LFG(Ii.xv,8),d.LFG(DN,8),d.LFG(AN,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Fn.HU),d.LFG(TN,8),d.LFG(SN,8),d.LFG(_f,8),d.LFG(Zw,8),d.LFG(Ww,8),d.LFG(ty,8),d.LFG(Ng,8),d.LFG(ny,8),d.LFG(ry,8),d.LFG(Mg,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),cO=(()=>{class n{constructor(t,r){this.afAuth=t,this.afs=r}signIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}signUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r)}signOut(){return this.afAuth.signOut()}forgotPassword(t){return this.afAuth.sendPasswordResetEmail(t)}setUserData(t,r){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,fullName:r},{merge:!0})}getAuthState(){return this.afAuth.authState}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_f),d.LFG(MN))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xN(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",11),d.NdJ("click",function(){return d.CHM(t),d.oxw().goToLogin()}),d._uU(1,"Login"),d.qZA()}}function ON(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",11),d.NdJ("click",function(){return d.CHM(t),d.oxw().logout()}),d._uU(1,"Logout"),d.qZA()}}const PN=function(n){return{white:n}};let GA=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.isLoggedIn=!1,this.isWhite=!1}ngOnInit(){this.isLoggedIn="true"===localStorage.getItem("isLoggedIn")}goToHome(){this.router.navigate(["home"])}goToLogin(){this.router.navigate(["login"])}goToSell(){this.router.navigate(["sell"])}logout(){this.auth.signOut().then(()=>{this.isLoggedIn=!1,localStorage.removeItem("isLoggedIn"),this.router.navigate(["home"])})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(kn),d.Y36(cO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-header"]],inputs:{isWhite:"isWhite"},decls:23,vars:5,consts:[[1,"header",3,"ngClass"],[1,"left"],[1,"logo",3,"click"],[1,"nav-item","shop"],[1,"shop-wrapper"],[1,"shop-item"],[1,"shop-wrapper-arrow"],[1,"nav-item"],[1,"right"],["class","nav-item",3,"click",4,"ngIf"],[1,"nav-item","border",3,"click"],[1,"nav-item",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2),d.NdJ("click",function(){return r.goToHome()}),d._uU(3,"stillred"),d.qZA(),d.TgZ(4,"div",3),d._uU(5," Shop "),d.TgZ(6,"div",4)(7,"div",5),d._uU(8,"Sarees"),d.qZA(),d.TgZ(9,"div",5),d._uU(10,"Lahenga"),d.qZA(),d.TgZ(11,"div",5),d._uU(12,"Suits / Anarkali Suits"),d.qZA(),d.TgZ(13,"div",5),d._uU(14,"Gowns"),d.qZA()(),d._UZ(15,"div",6),d.qZA(),d.TgZ(16,"div",7),d._uU(17,"Help"),d.qZA()(),d.TgZ(18,"div",8),d.YNc(19,xN,2,0,"div",9),d.YNc(20,ON,2,0,"div",9),d.TgZ(21,"div",10),d.NdJ("click",function(){return r.goToSell()}),d._uU(22,"Sell"),d.qZA()()()),2&t&&(d.Q6J("ngClass",d.VKq(3,PN,r.isWhite)),d.xp6(19),d.Q6J("ngIf",!r.isLoggedIn),d.xp6(1),d.Q6J("ngIf",r.isLoggedIn))},directives:[mi,$n],styles:['.header[_ngcontent-%COMP%]{position:absolute;top:0px;left:0px;width:100vw;height:70px;display:flex;align-items:center;justify-content:space-between;color:#fff;font-size:18px;font-weight:500}.header[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:50%;display:flex;align-items:center}.header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{justify-content:right;margin-right:50px}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-left:100px;margin-right:50px;cursor:pointer}.header[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{font-size:16px;margin-right:50px;cursor:pointer}.header[_ngcontent-%COMP%]   .nav-item.border[_ngcontent-%COMP%]{border:1px solid white;border-radius:4px;padding:8px 12px}.header[_ngcontent-%COMP%]   .nav-item.shop[_ngcontent-%COMP%]{margin-top:45px;height:70px}.header[_ngcontent-%COMP%]   .nav-item.shop[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]{display:none;position:absolute;top:65px;left:200px;width:200px;height:150px;background-color:#fff;border-radius:4px;padding:5px 20px;color:#000}.header[_ngcontent-%COMP%]   .nav-item.shop[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item[_ngcontent-%COMP%]{margin:10px 0;font-size:15px;color:#3f3f3f;cursor:pointer}.header[_ngcontent-%COMP%]   .nav-item.shop[_ngcontent-%COMP%]   .shop-wrapper[_ngcontent-%COMP%]   .shop-item[_ngcontent-%COMP%]:hover{color:#000}.header[_ngcontent-%COMP%]   .nav-item.shop[_ngcontent-%COMP%]   .shop-wrapper-arrow[_ngcontent-%COMP%]{display:none;position:absolute;top:55px;left:220px;content:"";border-width:11px;width:0;height:0;border-color:transparent;border-bottom-color:#fff;border-style:solid;border-top-width:0}.header[_ngcontent-%COMP%]   .nav-item.shop[_ngcontent-%COMP%]:hover   .shop-wrapper[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .nav-item.shop[_ngcontent-%COMP%]:hover   .shop-wrapper-arrow[_ngcontent-%COMP%]{display:block}.header.white[_ngcontent-%COMP%]{color:#000}.header.white[_ngcontent-%COMP%]   .nav-item.border[_ngcontent-%COMP%]{border:1px solid #000}']}),n})(),lO=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),vp=(()=>{class n extends lO{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const lc=new d.OlP("NgValueAccessor"),kN={provide:lc,useExisting:(0,d.Gpc)(()=>Jv),multi:!0},LN=new d.OlP("CompositionEventMode");let Jv=(()=>{class n extends lO{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function FN(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(LN,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([kN]),d.qOj]}),n})();const rs=new d.OlP("NgValidators"),Dh=new d.OlP("NgAsyncValidators");function ob(n){return null}function EO(n){return null!=n}function CO(n){const e=(0,d.QGY)(n)?(0,nn.D)(n):n;return(0,d.CqO)(e),e}function bO(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function IO(n,e){return e.map(t=>t(n))}function DO(n){return n.map(e=>function UN(n){return!n.validate}(e)?e:t=>e.validate(t))}function qA(n){return null!=n?function TO(n){if(!n)return null;const e=n.filter(EO);return 0==e.length?null:function(t){return bO(IO(t,e))}}(DO(n)):null}function zA(n){return null!=n?function AO(n){if(!n)return null;const e=n.filter(EO);return 0==e.length?null:function(t){return function RN(...n){const e=(0,ma.jO)(n),{args:t,keys:r}=wn(n),o=new On.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let v=l,I=l;for(let S=0;S<l;S++){let O=!1;(0,Ea.Xf)(t[S]).subscribe((0,ar.x)(u,V=>{O||(O=!0,I--),m[S]=V},()=>v--,void 0,()=>{(!v||!O)&&(I||u.next(r?ya(r,m):m),u.complete())}))}});return e?o.pipe(Tc(e)):o}(IO(t,e).map(CO)).pipe((0,Tt.U)(bO))}}(DO(n)):null}function SO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ZA(n){return n?Array.isArray(n)?n:[n]:[]}function ab(n,e){return Array.isArray(n)?n.includes(e):n===e}function OO(n,e){const t=ZA(e);return ZA(n).forEach(o=>{ab(t,o)||t.push(o)}),t}function PO(n,e){return ZA(e).filter(t=>!ab(n,t))}class RO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Th extends RO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ss extends RO{get formDirective(){return null}get path(){return null}}class NO{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let WA=(()=>{class n extends NO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Th,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),KA=(()=>{class n extends NO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ss,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function Xv(n,e){JA(n,e),e.valueAccessor.writeValue(n.value),function ZN(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&FO(n,e)})}(n,e),function KN(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function WN(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&FO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function zN(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function db(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function JA(n,e){const t=function MO(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(SO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function xO(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(SO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();db(e._rawValidators,o),db(e._rawAsyncValidators,o)}function FO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function tS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const e0="VALID",fb="INVALID",Ym="PENDING",t0="DISABLED";function rS(n){return(pb(n)?n.validators:n)||null}function BO(n){return Array.isArray(n)?qA(n):n||null}function iS(n,e){return(pb(e)?e.asyncValidators:n)||null}function jO(n){return Array.isArray(n)?zA(n):n||null}function pb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const sS=n=>n instanceof aS;function HO(n){return(n=>n instanceof zO)(n)?n.value:n.getRawValue()}function GO(n,e){const t=sS(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function qO(n,e){sS(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new d.vHH(1002,"")})}class oS{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=BO(this._rawValidators),this._composedAsyncValidatorFn=jO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===e0}get invalid(){return this.status===fb}get pending(){return this.status==Ym}get disabled(){return this.status===t0}get enabled(){return this.status!==t0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=BO(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=jO(e)}addValidators(e){this.setValidators(OO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(OO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(PO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(PO(e,this._rawAsyncValidators))}hasValidator(e){return ab(this._rawValidators,e)}hasAsyncValidator(e){return ab(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ym,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=t0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=e0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===e0||this.status===Ym)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?t0:e0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ym,this._hasOwnPendingAsyncValidator=!0;const t=CO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function XN(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=sS(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof tk)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?t0:this.errors?fb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ym)?Ym:this._anyControlsHaveStatus(fb)?fb:e0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class zO extends oS{constructor(e=null,t,r){super(rS(t),iS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pb(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){tS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){tS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class aS extends oS{constructor(e,t,r){super(rS(t),iS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){qO(this,e),Object.keys(e).forEach(r=>{GO(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=HO(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class tk extends oS{constructor(e,t,r){super(rS(t),iS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){qO(this,e),e.forEach((r,o)=>{GO(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>HO(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const nk={provide:Ss,useExisting:(0,d.Gpc)(()=>r0)},n0=(()=>Promise.resolve(null))();let r0=(()=>{class n extends Ss{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new aS({},qA(t),zA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){n0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Xv(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){n0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){n0.then(()=>{const r=this._findContainer(t.path),o=new aS({});(function LO(n,e){JA(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){n0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){n0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function UO(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(rs,10),d.Y36(Dh,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([nk]),d.qOj]}),n})();const ik={provide:Th,useExisting:(0,d.Gpc)(()=>gb)},KO=(()=>Promise.resolve(null))();let gb=(()=>{class n extends Th{constructor(t,r,o,u,l){super(),this._changeDetectorRef=l,this.control=new zO,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function eS(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Jv?t=u:function JN(n){return Object.getPrototypeOf(n.constructor)===vp}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function XA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Xv(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){KO.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;KO.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function cb(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ss,9),d.Y36(rs,10),d.Y36(Dh,10),d.Y36(lc,10),d.Y36(d.sBO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([ik]),d.qOj,d.TTD]}),n})(),uS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),QO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();let wp=(()=>{class n{constructor(){this._validator=ob}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ob,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const Ak={provide:rs,useExisting:(0,d.Gpc)(()=>mb),multi:!0};let mb=(()=>{class n extends wp{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function oP(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>function vO(n){return e=>function hO(n){return null!=n&&"number"==typeof n.length}(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[d._Bn([Ak]),d.qOj]}),n})(),Mk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[QO]]}),n})(),xk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Mk]}),n})(),pP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-spinner"]],decls:4,vars:0,consts:[[1,"lds-facebook"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"div")(2,"div")(3,"div"),d.qZA())},styles:[".lds-facebook[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;position:absolute;left:16px;width:8px;background:#000;animation:lds-facebook 1.2s cubic-bezier(0,.5,.5,1) infinite}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){left:16px;animation-delay:-.24s}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:32px;animation-delay:-.12s}.lds-facebook[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:48px;animation-delay:0}@keyframes lds-facebook{0%{top:8px;height:64px}50%,to{top:24px;height:32px}}"]}),n})();function Ok(n,e){if(1&n&&(d.TgZ(0,"div",33),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.hij(" ",t.titleError," ")}}function Pk(n,e){if(1&n&&(d.TgZ(0,"div",33),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.hij(" ",t.askingPriceError," ")}}function Rk(n,e){if(1&n&&(d.TgZ(0,"div",33),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.uploadErr)}}function Nk(n,e){1&n&&(d.TgZ(0,"div",27),d._uU(1,"Add a photo"),d.qZA())}function kk(n,e){1&n&&(d.TgZ(0,"div",34),d._UZ(1,"app-spinner"),d.qZA())}function Fk(n,e){if(1&n&&(d.TgZ(0,"div",35),d._UZ(1,"img",36),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("src",t.pic1Url,d.LSH)}}function Lk(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",37),d.NdJ("click",function(){return d.CHM(t),d.oxw().deleteImage(1)}),d._uU(1,"x"),d.qZA()}}function Vk(n,e){1&n&&(d.TgZ(0,"div",34),d._UZ(1,"app-spinner"),d.qZA())}function Uk(n,e){if(1&n&&(d.TgZ(0,"div",35),d._UZ(1,"img",36),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("src",t.pic2Url,d.LSH)}}function Bk(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",37),d.NdJ("click",function(){return d.CHM(t),d.oxw().deleteImage(2)}),d._uU(1,"x"),d.qZA()}}function jk(n,e){1&n&&(d.TgZ(0,"div",34),d._UZ(1,"app-spinner"),d.qZA())}function $k(n,e){if(1&n&&(d.TgZ(0,"div",35),d._UZ(1,"img",36),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("src",t.pic3Url,d.LSH)}}function Hk(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",37),d.NdJ("click",function(){return d.CHM(t),d.oxw().deleteImage(3)}),d._uU(1,"x"),d.qZA()}}function Gk(n,e){1&n&&(d.TgZ(0,"div",34),d._UZ(1,"app-spinner"),d.qZA())}function qk(n,e){if(1&n&&(d.TgZ(0,"div",35),d._UZ(1,"img",36),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("src",t.pic4Url,d.LSH)}}function zk(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",37),d.NdJ("click",function(){return d.CHM(t),d.oxw().deleteImage(4)}),d._uU(1,"x"),d.qZA()}}const _b=function(n){return{active:n}};let Zk=(()=>{class n{constructor(t){this.storage=t,this.title="",this.desc="",this.size="",this.retailPrice="",this.askingPrice="",this.titleError="",this.askingPriceError="",this.activeImage=1,this.pic1Url="",this.pic2Url="",this.pic3Url="",this.pic4Url="",this.uploadSpinner=!1,this.uploadErr=""}ngOnInit(){}createListing(){this.titleError="",this.askingPriceError="",0===this.title.trim().length?this.titleError="Title is required":0===this.askingPrice.trim().length&&(this.askingPriceError="Asking Price is required")}onFileSelected(t){var r=Date.now();const o=t.target.files[0],l=this.storage.ref(`images/${r}`),m=this.storage.upload(`images/${r}`,o);this.uploadSpinner=!0,this.uploadErr="",m.snapshotChanges().pipe(Ph(()=>{l.getDownloadURL().subscribe(v=>{1===this.activeImage?(this.pic1Url=v,this.activeImage=2):2===this.activeImage?(this.pic2Url=v,this.activeImage=3):3===this.activeImage?(this.pic3Url=v,this.activeImage=4):(this.pic4Url=v,this.activeImage=5),this.uploadSpinner=!1})})).subscribe()}deleteImage(t){let r=0;4===t?this.pic4Url="":3===t?(this.pic3Url=this.pic4Url,this.pic4Url=""):2===t?(this.pic2Url=this.pic3Url,this.pic3Url=this.pic4Url,this.pic4Url=""):1===t&&(this.pic1Url=this.pic2Url,this.pic2Url=this.pic3Url,this.pic3Url=this.pic4Url,this.pic4Url=""),""!==this.pic1Url&&r++,""!==this.pic2Url&&r++,""!==this.pic3Url&&r++,""!==this.pic4Url&&r++,this.activeImage=r+1}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($w))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-add-item"]],decls:82,vars:37,consts:[[1,"add-item-container"],[3,"isWhite"],[1,"banner"],["src","assets/bg-images/bg4.jpg","alt",""],[1,"form-container"],[1,"left"],[1,"form-group"],[1,"label"],[1,"form-control"],["type","text","name","title","maxlength","50",3,"ngModel","ngModelChange"],["class","error",4,"ngIf"],["name","desc","rows","4","maxlength","200"],["type","text","name","size","maxlength","25",3,"ngModel","ngModelChange"],[1,"form-control","input-wrapper"],[1,"currency"],["type","text","name","retailPrice","maxlength","10",3,"ngModel","ngModelChange"],["type","text","name","askingPrice","maxlength","10",3,"ngModel","ngModelChange"],[1,"right"],[1,"photos"],[1,"photo-container",3,"ngClass"],["class","text",4,"ngIf"],[1,"hidden-input"],["type","file","name","image","autocomplete","off",3,"disabled","change"],["photo1",""],["class","spinner-container",4,"ngIf"],["class","preview-container",4,"ngIf"],["class","close-container",3,"click",4,"ngIf"],[1,"text"],["photo2",""],["photo3",""],["photo4",""],[1,"btn-container"],[1,"createBtn",3,"click"],[1,"error"],[1,"spinner-container"],[1,"preview-container"],["alt","",3,"src"],[1,"close-container",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"app-header",1),d.TgZ(2,"div",2),d._UZ(3,"img",3),d.qZA(),d.TgZ(4,"div",4)(5,"form")(6,"div",5)(7,"div",6)(8,"div",7),d._uU(9,"Title"),d.qZA(),d.TgZ(10,"div",8)(11,"input",9),d.NdJ("ngModelChange",function(u){return r.title=u}),d.qZA()(),d.YNc(12,Ok,2,1,"div",10),d.qZA(),d.TgZ(13,"div",6)(14,"div",7),d._uU(15,"About the dress (Optional)"),d.qZA(),d.TgZ(16,"div",8),d._UZ(17,"textarea",11),d.qZA()(),d.TgZ(18,"div",6)(19,"div",7),d._uU(20,"Size (Optional)"),d.qZA(),d.TgZ(21,"div",8)(22,"input",12),d.NdJ("ngModelChange",function(u){return r.size=u}),d.qZA()()(),d.TgZ(23,"div",6)(24,"div",7),d._uU(25,"Retail Price (Optional)"),d.qZA(),d.TgZ(26,"div",13)(27,"div",14),d._uU(28,"AUD"),d.qZA(),d.TgZ(29,"input",15),d.NdJ("ngModelChange",function(u){return r.retailPrice=u}),d.qZA()()(),d.TgZ(30,"div",6)(31,"div",7),d._uU(32,"Asking Price"),d.qZA(),d.TgZ(33,"div",13)(34,"div",14),d._uU(35,"AUD"),d.qZA(),d.TgZ(36,"input",16),d.NdJ("ngModelChange",function(u){return r.askingPrice=u}),d.qZA()(),d.YNc(37,Pk,2,1,"div",10),d.qZA()(),d.TgZ(38,"div",17)(39,"div",6)(40,"div",7),d._uU(41,"Photos (Optional)"),d.qZA(),d.YNc(42,Rk,2,1,"div",10),d.TgZ(43,"div",18)(44,"div",19),d.YNc(45,Nk,2,0,"div",20),d.TgZ(46,"div",21)(47,"input",22,23),d.NdJ("change",function(u){return r.onFileSelected(u)}),d.qZA()(),d.YNc(49,kk,2,0,"div",24),d.YNc(50,Fk,2,1,"div",25),d.YNc(51,Lk,2,0,"div",26),d.qZA(),d.TgZ(52,"div",19)(53,"div",27),d._uU(54,"Add a photo"),d.qZA(),d.TgZ(55,"div",21)(56,"input",22,28),d.NdJ("change",function(u){return r.onFileSelected(u)}),d.qZA()(),d.YNc(58,Vk,2,0,"div",24),d.YNc(59,Uk,2,1,"div",25),d.YNc(60,Bk,2,0,"div",26),d.qZA(),d.TgZ(61,"div",19)(62,"div",27),d._uU(63,"Add a photo"),d.qZA(),d.TgZ(64,"div",21)(65,"input",22,29),d.NdJ("change",function(u){return r.onFileSelected(u)}),d.qZA()(),d.YNc(67,jk,2,0,"div",24),d.YNc(68,$k,2,1,"div",25),d.YNc(69,Hk,2,0,"div",26),d.qZA(),d.TgZ(70,"div",19)(71,"div",27),d._uU(72,"Add a photo"),d.qZA(),d.TgZ(73,"div",21)(74,"input",22,30),d.NdJ("change",function(u){return r.onFileSelected(u)}),d.qZA()(),d.YNc(76,Gk,2,0,"div",24),d.YNc(77,qk,2,1,"div",25),d.YNc(78,zk,2,0,"div",26),d.qZA()()(),d.TgZ(79,"div",31)(80,"button",32),d.NdJ("click",function(){return r.createListing()}),d._uU(81," Create Listing "),d.qZA()()()()()()),2&t&&(d.xp6(1),d.Q6J("isWhite",!0),d.xp6(10),d.Q6J("ngModel",r.title),d.xp6(1),d.Q6J("ngIf",r.titleError.length>0),d.xp6(10),d.Q6J("ngModel",r.size),d.xp6(7),d.Q6J("ngModel",r.retailPrice),d.xp6(7),d.Q6J("ngModel",r.askingPrice),d.xp6(1),d.Q6J("ngIf",r.askingPriceError.length>0),d.xp6(5),d.Q6J("ngIf",r.uploadErr.length>0),d.xp6(2),d.Q6J("ngClass",d.VKq(29,_b,1===r.activeImage)),d.xp6(1),d.Q6J("ngIf",0===r.pic1Url.length),d.xp6(2),d.Q6J("disabled",1!==r.activeImage),d.xp6(2),d.Q6J("ngIf",1===r.activeImage&&r.uploadSpinner),d.xp6(1),d.Q6J("ngIf",r.pic1Url.length>0),d.xp6(1),d.Q6J("ngIf",r.pic1Url.length>0),d.xp6(1),d.Q6J("ngClass",d.VKq(31,_b,2===r.activeImage)),d.xp6(4),d.Q6J("disabled",2!==r.activeImage),d.xp6(2),d.Q6J("ngIf",2===r.activeImage&&r.uploadSpinner),d.xp6(1),d.Q6J("ngIf",r.pic2Url.length>0),d.xp6(1),d.Q6J("ngIf",r.pic2Url.length>0),d.xp6(1),d.Q6J("ngClass",d.VKq(33,_b,3===r.activeImage)),d.xp6(4),d.Q6J("disabled",3!==r.activeImage),d.xp6(2),d.Q6J("ngIf",3===r.activeImage&&r.uploadSpinner),d.xp6(1),d.Q6J("ngIf",r.pic3Url.length>0),d.xp6(1),d.Q6J("ngIf",r.pic3Url.length>0),d.xp6(1),d.Q6J("ngClass",d.VKq(35,_b,4===r.activeImage)),d.xp6(4),d.Q6J("disabled",4!==r.activeImage),d.xp6(2),d.Q6J("ngIf",4===r.activeImage&&r.uploadSpinner),d.xp6(1),d.Q6J("ngIf",r.pic4Url.length>0),d.xp6(1),d.Q6J("ngIf",r.pic4Url.length>0))},directives:[GA,uS,KA,r0,Jv,mb,WA,gb,$n,mi,pP],styles:[".add-item-container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;position:relative}.add-item-container[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]{width:100%;height:500px}.add-item-container[_ngcontent-%COMP%]   .banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{position:absolute;top:300px;left:15vw;width:70vw;height:calc(100vh - 350px);background-color:#fff;box-shadow:1px 1px 20px -5px #747474;border-radius:4px}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;padding:40px}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:30%;border-right:1px solid rgba(0,0,0,.15);padding-right:40px}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{font-size:16px;font-weight:400;line-height:24px;margin-bottom:20px;width:100%}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-bottom:5px}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid rgba(0,0,0,.15);color:#495057;outline:none;padding:8px 12px;border-radius:4px;font-size:18px}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .currency[_ngcontent-%COMP%]{width:50px;height:100%;position:absolute;top:0px;left:0px;background:#e9ecef;display:flex;align-items:center;justify-content:center}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:58px}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;height:100px}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red;font-size:12px;margin-top:3px}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding-left:40px;width:70%;position:relative}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container[_ngcontent-%COMP%]{width:200px;height:140px;margin:10px 10px 0 0;background-color:#e9ecef;display:flex;align-items:center;justify-content:center;position:relative}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container[_ngcontent-%COMP%]   .hidden-input[_ngcontent-%COMP%]{position:absolute;top:0px;left:0px;width:100%;height:100%}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container[_ngcontent-%COMP%]   .hidden-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;opacity:0;cursor:pointer}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container[_ngcontent-%COMP%]   .hidden-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{cursor:unset}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:none}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container.active[_ngcontent-%COMP%]{border:4px dashed #e9ecef;background-color:#fff;cursor:pointer}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container.active[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:block;color:#606060}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{position:absolute;background:white;width:100%;text-align:center}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]{position:absolute;top:0px;left:0px;width:100%;height:100%}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container[_ngcontent-%COMP%]   .close-container[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;width:20px;height:20px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;background-color:#0003;font-size:13px}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .photo-container[_ngcontent-%COMP%]:hover   .close-container[_ngcontent-%COMP%]{background-color:#000c}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{position:absolute;bottom:0px;right:20px}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]   .createBtn[_ngcontent-%COMP%]{width:175px;height:40px;padding:8px 12px;border-radius:4px;font-size:18px;margin-top:20px;border:0px;background-color:#2699fb;color:#fff;cursor:pointer}.add-item-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{position:absolute;right:15px;top:0px;color:red}"]}),n})(),Wk=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:13,vars:1,consts:[[1,"home-container"],[1,"overlay"],["src","assets/bg-images/bg3.jpg","alt","",1,"bg-pic"],[3,"isWhite"],[1,"title-search"],[1,"title"],[1,"sub-title"],[1,"search"],["type","text","placeholder","Search",1,"search-input"],[1,"search-btn"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"div",1)(2,"img",2)(3,"app-header",3),d.TgZ(4,"div",4)(5,"h1",5),d._uU(6,"Wear your dream designer outfit"),d.qZA(),d.TgZ(7,"h3",6),d._uU(8," Australia's Largest online bollywood pre-owned marketplace "),d.qZA(),d.TgZ(9,"div",7),d._UZ(10,"input",8),d.TgZ(11,"button",9),d._uU(12,"Search"),d.qZA()()()()),2&t&&(d.xp6(3),d.Q6J("isWhite",!1))},directives:[GA],styles:[".home-container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;position:relative}.home-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0px;left:0px;background:rgba(0,0,0,.2);width:100vw;height:100vh;overflow:hidden}.home-container[_ngcontent-%COMP%]   .bg-pic[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.home-container[_ngcontent-%COMP%]   .title-search[_ngcontent-%COMP%]{position:absolute;top:calc(50vh - 140px);left:15vw;width:70vw;height:200px}.home-container[_ngcontent-%COMP%]   .title-search[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:50px;line-height:60px;margin-bottom:8px;font-weight:700;font-family:Poppins,sans-serif;text-align:center;color:#fff}.home-container[_ngcontent-%COMP%]   .title-search[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{font-size:22px;line-height:30px;margin-bottom:48px;font-family:Poppins,sans-serif;text-align:center;color:#fff}.home-container[_ngcontent-%COMP%]   .title-search[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{padding:30px;background:#fff;width:100%;border-radius:4px;box-shadow:0 0 #8898aa1a,0 15px 35px 2px #31315d1a,0 5px 15px 2px #00000014;position:relative}.home-container[_ngcontent-%COMP%]   .title-search[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;height:50px;font-size:16px;font-weight:400;border-radius:4px;color:#495057;background-color:#fff;border:1px solid rgba(0,0,0,.15);padding:8px 160px 8px 12px;outline:none;line-height:1.5}.home-container[_ngcontent-%COMP%]   .title-search[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#495057;font-size:16px;font-weight:400}.home-container[_ngcontent-%COMP%]   .title-search[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{position:absolute;top:30px;right:30px;width:150px;height:50px;background-color:#2699fb;border-radius:0 4px 4px 0/0px 4px 4px 0px;border:0px;outline:none;cursor:pointer;font-weight:700;color:#fff}"]}),n})();function Kk(n,e){if(1&n&&(d.TgZ(0,"div",20),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij(" ",t.loginEmailError," ")}}function Yk(n,e){if(1&n&&(d.TgZ(0,"div",20),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij(" ",t.passwordError," ")}}function Qk(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",11)(1,"form")(2,"div",12)(3,"div",13),d._uU(4,"Email"),d.qZA(),d.TgZ(5,"div",14)(6,"input",15),d.NdJ("ngModelChange",function(o){return d.CHM(t),d.oxw().email=o}),d.qZA()(),d.YNc(7,Kk,2,1,"div",16),d.qZA(),d.TgZ(8,"div",12)(9,"div",13),d._uU(10,"Password"),d.qZA(),d.TgZ(11,"div",14)(12,"input",17),d.NdJ("ngModelChange",function(o){return d.CHM(t),d.oxw().password=o}),d.qZA()(),d.YNc(13,Yk,2,1,"div",16),d.qZA(),d.TgZ(14,"div")(15,"button",18),d.NdJ("click",function(){return d.CHM(t),d.oxw().login()}),d._uU(16,"Login"),d.qZA()(),d.TgZ(17,"div",19),d.NdJ("click",function(){return d.CHM(t),d.oxw().forgotPassword()}),d._uU(18,"Forgot Password"),d.qZA()()()}if(2&n){const t=d.oxw();d.xp6(6),d.Q6J("ngModel",t.email),d.xp6(1),d.Q6J("ngIf",t.loginEmailError.length>0),d.xp6(5),d.Q6J("ngModel",t.password),d.xp6(1),d.Q6J("ngIf",t.passwordError.length>0)}}function Jk(n,e){if(1&n&&(d.TgZ(0,"div",20),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij(" ",t.fullNameError," ")}}function Xk(n,e){if(1&n&&(d.TgZ(0,"div",20),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij(" ",t.registerEmailError," ")}}function eF(n,e){if(1&n&&(d.TgZ(0,"div",20),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij(" ",t.passwordError," ")}}function tF(n,e){if(1&n&&(d.TgZ(0,"div",20),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij(" ",t.confirmPasswordError," ")}}function nF(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",11)(1,"form")(2,"div",12)(3,"div",13),d._uU(4,"Full name"),d.qZA(),d.TgZ(5,"div",14)(6,"input",21),d.NdJ("ngModelChange",function(o){return d.CHM(t),d.oxw().fullName=o}),d.qZA()(),d.YNc(7,Jk,2,1,"div",16),d.qZA(),d.TgZ(8,"div",12)(9,"div",13),d._uU(10,"Email"),d.qZA(),d.TgZ(11,"div",14)(12,"input",15),d.NdJ("ngModelChange",function(o){return d.CHM(t),d.oxw().email=o}),d.qZA()(),d.YNc(13,Xk,2,1,"div",16),d.qZA(),d.TgZ(14,"div",12)(15,"div",13),d._uU(16,"Create Password"),d.qZA(),d.TgZ(17,"div",14)(18,"input",17),d.NdJ("ngModelChange",function(o){return d.CHM(t),d.oxw().password=o}),d.qZA()(),d.YNc(19,eF,2,1,"div",16),d.qZA(),d.TgZ(20,"div",12)(21,"div",13),d._uU(22,"Confirm Password"),d.qZA(),d.TgZ(23,"div",14)(24,"input",22),d.NdJ("ngModelChange",function(o){return d.CHM(t),d.oxw().confirmPassword=o}),d.qZA()(),d.YNc(25,tF,2,1,"div",16),d.qZA(),d.TgZ(26,"div")(27,"button",18),d.NdJ("click",function(){return d.CHM(t),d.oxw().register()}),d._uU(28,"Register"),d.qZA()()()()}if(2&n){const t=d.oxw();d.xp6(6),d.Q6J("ngModel",t.fullName),d.xp6(1),d.Q6J("ngIf",t.fullNameError.length>0),d.xp6(5),d.Q6J("ngModel",t.email),d.xp6(1),d.Q6J("ngIf",t.registerEmailError.length>0),d.xp6(5),d.Q6J("ngModel",t.password),d.xp6(1),d.Q6J("ngIf",t.passwordError.length>0),d.xp6(5),d.Q6J("ngModel",t.confirmPassword),d.xp6(1),d.Q6J("ngIf",t.confirmPasswordError.length>0)}}function rF(n,e){if(1&n&&(d.TgZ(0,"div",23),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.hij(" ",t.overallErr," ")}}function iF(n,e){1&n&&(d.TgZ(0,"div",24),d._UZ(1,"app-spinner"),d.qZA())}const gP=function(n){return{active:n}},sF=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:Wk},{path:"login",component:(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.activeTab="login",this.fullName="",this.email="",this.password="",this.confirmPassword="",this.fullNameError="",this.registerEmailError="",this.loginEmailError="",this.passwordError="",this.confirmPasswordError="",this.emailPattern=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,this.isLoading=!1,this.overallErr=""}ngOnInit(){this.emailRegex=new RegExp(this.emailPattern)}setActiveTab(t){this.activeTab=t}goToHome(){this.router.navigate(["home"])}login(){this.fullNameError="",this.loginEmailError="",this.passwordError="",this.overallErr="",0===this.email.trim().length?this.loginEmailError="Email is required":this.emailRegex.test(this.email)?0===this.password.trim().length?this.passwordError="Password is required":(this.isLoading=!0,this.auth.signIn(this.email,this.password).then(t=>{this.auth.getAuthState().subscribe(r=>{this.email="",this.password="",this.isLoading=!1,r&&(localStorage.setItem("isLoggedIn","true"),this.router.navigate(["home"]))})}).catch(t=>{this.overallErr="Please check your email and password",this.isLoading=!1})):this.loginEmailError="Email should be valid"}register(){this.fullNameError="",this.registerEmailError="",this.passwordError="",this.confirmPasswordError="",this.overallErr="",0===this.fullName.trim().length?this.fullNameError="Full name is required":0===this.email.trim().length?this.registerEmailError="Email is required":this.emailRegex.test(this.email)?0===this.password.trim().length?this.passwordError="Password is required":this.password.trim().length<6?this.passwordError="Password should be atleast 6 characters in length":0===this.confirmPassword.trim().length?this.confirmPasswordError="Confirm password is required":this.password!==this.confirmPassword?this.confirmPasswordError="Password and confirm password does not match":(this.isLoading=!0,this.auth.signUp(this.email,this.password).then(t=>{this.auth.setUserData(t.user,this.fullName).then(r=>{this.fullName="",this.email="",this.password="",this.confirmPassword="",this.isLoading=!1},r=>{this.isLoading=!1,this.overallErr="Sorry, some problem occured."})}).catch(t=>{this.isLoading=!1,this.overallErr="auth/email-already-in-use"===t.code?"Email already in use":"Sorry, some problem occured."})):this.registerEmailError="Email should be valid"}forgotPassword(){this.loginEmailError="",this.overallErr="",0===this.email.trim().length?this.loginEmailError="Email is required":this.emailRegex.test(this.email)?(this.isLoading=!0,this.auth.forgotPassword(this.email).then(()=>{this.isLoading=!1,window.alert("Password reset email sent, check your inbox. Please check your spam folder also.")}).catch(t=>{this.isLoading=!1,this.overallErr="auth/user-not-found"===t.code?"User not yet registered":"Sorry, some problem occured"})):this.loginEmailError="Email should be valid"}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(kn),d.Y36(cO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:15,vars:10,consts:[[1,"login-container"],[1,"left"],[1,"logo",3,"click"],["src","assets/bg-images/bg2.jpg","alt","",1,"bg-pic"],[1,"right"],[1,"nav-tab"],[1,"nav-item","br",3,"ngClass","click"],[1,"nav-item","bl",3,"ngClass","click"],["class","form-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","spinner-container",4,"ngIf"],[1,"form-container"],[1,"form-group"],[1,"label"],[1,"form-control"],["type","email","name","email","maxlength","50",3,"ngModel","ngModelChange"],["class","error",4,"ngIf"],["type","password","name","password","maxlength","50",3,"ngModel","ngModelChange"],[1,"loginBtn",3,"click"],[1,"link",3,"click"],[1,"error"],["type","text","name","fullName","maxlength","25",3,"ngModel","ngModelChange"],["type","password","name","confirmPassword","maxlength","50",3,"ngModel","ngModelChange"],[1,"error-container"],[1,"spinner-container"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2),d.NdJ("click",function(){return r.goToHome()}),d._uU(3,"stillred"),d.qZA(),d._UZ(4,"img",3),d.qZA(),d.TgZ(5,"div",4)(6,"div",5)(7,"div",6),d.NdJ("click",function(){return r.setActiveTab("login")}),d._uU(8," Login "),d.qZA(),d.TgZ(9,"div",7),d.NdJ("click",function(){return r.setActiveTab("register")}),d._uU(10," Register "),d.qZA()(),d.YNc(11,Qk,19,4,"div",8),d.YNc(12,nF,29,8,"div",8),d.YNc(13,rF,2,1,"div",9),d.YNc(14,iF,2,0,"div",10),d.qZA()()),2&t&&(d.xp6(7),d.Q6J("ngClass",d.VKq(6,gP,"login"===r.activeTab)),d.xp6(2),d.Q6J("ngClass",d.VKq(8,gP,"register"===r.activeTab)),d.xp6(2),d.Q6J("ngIf","login"===r.activeTab),d.xp6(1),d.Q6J("ngIf","register"===r.activeTab),d.xp6(1),d.Q6J("ngIf",r.overallErr.length>0),d.xp6(1),d.Q6J("ngIf",r.isLoading))},directives:[mi,$n,uS,KA,r0,Jv,mb,WA,gb,pP],styles:[".login-container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;display:flex}.login-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:70vw}.login-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .bg-pic[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.login-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#fff;font-size:18px;font-weight:500;cursor:pointer;position:absolute;top:22px;left:100px}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:30vw}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]{display:flex;align-items:center;height:70px;margin-top:150px;font-size:18px}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{width:50%;text-align:center;cursor:pointer}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]   .nav-item.bl[_ngcontent-%COMP%]{border-left:1px solid black}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]   .nav-item.br[_ngcontent-%COMP%]{border-right:1px solid black}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .nav-tab[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{font-weight:700;cursor:default}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{padding:50px;margin-top:50px}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{font-size:16px;font-weight:400;line-height:24px;margin-bottom:20px;width:100%}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-bottom:5px}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;height:40px}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid rgba(0,0,0,.15);color:#495057;outline:none;padding:8px 12px;border-radius:4px;font-size:18px}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red;font-size:12px;margin-top:3px}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .loginBtn[_ngcontent-%COMP%]{width:100%;height:40px;padding:8px 12px;border-radius:4px;font-size:18px;margin-top:20px;border:0px;background-color:#2699fb;color:#fff;cursor:pointer}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{margin-top:25px;font-size:16px;color:#2699fb;text-align:center;cursor:pointer}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{color:red;font-size:14px;width:100%;text-align:center}.login-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .spinner-container[_ngcontent-%COMP%]{width:100%;text-align:center}"]}),n})()},{path:"sell",component:(()=>{class n{constructor(t){this.router=t}ngOnInit(){}addItem(){this.router.navigate(["add-item"])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(kn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-sell"]],decls:45,vars:1,consts:[[1,"sell-container"],[1,"overlay"],[1,"overlay-white"],["src","assets/bg-images/bg1.jpg","alt","",1,"bg-pic"],[3,"isWhite"],[1,"title-container"],[1,"main-title"],[1,"sub-title"],[1,"content-container"],[1,"content-wrapper"],[1,"content"],[1,"step-container"],[1,"step-row"],[1,"title"],[1,"step-col","left"],[1,"number-circle"],[1,"step-title"],[1,"step-desc"],[1,"step-col","center"],[1,"step-col","right"],[1,"step-row","t-center","d-block"],[1,"start-btn",3,"click"],[1,"price"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"div",1)(2,"div",2)(3,"img",3)(4,"app-header",4),d.TgZ(5,"div",5)(6,"div",6)(7,"h1"),d._uU(8,"Sell your dress"),d.qZA()(),d.TgZ(9,"div",7),d._uU(10," No wonder we're the best place to sell your dress "),d.qZA()(),d.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"h2",13),d._uU(17,"Selling in 3 steps"),d.qZA()(),d.TgZ(18,"div",12)(19,"div",14)(20,"div",15),d._uU(21,"1"),d.qZA(),d.TgZ(22,"h4",16),d._uU(23,"List your dress"),d.qZA(),d.TgZ(24,"div",17),d._uU(25," With photos and a selling price you choose. All for a small one-off fee! "),d.qZA()(),d.TgZ(26,"div",18)(27,"div",15),d._uU(28,"2"),d.qZA(),d.TgZ(29,"h4",16),d._uU(30,"Chat privately"),d.qZA(),d.TgZ(31,"div",17),d._uU(32," Receive messages from buyers & keep your contact details private. "),d.qZA()(),d.TgZ(33,"div",19)(34,"div",15),d._uU(35,"3"),d.qZA(),d.TgZ(36,"h4",16),d._uU(37,"Get paid"),d.qZA(),d.TgZ(38,"div",17),d._uU(39," Accept secure payment online & send the dress on its way. "),d.qZA()()(),d.TgZ(40,"div",20)(41,"button",21),d.NdJ("click",function(){return r.addItem()}),d._uU(42,"Start Selling"),d.qZA(),d.TgZ(43,"div",22),d._uU(44,"$4.95 per item"),d.qZA()()()()()()()),2&t&&(d.xp6(4),d.Q6J("isWhite",!1))},directives:[GA],styles:[".sell-container[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;position:relative}.sell-container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0px;left:0px;background:linear-gradient(to right,rgba(1,138,251,.6) 0%,rgba(216,118,255,.6) 100%);width:100vw;height:100vh;overflow:hidden}.sell-container[_ngcontent-%COMP%]   .overlay-white[_ngcontent-%COMP%]{position:absolute;bottom:0px;left:0px;background:#fff;width:100vw;height:35vh;overflow:hidden}.sell-container[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{position:absolute;top:280px;left:0px;width:100vw;height:130px}.sell-container[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]{font-size:26px;line-height:30px;margin-bottom:40px;font-weight:700;font-family:Poppins,sans-serif;text-align:center;color:#fff}.sell-container[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{font-size:22px;line-height:30px;margin-bottom:48px;font-family:Poppins,sans-serif;text-align:center;color:#fff}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{position:absolute;bottom:100px;left:0px;background:transparent;width:100vw;height:450px;border-radius:4px}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{width:1000px;height:500px;box-shadow:0 0 #8898aa1a,0 15px 35px 2px #31315d1a,0 5px 15px 2px #00000014;padding:40px 80px;margin:0 auto;position:relative;background:white;border-radius:4px}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;z-index:999;width:840px}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]{width:100%;color:#484848}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row[_ngcontent-%COMP%]{margin-bottom:50px;width:100%;display:flex;justify-content:space-between}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row.t-center[_ngcontent-%COMP%]{text-align:center}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row.d-block[_ngcontent-%COMP%]{display:block}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;text-align:center;width:100%;font-family:Roboto,sans-serif}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row[_ngcontent-%COMP%]   .step-col[_ngcontent-%COMP%]{max-width:33.333333%}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row[_ngcontent-%COMP%]   .step-col.left[_ngcontent-%COMP%]{text-align:left}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row[_ngcontent-%COMP%]   .step-col.center[_ngcontent-%COMP%]{text-align:center}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row[_ngcontent-%COMP%]   .step-col.right[_ngcontent-%COMP%]{text-align:right}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row[_ngcontent-%COMP%]   .step-col[_ngcontent-%COMP%]   .number-circle[_ngcontent-%COMP%]{display:inline-block;text-align:center;background-color:#868e96;color:#fff;border-radius:100%;width:40px;height:40px;line-height:40px;font-size:16px;font-weight:700}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row[_ngcontent-%COMP%]   .step-col[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;line-height:31px;margin:16px 0}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row[_ngcontent-%COMP%]   .step-col[_ngcontent-%COMP%]   .step-desc[_ngcontent-%COMP%]{width:250px;margin:0;padding:0}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:20px;width:200px;background-color:#2699fb;border:0px;color:#fff;border-radius:4px;padding:8px 16px;cursor:pointer;margin-bottom:15px}.sell-container[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-container[_ngcontent-%COMP%]   .step-row[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:16px}.sell-container[_ngcontent-%COMP%]   .bg-pic[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"]}),n})()},{path:"add-item",component:Zk,canActivate:[(()=>{class n{constructor(t){this.router=t}canActivate(t,r){let o=!1;return o="true"===localStorage.getItem("isLoggedIn"),o||this.router.navigate(["/login"]),o}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(kn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"**",component:(()=>{class n{constructor(t){this.router=t}ngOnInit(){}goToHome(){this.router.navigate(["home"])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(kn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-not-found"]],decls:6,vars:0,consts:[[1,"not-found"],[1,"title"],[1,"link",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div")(2,"div",1),d._uU(3,"404 | Page Not Found"),d.qZA(),d.TgZ(4,"div",2),d.NdJ("click",function(){return r.goToHome()}),d._uU(5,"HOME"),d.qZA()()())},styles:[".not-found[_ngcontent-%COMP%]{width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;font-family:Aboreto,cursive;font-weight:700}.not-found[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:60px;width:100%}.not-found[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:28px;color:#00f;width:100%;text-align:center;margin-top:20px;cursor:pointer}"]}),n})()}];let oF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[_0.forRoot(sF,{initialNavigation:"enabledBlocking"})],_0]}),n})(),aF=(()=>{class n{constructor(){this.title="still-red"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[Lc],styles:[""]}),n})();const mP_firebase={apiKey:"AIzaSyCdHBrUlCGmM1iKfGa91ibiyaAAbgZP0Zs",authDomain:"still-red.firebaseapp.com",projectId:"still-red",storageBucket:"still-red.appspot.com",messagingSenderId:"869361364799",appId:"1:869361364799:web:65dcdd729b02a1546eed8a"};let uF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[aF]}),n.\u0275inj=d.cJS({providers:[],imports:[[pa.withServerTransition({appId:"serverApp"}),xk,Ii.hO.initializeApp(mP_firebase),Kw,oF]]}),n})();function _P(){uu().bootstrapModule(uF).catch(n=>console.error(n))}(0,d.G48)(),"complete"===document.readyState?_P():document.addEventListener("DOMContentLoaded",_P)},5867:(Qe,we,R)=>{R.d(we,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=R(9681);(0,d.registerVersion)("firebase","9.9.3","app")},127:(Qe,we,R)=>{R.d(we,{Z:()=>d.Z});var d=R(3942);d.Z.registerVersion("firebase","9.9.3","app-compat")},1451:(Qe,we,R)=>{R.r(we);var d=R(5861),X=R(3942),N=R(2090),le=R(9681),ie=R(655),fe=R(1877),de=R(4859);const Pe=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function Ie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new fe.Yd("@firebase/auth");function Ke(_,...f){qe.logLevel<=fe.in.ERROR&&qe.error(`Auth (${le.SDK_VERSION}): ${_}`,...f)}function Te(_,...f){throw je(_,...f)}function _e(_,...f){return je(_,...f)}function Ce(_,f,p){const w=Object.assign(Object.assign({},Be()),{[f]:p});return new N.LL("auth","Firebase",w).create(f,{appName:_.name})}function Ue(_,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&Te(_,"argument-error"),Ce(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(_,...f){if("string"!=typeof _){const p=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(p,...w)}return he.create(_,...f)}function z(_,f,...p){if(!_)throw je(f,...p)}function ve(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Ke(f),new Error(f)}function K(_,f){_||ve(f)}const ne=new Map;function ee(_){K(_ instanceof Function,"Expected a class definition");let f=ne.get(_);return f?(K(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,ne.set(_,f),f)}function Ne(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function lt(){return"http:"===Bt()||"https:"===Bt()}function Bt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Yt{constructor(f,p){this.shortDelay=f,this.longDelay=p,K(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function Lt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(_,f){K(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class Xt{static initialize(f,p,w){this.fetchImpl=f,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Er=new Yt(3e4,6e4);function Ht(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function kt(_,f,p,w){return is.apply(this,arguments)}function is(){return(is=(0,d.Z)(function*(_,f,p,w,T={}){return Jr(_,T,(0,d.Z)(function*(){let P={},Z={};w&&("GET"===f?Z=w:P={body:JSON.stringify(w)});const ae=(0,N.xO)(Object.assign({key:_.config.apiKey},Z)).slice(1),Fe=yield _._getAdditionalHeaders();return Fe["Content-Type"]="application/json",_.languageCode&&(Fe["X-Firebase-Locale"]=_.languageCode),Xt.fetch()(Ms(_,_.config.apiHost,p,ae),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Jr(_,f,p){return fr.apply(this,arguments)}function fr(){return(fr=(0,d.Z)(function*(_,f,p){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},qt),f);try{const T=new Lr(_),P=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw Oi(_,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const ae=P.ok?Z.errorMessage:Z.error.message,[Fe,Ye]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Oi(_,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Fe)throw Oi(_,"email-already-in-use",Z);if("USER_DISABLED"===Fe)throw Oi(_,"user-disabled",Z);const ft=w[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw Ce(_,ft,Ye);Te(_,ft)}}catch(T){if(T instanceof N.ZR)throw T;Te(_,"network-request-failed")}})).apply(this,arguments)}function Fr(_,f,p,w){return xi.apply(this,arguments)}function xi(){return(xi=(0,d.Z)(function*(_,f,p,w,T={}){const P=yield kt(_,f,p,w,T);return"mfaPendingCredential"in P&&Te(_,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Ms(_,f,p,w){const T=`${f}${p}?${w}`;return _.config.emulator?mn(_.config,T):`${_.config.apiScheme}://${T}`}class Lr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),Er.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Oi(_,f,p){const w={appName:_.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const T=_e(_,f,w);return T.customData._tokenResponse=p,T}function Vr(){return(Vr=(0,d.Z)(function*(_,f){return kt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function _n(_,f){return Un.apply(this,arguments)}function Un(){return(Un=(0,d.Z)(function*(_,f){return kt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Pi(_,f){return ss.apply(this,arguments)}function ss(){return(ss=(0,d.Z)(function*(_,f){return kt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function yn(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function So(){return(So=(0,d.Z)(function*(_,f=!1){const p=(0,N.m9)(_),w=yield p.getIdToken(f),T=ot(w);z(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const P="object"==typeof T.firebase?T.firebase:void 0,Z=null==P?void 0:P.sign_in_provider;return{claims:T,token:w,authTime:yn(jt(T.auth_time)),issuedAtTime:yn(jt(T.iat)),expirationTime:yn(jt(T.exp)),signInProvider:Z||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function jt(_){return 1e3*Number(_)}function ot(_){var f;const[p,w,T]=_.split(".");if(void 0===p||void 0===w||void 0===T)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,N.tV)(w);return P?JSON.parse(P):(Ke("Failed to decode base64 JWT payload"),null)}catch(P){return Ke("Caught error parsing JWT payload as JSON",null===(f=P)||void 0===f?void 0:f.toString()),null}}function pr(_,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,d.Z)(function*(_,f,p=!1){if(p)return f;try{return yield f}catch(w){throw w instanceof N.ZR&&Vt(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function Vt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class xs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield p.iteration()}),w)}iteration(){var f=this;return(0,d.Z)(function*(){var p;try{yield f.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(p=w)||void 0===p?void 0:p.code)&&f.schedule(!0))}f.schedule()})()}}class gr{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=yn(this.lastLoginAt),this.creationTime=yn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Cr(_){return dt.apply(this,arguments)}function dt(){return(dt=(0,d.Z)(function*(_){var f;const p=_.auth,w=yield _.getIdToken(),T=yield pr(_,Pi(p,{idToken:w}));z(null==T?void 0:T.users.length,p,"internal-error");const P=T.users[0];_._notifyReloadListener(P);const Z=(null===(f=P.providerUserInfo)||void 0===f?void 0:f.length)?L(P.providerUserInfo):[],ae=q(_.providerData,Z),ft=!!_.isAnonymous&&!(_.email&&P.passwordHash||(null==ae?void 0:ae.length)),ht={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ae,metadata:new gr(P.createdAt,P.lastLoginAt),isAnonymous:ft};Object.assign(_,ht)})).apply(this,arguments)}function U(){return(U=(0,d.Z)(function*(_){const f=(0,N.m9)(_);yield Cr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function q(_,f){return[..._.filter(w=>!f.some(T=>T.providerId===w.providerId)),...f]}function L(_){return _.map(f=>{var{providerId:p}=f,w=(0,ie._T)(f,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function G(){return(G=(0,d.Z)(function*(_,f){const p=yield Jr(_,{},(0,d.Z)(function*(){const w=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:P}=_.config,Z=Ms(_,T,"/v1/token",`key=${P}`),ae=yield _._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",Xt.fetch()(Z,{method:"POST",headers:ae,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ae{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){z(f.idToken,"internal-error"),z(void 0!==f.idToken,"internal-error"),z(void 0!==f.refreshToken,"internal-error");const p="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Et(_){const f=ot(_);return z(f,"internal-error"),z(void 0!==f.exp,"internal-error"),z(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var w=this;return(0,d.Z)(function*(){return z(!w.accessToken||w.refreshToken,f,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var w=this;return(0,d.Z)(function*(){const{accessToken:T,refreshToken:P,expiresIn:Z}=yield function j(_,f){return G.apply(this,arguments)}(f,p);w.updateTokensAndExpiration(T,P,Number(Z))})()}updateTokensAndExpiration(f,p,w){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,p){const{refreshToken:w,accessToken:T,expirationTime:P}=p,Z=new Ae;return w&&(z("string"==typeof w,"internal-error",{appName:f}),Z.refreshToken=w),T&&(z("string"==typeof T,"internal-error",{appName:f}),Z.accessToken=T),P&&(z("number"==typeof P,"internal-error",{appName:f}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ae,this.toJSON())}_performRefresh(){return ve("not implemented")}}function Ve(_,f){z("string"==typeof _||void 0===_,"internal-error",{appName:f})}class ut{constructor(f){var{uid:p,auth:w,stsTokenManager:T}=f,P=(0,ie._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new gr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,d.Z)(function*(){const w=yield pr(p,p.stsTokenManager.getToken(p.auth,f));return z(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(f){return function pi(_){return So.apply(this,arguments)}(this,f)}reload(){return function Os(_){return U.apply(this,arguments)}(this)}_assign(f){this!==f&&(z(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new ut(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var w=this;return(0,d.Z)(function*(){let T=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),T=!0),p&&(yield Cr(w)),yield w.auth._persistUserIfCurrent(w),T&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,d.Z)(function*(){const p=yield f.getIdToken();return yield pr(f,function mt(_,f){return Vr.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var w,T,P,Z,ae,Fe,Ye,ft;const ht=null!==(w=p.displayName)&&void 0!==w?w:void 0,Cn=null!==(T=p.email)&&void 0!==T?T:void 0,ai=null!==(P=p.phoneNumber)&&void 0!==P?P:void 0,Pu=null!==(Z=p.photoURL)&&void 0!==Z?Z:void 0,Qh=null!==(ae=p.tenantId)&&void 0!==ae?ae:void 0,Jp=null!==(Fe=p._redirectEventId)&&void 0!==Fe?Fe:void 0,Oa=null!==(Ye=p.createdAt)&&void 0!==Ye?Ye:void 0,Hc=null!==(ft=p.lastLoginAt)&&void 0!==ft?ft:void 0,{uid:Dd,emailVerified:Xp,isAnonymous:kn,providerData:Jh,stsTokenManager:Xh}=p;z(Dd&&Xh,f,"internal-error");const ef=Ae.fromJSON(this.name,Xh);z("string"==typeof Dd,f,"internal-error"),Ve(ht,f.name),Ve(Cn,f.name),z("boolean"==typeof Xp,f,"internal-error"),z("boolean"==typeof kn,f,"internal-error"),Ve(ai,f.name),Ve(Pu,f.name),Ve(Qh,f.name),Ve(Jp,f.name),Ve(Oa,f.name),Ve(Hc,f.name);const Gc=new ut({uid:Dd,auth:f,email:Cn,emailVerified:Xp,displayName:ht,isAnonymous:kn,photoURL:Pu,phoneNumber:ai,tenantId:Qh,stsTokenManager:ef,createdAt:Oa,lastLoginAt:Hc});return Jh&&Array.isArray(Jh)&&(Gc.providerData=Jh.map(Ru=>Object.assign({},Ru))),Jp&&(Gc._redirectEventId=Jp),Gc}static _fromIdTokenResponse(f,p,w=!1){return(0,d.Z)(function*(){const T=new Ae;T.updateFromServerResponse(p);const P=new ut({uid:p.localId,auth:f,stsTokenManager:T,isAnonymous:w});return yield Cr(P),P})()}}const $t=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(p,w){var T=this;return(0,d.Z)(function*(){T.storage[p]=w})()}_get(p){var w=this;return(0,d.Z)(function*(){const T=w.storage[p];return void 0===T?null:T})()}_remove(p){var w=this;return(0,d.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return _.type="NONE",_})();function Yn(_,f,p){return`firebase:${_}:${f}:${p}`}class Rt{constructor(f,p,w){this.persistence=f,this.auth=p,this.userKey=w;const{config:T,name:P}=this.auth;this.fullUserKey=Yn(this.userKey,T.apiKey,P),this.fullPersistenceKey=Yn("persistence",T.apiKey,P),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?ut._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,d.Z)(function*(){if(p.persistence===f)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,w="authUser"){return(0,d.Z)(function*(){if(!p.length)return new Rt(ee($t),f,w);const T=(yield Promise.all(p.map(function(){var Ye=(0,d.Z)(function*(ft){if(yield ft._isAvailable())return ft});return function(ft){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let P=T[0]||ee($t);const Z=Yn(w,f.config.apiKey,f.name);let ae=null;for(const Ye of p)try{const ft=yield Ye._get(Z);if(ft){const ht=ut._fromJSON(f,ft);Ye!==P&&(ae=ht),P=Ye;break}}catch(ft){}const Fe=T.filter(Ye=>Ye._shouldAllowMigration);return P._shouldAllowMigration&&Fe.length?(P=Fe[0],ae&&(yield P._set(Z,ae.toJSON())),yield Promise.all(p.map(function(){var Ye=(0,d.Z)(function*(ft){if(ft!==P)try{yield ft._remove(Z)}catch(ht){}});return function(ft){return Ye.apply(this,arguments)}}())),new Rt(P,f,w)):new Rt(P,f,w)})()}}function ei(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Bn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ri(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(os(f))return"Blackberry";if(jn(f))return"Webos";if(Mo(f))return"Safari";if((f.includes("chrome/")||sa(f))&&!f.includes("edge/"))return"Chrome";if(br(f))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Ri(_=(0,N.z$)()){return/firefox\//i.test(_)}function Mo(_=(0,N.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function sa(_=(0,N.z$)()){return/crios\//i.test(_)}function Bn(_=(0,N.z$)()){return/iemobile/i.test(_)}function br(_=(0,N.z$)()){return/android/i.test(_)}function os(_=(0,N.z$)()){return/blackberry/i.test(_)}function jn(_=(0,N.z$)()){return/webos/i.test(_)}function Ur(_=(0,N.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Ps(_=(0,N.z$)()){return Ur(_)||br(_)||jn(_)||os(_)||/windows phone/i.test(_)||Bn(_)}function xo(_,f=[]){let p;switch(_){case"Browser":p=ei((0,N.z$)());break;case"Worker":p=`${ei((0,N.z$)())}-${_}`;break;default:p=_}const w=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${le.SDK_VERSION}/${w}`}class Br{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const w=P=>new Promise((Z,ae)=>{try{Z(f(P))}catch(Fe){ae(Fe)}});w.onAbort=p,this.queue.push(w);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,d.Z)(function*(){var w;if(p.auth.currentUser===f)return;const T=[];try{for(const P of p.queue)yield P(f),P.onAbort&&T.push(P.onAbort)}catch(P){T.reverse();for(const Z of T)try{Z()}catch(ae){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=P)||void 0===w?void 0:w.message})}})()}}class ze{constructor(f,p,w){this.app=f,this.heartbeatServiceProvider=p,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jt(this),this.idTokenSubscription=new Jt(this),this.beforeStateQueue=new Br(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,p){var w=this;return p&&(this._popupRedirectResolver=ee(p)),this._initializationPromise=this.queue((0,d.Z)(function*(){var T,P;if(!w._deleted&&(w.persistenceManager=yield Rt.create(w,f),!w._deleted)){if(null===(T=w._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(Z){}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,d.Z)(function*(){var w;const T=yield p.assertedPersistence.getCurrentUser();let P=T,Z=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ae=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,Fe=null==P?void 0:P._redirectEventId,Ye=yield p.tryRedirectSignIn(f);(!ae||ae===Fe)&&(null==Ye?void 0:Ye.user)&&(P=Ye.user,Z=!0)}if(!P)return p.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield p.beforeStateQueue.runMiddleware(P)}catch(ae){P=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ae))}return P?p.reloadAndSetCurrentUserOrClear(P):p.directlySetCurrentUser(null)}return z(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===P._redirectEventId?p.directlySetCurrentUser(P):p.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var p=this;return(0,d.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch(T){yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,d.Z)(function*(){var w;try{yield Cr(f)}catch(T){if("auth/network-request-failed"!==(null===(w=T)||void 0===w?void 0:w.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function We(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,d.Z)(function*(){const w=f?(0,N.m9)(f):null;return w&&z(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(f,p=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return f&&z(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,d.Z)(function*(){yield p.assertedPersistence.setPersistence(ee(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,p,w){return this.registerStateListener(this.authStateSubscription,f,p,w)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,w){return this.registerStateListener(this.idTokenSubscription,f,p,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var w=this;return(0,d.Z)(function*(){const T=yield w.getOrInitRedirectPersistenceManager(p);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,d.Z)(function*(){if(!p.redirectPersistenceManager){const w=f&&ee(f)||p._popupRedirectResolver;z(w,p,"argument-error"),p.redirectPersistenceManager=yield Rt.create(p,[ee(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,d.Z)(function*(){var w,T;return p._isInitialized&&(yield p.queue((0,d.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===f?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,d.Z)(function*(){if(f===p.currentUser)return p.queue((0,d.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,w,T){if(this._deleted)return()=>{};const P="function"==typeof p?p:p.next.bind(p),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return z(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof p?f.addObserver(p,w,T):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,d.Z)(function*(){p.currentUser&&p.currentUser!==f&&(p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh()),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=xo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var p;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(w["X-Firebase-Client"]=T),w})()}}function ct(_){return(0,N.m9)(_)}class Jt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(p=>this.observer=p)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ni(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function ki(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class gi{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return ve("not implemented")}_getIdTokenResponse(f){return ve("not implemented")}_linkToIdToken(f,p){return ve("not implemented")}_getReauthenticationResolver(f){return ve("not implemented")}}function vn(_,f){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(_,f){return kt(_,"POST","/v1/accounts:resetPassword",Ht(_,f))})).apply(this,arguments)}function aa(_,f){return mi.apply(this,arguments)}function mi(){return(mi=(0,d.Z)(function*(_,f){return kt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ja(_,f){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,d.Z)(function*(_,f){return kt(_,"POST","/v1/accounts:update",Ht(_,f))})).apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithPassword",Ht(_,f))})).apply(this,arguments)}function Ns(_,f){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(_,f){return kt(_,"POST","/v1/accounts:sendOobCode",Ht(_,f))})).apply(this,arguments)}function en(_,f){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,d.Z)(function*(_,f){return Ns(_,f)})).apply(this,arguments)}function ua(_,f){return $r.apply(this,arguments)}function $r(){return($r=(0,d.Z)(function*(_,f){return Ns(_,f)})).apply(this,arguments)}function Fi(_,f){return eu.apply(this,arguments)}function eu(){return(eu=(0,d.Z)(function*(_,f){return Ns(_,f)})).apply(this,arguments)}function xl(_,f){return Li.apply(this,arguments)}function Li(){return(Li=(0,d.Z)(function*(_,f){return Ns(_,f)})).apply(this,arguments)}function dc(){return(dc=(0,d.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithEmailLink",Ht(_,f))})).apply(this,arguments)}function Ol(){return(Ol=(0,d.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithEmailLink",Ht(_,f))})).apply(this,arguments)}class mr extends gi{constructor(f,p,w,T=null){super("password",w),this._email=f,this._password=p,this._tenantId=T}static _fromEmailAndPassword(f,p){return new mr(f,p,"password")}static _fromEmailAndCode(f,p,w=null){return new mr(f,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,d.Z)(function*(){switch(p.signInMethod){case"password":return function ir(_,f){return no.apply(this,arguments)}(f,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Vi(_,f){return dc.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,p){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return aa(f,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Ep(_,f){return Ol.apply(this,arguments)}(f,{idToken:p,email:w._email,oobCode:w._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ks(_,f){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,d.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithIdp",Ht(_,f))})).apply(this,arguments)}class as extends gi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new as(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):Te("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T}=p,P=(0,ie._T)(p,["providerId","signInMethod"]);if(!w||!T)return null;const Z=new as(w,T);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(f){return ks(f,this.buildRequest())}_linkToIdToken(f,p){const w=this.buildRequest();return w.idToken=p,ks(f,w)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,ks(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,N.xO)(p)}return f}}function bp(_,f){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,d.Z)(function*(_,f){return kt(_,"POST","/v1/accounts:sendVerificationCode",Ht(_,f))})).apply(this,arguments)}function Fs(){return(Fs=(0,d.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithPhoneNumber",Ht(_,f))})).apply(this,arguments)}function Nl(){return(Nl=(0,d.Z)(function*(_,f){const p=yield Fr(_,"POST","/v1/accounts:signInWithPhoneNumber",Ht(_,f));if(p.temporaryProof)throw Oi(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Dp={USER_NOT_FOUND:"user-not-found"};function kl(){return(kl=(0,d.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithPhoneNumber",Ht(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Dp)})).apply(this,arguments)}class Oo extends gi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new Oo({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new Oo({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function hc(_,f){return Fs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function Ip(_,f){return Nl.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Tp(_,f){return kl.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:w,verificationCode:T}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:w,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:w,phoneNumber:T,temporaryProof:P}=f;return w||p||T||P?new Oo({verificationId:p,verificationCode:w,phoneNumber:T,temporaryProof:P}):null}}class tu{constructor(f){var p,w,T,P,Z,ae;const Fe=(0,N.zd)((0,N.pd)(f)),Ye=null!==(p=Fe.apiKey)&&void 0!==p?p:null,ft=null!==(w=Fe.oobCode)&&void 0!==w?w:null,ht=function Ah(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Fe.mode)&&void 0!==T?T:null);z(Ye&&ft&&ht,"argument-error"),this.apiKey=Ye,this.operation=ht,this.code=ft,this.continueUrl=null!==(P=Fe.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Fe.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ae=Fe.tenantId)&&void 0!==ae?ae:null}static parseLink(f){const p=function ca(_){const f=(0,N.zd)((0,N.pd)(_)).link,p=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,w=(0,N.zd)((0,N.pd)(_)).deep_link_id;return(w?(0,N.zd)((0,N.pd)(w)).link:null)||w||p||f||_}(f);try{return new tu(p)}catch(w){return null}}}let Ll=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,w){return mr._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const T=tu.parseLink(w);return z(T,"argument-error"),mr._fromEmailAndCode(p,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class _r{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ro extends _r{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ui extends ro{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return z("providerId"in p&&"signInMethod"in p,"argument-error"),as._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return z(f.idToken||f.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ui.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ui.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:T,pendingToken:P,nonce:Z,providerId:ae}=f;if(!w&&!T&&!p&&!P||!ae)return null;try{return new Ui(ae)._credential({idToken:p,accessToken:w,nonce:Z,pendingToken:P})}catch(Fe){return null}}}let Po=(()=>{class _ extends ro{constructor(){super("facebook.com")}static credential(p){return as._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(w){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Vl=(()=>{class _ extends ro{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return as._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:T}=p;if(!w&&!T)return null;try{return _.credential(w,T)}catch(P){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Sh=(()=>{class _ extends ro{constructor(){super("github.com")}static credential(p){return as._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(w){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class io extends gi{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return ks(f,this.buildRequest())}_linkToIdToken(f,p){const w=this.buildRequest();return w.idToken=p,ks(f,w)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,ks(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T,pendingToken:P}=p;return w&&T&&P&&w===T?new io(w,P):null}static _create(f,p){return new io(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ir extends _r{constructor(f){z(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ir.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ir.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=io.fromJSON(f);return z(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:w}=f;if(!p||!w)return null;try{return io._create(w,p)}catch(T){return null}}}let Bl=(()=>{class _ extends ro{constructor(){super("twitter.com")}static credential(p,w){return as._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:T}=p;if(!w||!T)return null;try{return _.credential(w,T)}catch(P){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Dr(_,f){return No.apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signUp",Ht(_,f))})).apply(this,arguments)}class ti{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,w,T=!1){return(0,d.Z)(function*(){const P=yield ut._fromIdTokenResponse(f,w,T),Z=fc(w);return new ti({user:P,providerId:Z,_tokenResponse:w,operationType:p})})()}static _forOperation(f,p,w){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const T=fc(w);return new ti({user:f,providerId:T,_tokenResponse:w,operationType:p})})()}}function fc(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function pc(){return(pc=(0,d.Z)(function*(_){var f;const p=ct(_);if(yield p._initializationPromise,null===(f=p.currentUser)||void 0===f?void 0:f.isAnonymous)return new ti({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield Dr(p,{returnSecureToken:!0}),T=yield ti._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class ko extends N.ZR{constructor(f,p,w,T){var P;super(p.code,p.message),this.operationType=w,this.user=T,Object.setPrototypeOf(this,ko.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,p,w,T){return new ko(f,p,w,T)}}function gc(_,f,p,w){return("reauthenticate"===f?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?ko._fromErrorAndOperation(_,P,f,w):P})}function Bi(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function tn(){return(tn=(0,d.Z)(function*(_,f){const p=(0,N.m9)(_);yield zt(!0,p,f);const{providerUserInfo:w}=yield _n(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),T=Bi(w||[]);return p.providerData=p.providerData.filter(P=>T.has(P.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function la(_,f){return so.apply(this,arguments)}function so(){return(so=(0,d.Z)(function*(_,f,p=!1){const w=yield pr(_,f._linkToIdToken(_.auth,yield _.getIdToken()),p);return ti._forOperation(_,"link",w)})).apply(this,arguments)}function zt(_,f,p){return da.apply(this,arguments)}function da(){return(da=(0,d.Z)(function*(_,f,p){yield Cr(f);const T=!1===_?"provider-already-linked":"no-such-provider";z(Bi(f.providerData).has(p)===_,f.auth,T)})).apply(this,arguments)}function nu(_,f){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,d.Z)(function*(_,f,p=!1){var w;const{auth:T}=_,P="reauthenticate";try{const Z=yield pr(_,gc(T,P,f,_),p);z(Z.idToken,T,"internal-error");const ae=ot(Z.idToken);z(ae,T,"internal-error");const{sub:Fe}=ae;return z(_.uid===Fe,T,"user-mismatch"),ti._forOperation(_,P,Z)}catch(Z){throw"auth/user-not-found"===(null===(w=Z)||void 0===w?void 0:w.code)&&Te(T,"user-mismatch"),Z}})).apply(this,arguments)}function sr(_,f){return mc.apply(this,arguments)}function mc(){return(mc=(0,d.Z)(function*(_,f,p=!1){const w="signIn",T=yield gc(_,w,f),P=yield ti._fromIdTokenResponse(_,w,T);return p||(yield _._updateCurrentUser(P.user)),P})).apply(this,arguments)}function cn(_,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,d.Z)(function*(_,f){return sr(ct(_),f)})).apply(this,arguments)}function or(_,f){return oo.apply(this,arguments)}function oo(){return(oo=(0,d.Z)(function*(_,f){const p=(0,N.m9)(_);return yield zt(!1,p,f.providerId),la(p,f)})).apply(this,arguments)}function us(_,f){return ha.apply(this,arguments)}function ha(){return(ha=(0,d.Z)(function*(_,f){return nu((0,N.m9)(_),f)})).apply(this,arguments)}function _i(_,f){return $i.apply(this,arguments)}function $i(){return($i=(0,d.Z)(function*(_,f){return Fr(_,"POST","/v1/accounts:signInWithCustomToken",Ht(_,f))})).apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(_,f){const p=ct(_),w=yield _i(p,{token:f,returnSecureToken:!0}),T=yield ti._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Vs{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?_c._fromServerResponse(f,p):Te(f,"internal-error")}}class _c extends Vs{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new _c(p)}}function fa(_,f,p){var w;z((null===(w=p.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),z(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(z(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(z(p.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function ru(){return(ru=(0,d.Z)(function*(_,f,p){const w=(0,N.m9)(_),T={requestType:"PASSWORD_RESET",email:f};p&&fa(w,T,p),yield ua(w,T)})).apply(this,arguments)}function vc(){return(vc=(0,d.Z)(function*(_,f,p){yield vn((0,N.m9)(_),{oobCode:f,newPassword:p})})).apply(this,arguments)}function Se(){return(Se=(0,d.Z)(function*(_,f){yield Ja((0,N.m9)(_),{oobCode:f})})).apply(this,arguments)}function Ft(_,f){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,d.Z)(function*(_,f){const p=(0,N.m9)(_),w=yield vn(p,{oobCode:f}),T=w.requestType;switch(z(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(w.mfaInfo,p,"internal-error");default:z(w.email,p,"internal-error")}let P=null;return w.mfaInfo&&(P=Vs._fromServerResponse(ct(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:T}})).apply(this,arguments)}function su(){return(su=(0,d.Z)(function*(_,f){const{data:p}=yield Ft((0,N.m9)(_),f);return p.email})).apply(this,arguments)}function ni(){return(ni=(0,d.Z)(function*(_,f,p){const w=ct(_),T=yield Dr(w,{returnSecureToken:!0,email:f,password:p}),P=yield ti._fromIdTokenResponse(w,"signIn",T);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function Cc(){return(Cc=(0,d.Z)(function*(_,f,p){const w=(0,N.m9)(_),T={requestType:"EMAIL_SIGNIN",email:f};z(p.handleCodeInApp,w,"argument-error"),p&&fa(w,T,p),yield Fi(w,T)})).apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(_,f,p){const w=(0,N.m9)(_),T=Ll.credentialWithLink(f,p||Ne());return z(T._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),cn(w,T)})).apply(this,arguments)}function yr(_,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,d.Z)(function*(_,f){return kt(_,"POST","/v1/accounts:createAuthUri",Ht(_,f))})).apply(this,arguments)}function Us(){return(Us=(0,d.Z)(function*(_,f){const w={identifier:f,continueUri:lt()?Ne():"http://localhost"},{signinMethods:T}=yield yr((0,N.m9)(_),w);return T||[]})).apply(this,arguments)}function bc(){return(bc=(0,d.Z)(function*(_,f){const p=(0,N.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&fa(p.auth,T,f);const{email:P}=yield en(p.auth,T);P!==_.email&&(yield _.reload())})).apply(this,arguments)}function uu(){return(uu=(0,d.Z)(function*(_,f,p){const w=(0,N.m9)(_),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};p&&fa(w.auth,P,p);const{email:Z}=yield xl(w.auth,P);Z!==_.email&&(yield _.reload())})).apply(this,arguments)}function Ic(_,f){return pa.apply(this,arguments)}function pa(){return(pa=(0,d.Z)(function*(_,f){return kt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function lu(){return(lu=(0,d.Z)(function*(_,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const w=(0,N.m9)(_),P={idToken:yield w.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},Z=yield pr(w,Ic(w.auth,P));w.displayName=Z.displayName||null,w.photoURL=Z.photoUrl||null;const ae=w.providerData.find(({providerId:Fe})=>"password"===Fe);ae&&(ae.displayName=w.displayName,ae.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Z)})).apply(this,arguments)}function du(_,f,p){return uo.apply(this,arguments)}function uo(){return(uo=(0,d.Z)(function*(_,f,p){const{auth:w}=_,P={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(P.email=f),p&&(P.password=p);const Z=yield pr(_,aa(w,P));yield _._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Uo{constructor(f,p,w={}){this.isNewUser=f,this.providerId=p,this.profile=w}}class zl extends Uo{constructor(f,p,w,T){super(f,p,w),this.username=T}}class hu extends Uo{constructor(f,p){super(f,"facebook.com",p)}}class Hr extends zl{constructor(f,p){super(f,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class xh extends Uo{constructor(f,p){super(f,"google.com",p)}}class Dc extends zl{constructor(f,p,w){super(f,"twitter.com",p,w)}}function Qn(_){const{user:f,_tokenResponse:p}=_;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function ql(_){var f,p;if(!_)return null;const{providerId:w}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},P=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&(null==_?void 0:_.idToken)){const Z=null===(p=null===(f=ot(_.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(Z)return new Uo(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!w)return null;switch(w){case"facebook.com":return new hu(P,T);case"github.com":return new Hr(P,T);case"google.com":return new xh(P,T);case"twitter.com":return new Dc(P,T,_.screenName||null);case"custom":case"anonymous":return new Uo(P,null);default:return new Uo(P,w,T)}}(p)}class ls{constructor(f,p){this.type=f,this.credential=p}static _fromIdtoken(f){return new ls("enroll",f)}static _fromMfaPendingCredential(f){return new ls("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,w;if(null==f?void 0:f.multiFactorSession){if(null===(p=f.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return ls._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return ls._fromIdtoken(f.multiFactorSession.idToken)}return null}}class lo{constructor(f,p,w){this.session=f,this.hints=p,this.signInResolver=w}static _fromError(f,p){const w=ct(f),T=p.customData._serverResponse,P=(T.mfaInfo||[]).map(ae=>Vs._fromServerResponse(w,ae));z(T.mfaPendingCredential,w,"internal-error");const Z=ls._fromMfaPendingCredential(T.mfaPendingCredential);return new lo(Z,P,function(){var ae=(0,d.Z)(function*(Fe){const Ye=yield Fe._process(w,Z);delete T.mfaInfo,delete T.mfaPendingCredential;const ft=Object.assign(Object.assign({},T),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(p.operationType){case"signIn":const ht=yield ti._fromIdTokenResponse(w,p.operationType,ft);return yield w._updateCurrentUser(ht.user),ht;case"reauthenticate":return z(p.user,w,"internal-error"),ti._forOperation(p.user,p.operationType,ft);default:Te(w,"internal-error")}});return function(Fe){return ae.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,d.Z)(function*(){return p.signInResolver(f)})()}}function Wl(_,f){return kt(_,"POST","/v2/accounts/mfaEnrollment:start",Ht(_,f))}class Bo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>Vs._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Bo(f)}getSession(){var f=this;return(0,d.Z)(function*(){return ls._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,p){var w=this;return(0,d.Z)(function*(){const T=f,P=yield w.getSession(),Z=yield pr(w.user,T._process(w.user.auth,P,p));return yield w.user._updateTokensIfNecessary(Z),w.user.reload()})()}unenroll(f){var p=this;return(0,d.Z)(function*(){var w;const T="string"==typeof f?f:f.uid,P=yield p.user.getIdToken(),Z=yield pr(p.user,function ho(_,f){return kt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(_,f))}(p.user.auth,{idToken:P,mfaEnrollmentId:T}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ae})=>ae!==T),yield p.user._updateTokensIfNecessary(Z);try{yield p.user.reload()}catch(ae){if("auth/user-token-expired"!==(null===(w=ae)||void 0===w?void 0:w.code))throw ae}})()}}const fu=new WeakMap,ds="__sak";class pu{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(ds,"1"),this.storage.removeItem(ds),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Tr=(()=>{class _ extends pu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Op(){const _=(0,N.z$)();return Mo(_)||Ur(_)}()&&function rr(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=Ps(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const T=this.storage.getItem(w),P=this.localCache[w];T!==P&&p(w,P,T)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((ae,Fe,Ye)=>{this.notifyListeners(ae,Ye)});const T=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(T);if(p.newValue!==ae)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!w)return}const P=()=>{const ae=this.storage.getItem(T);!w&&this.localCache[T]===ae||this.notifyListeners(T,ae)},Z=this.storage.getItem(T);!function oa(){return(0,N.w1)()&&10===document.documentMode}()||Z===p.newValue||p.newValue===p.oldValue?P():setTimeout(P,10)}notifyListeners(p,w){this.localCache[p]=w;const T=this.listeners[p];if(T)for(const P of Array.from(T))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var T=()=>super._set,P=this;return(0,d.Z)(function*(){yield T().call(P,p,w),P.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,T=this;return(0,d.Z)(function*(){const P=yield w().call(T,p);return T.localCache[p]=JSON.stringify(P),P})()}_remove(p){var w=()=>super._remove,T=this;return(0,d.Z)(function*(){yield w().call(T,p),delete T.localCache[p]})()}}return _.type="LOCAL",_})(),On=(()=>{class _ extends pu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return _.type="SESSION",_})();let Kl=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(P=>P.isListeningto(p));if(w)return w;const T=new _(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,d.Z)(function*(){const T=p,{eventId:P,eventType:Z,data:ae}=T.data,Fe=w.handlersMap[Z];if(!(null==Fe?void 0:Fe.size))return;T.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const Ye=Array.from(Fe).map(function(){var ht=(0,d.Z)(function*(Cn){return Cn(T.origin,ae)});return function(Cn){return ht.apply(this,arguments)}}()),ft=yield function _a(_){return Promise.all(_.map(function(){var f=(0,d.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return f.apply(this,arguments)}}()))}(Ye);T.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:ft})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function jo(_="",f=10){let p="";for(let w=0;w<f;w++)p+=Math.floor(10*Math.random());return _+p}class Bs{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,w=50){var T=this;return(0,d.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,ae;return new Promise((Fe,Ye)=>{const ft=jo("",20);P.port1.start();const ht=setTimeout(()=>{Ye(new Error("unsupported_event"))},w);ae={messageChannel:P,onMessage(Cn){const ai=Cn;if(ai.data.eventId===ft)switch(ai.data.status){case"ack":clearTimeout(ht),Z=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Fe(ai.data.response);break;default:clearTimeout(ht),clearTimeout(Z),Ye(new Error("invalid_response"))}}},T.handlers.add(ae),P.port1.addEventListener("message",ae.onMessage),T.target.postMessage({eventType:f,eventId:ft,data:p},[P.port2])}).finally(()=>{ae&&T.removeMessageHandler(ae)})})()}}function wn(){return window}function Hi(){return void 0!==wn().WorkerGlobalScope&&"function"==typeof wn().importScripts}function Yl(){return(Yl=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const ya="firebaseLocalStorageDb",Gi="firebaseLocalStorage",gu="fbase_key";class hs{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function $s(_,f){return _.transaction([Gi],f?"readwrite":"readonly").objectStore(Gi)}function $o(){const _=indexedDB.open(ya,1);return new Promise((f,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(Gi,{keyPath:gu})}catch(T){p(T)}}),_.addEventListener("success",(0,d.Z)(function*(){const w=_.result;w.objectStoreNames.contains(Gi)?f(w):(w.close(),yield function Hs(){const _=indexedDB.deleteDatabase(ya);return new hs(_).toPromise()}(),f(yield $o()))}))})}function va(_,f,p){return fo.apply(this,arguments)}function fo(){return(fo=(0,d.Z)(function*(_,f,p){const w=$s(_,!0).put({[gu]:f,value:p});return new hs(w).toPromise()})).apply(this,arguments)}function Ho(){return(Ho=(0,d.Z)(function*(_,f){const p=$s(_,!1).get(f),w=yield new hs(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function wa(_,f){const p=$s(_,!0).delete(f);return new hs(p).toPromise()}const go=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,d.Z)(function*(){return p.db||(p.db=yield $o()),p.db})()}_withRetries(p){var w=this;return(0,d.Z)(function*(){let T=0;for(;;)try{const P=yield w._openDb();return yield p(P)}catch(P){if(T++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,d.Z)(function*(){return Hi()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,d.Z)(function*(){p.receiver=Kl._getInstance(function Tc(){return Hi()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(T,P){return{keyProcessed:(yield p._poll()).includes(P.key)}});return function(T,P){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(T,P){return["keyChanged"]});return function(T,P){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,d.Z)(function*(){var w,T;if(p.activeServiceWorker=yield function Tt(){return Yl.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Bs(p.activeServiceWorker);const P=yield p.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(T=P[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Ql(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const p=yield $o();return yield va(p,ds,"1"),yield wa(p,ds),!0}catch(p){}return!1})()}_withPendingWrite(p){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var T=this;return(0,d.Z)(function*(){return T._withPendingWrite((0,d.Z)(function*(){return yield T._withRetries(P=>va(P,p,w)),T.localCache[p]=w,T.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,d.Z)(function*(){const T=yield w._withRetries(P=>function po(_,f){return Ho.apply(this,arguments)}(P,p));return w.localCache[p]=T,T})()}_remove(p){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(T=>wa(T,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,d.Z)(function*(){const w=yield p._withRetries(Z=>{const ae=$s(Z,!1).getAll();return new hs(ae).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const T=[],P=new Set;for(const{fbase_key:Z,value:ae}of w)P.add(Z),JSON.stringify(p.localCache[Z])!==JSON.stringify(ae)&&(p.notifyListeners(Z,ae),T.push(Z));for(const Z of Object.keys(p.localCache))p.localCache[Z]&&!P.has(Z)&&(p.notifyListeners(Z,null),T.push(Z));return T})()}notifyListeners(p,w){this.localCache[p]=w;const T=this.listeners[p];if(T)for(const P of Array.from(T))P(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Gn(_,f){return kt(_,"POST","/v2/accounts/mfaSignIn:start",Ht(_,f))}function hn(){return(hn=(0,d.Z)(function*(_){return(yield kt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function qi(_){return new Promise((f,p)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=f,w.onerror=T=>{const P=_e("internal-error");P.customData=T,p(P)},w.type="text/javascript",w.charset="UTF-8",function Go(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(w)})}function Gs(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Sr=1e12;class Jn{constructor(f){this.auth=f,this.counter=Sr,this._widgets=new Map}render(f,p){const w=this.counter;return this._widgets.set(w,new zi(f,this.auth.name,p||{})),this.counter++,w}reset(f){var p;const w=f||Sr;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(f){var p;return(null===(p=this._widgets.get(f||Sr))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,d.Z)(function*(){var w;return null===(w=p._widgets.get(f||Sr))||void 0===w||w.execute(),""})()}}class zi{constructor(f,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;z(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jl(_){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sc=Gs("rcb"),dn=new Yt(3e4,6e4);class ed{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=wn().grecaptcha)||void 0===f?void 0:f.render)}load(f,p=""){return z(function ba(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(p),f,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(wn().grecaptcha):new Promise((w,T)=>{const P=wn().setTimeout(()=>{T(_e(f,"network-request-failed"))},dn.get());wn()[Sc]=()=>{wn().clearTimeout(P),delete wn()[Sc];const ae=wn().grecaptcha;if(!ae)return void T(_e(f,"internal-error"));const Fe=ae.render;ae.render=(Ye,ft)=>{const ht=Fe(Ye,ft);return this.counter++,ht},this.hostLanguage=p,w(ae)},qi(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:Sc,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(P),T(_e(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!!(null===(p=wn().grecaptcha)||void 0===p?void 0:p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ei{load(f){return(0,d.Z)(function*(){return new Jn(f)})()}clearedOneInstance(){}}const Ph="recaptcha",mo={theme:"light",type:"image"};class Rh{constructor(f,p=Object.assign({},mo),w){this.parameters=p,this.type=Ph,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ct(w),this.isInvisible="invisible"===this.parameters.size,z("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;z(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ei:new ed,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(p)||new Promise(P=>{const Z=ae=>{!ae||(f.tokenChangeListeners.delete(Z),P(ae))};f.tokenChangeListeners.add(Z),f.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof f)f(p);else if("string"==typeof f){const w=wn()[f];"function"==typeof w&&w(p)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){z(lt()&&!Hi(),f.auth,"internal-error"),yield function fs(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function Ar(_){return hn.apply(this,arguments)}(f.auth);z(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class td{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=Oo._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function qo(){return(qo=(0,d.Z)(function*(_,f,p){const w=ct(_),T=yield xr(w,f,(0,N.m9)(p));return new td(T,P=>cn(w,P))})).apply(this,arguments)}function nd(){return(nd=(0,d.Z)(function*(_,f,p){const w=(0,N.m9)(_);yield zt(!1,w,"phone");const T=yield xr(w.auth,f,(0,N.m9)(p));return new td(T,P=>or(w,P))})).apply(this,arguments)}function Mr(){return(Mr=(0,d.Z)(function*(_,f,p){const w=(0,N.m9)(_),T=yield xr(w.auth,f,(0,N.m9)(p));return new td(T,P=>us(w,P))})).apply(this,arguments)}function xr(_,f,p){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(_,f,p){var w;const T=yield p.verify();try{let P;if(z("string"==typeof T,_,"argument-error"),z(p.type===Ph,_,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const Z=P.session;if("phoneNumber"in P)return z("enroll"===Z.type,_,"internal-error"),(yield Wl(_,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{z("signin"===Z.type,_,"internal-error");const ae=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return z(ae,_,"missing-multi-factor-info"),(yield Gn(_,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield bp(_,{phoneNumber:P.phoneNumber,recaptchaToken:T});return Z}}finally{p._reset()}})).apply(this,arguments)}function _o(){return(_o=(0,d.Z)(function*(_,f){yield la((0,N.m9)(_),f)})).apply(this,arguments)}let zo=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=ct(p)}verifyPhoneNumber(p,w){return xr(this.auth,p,(0,N.m9)(w))}static credential(p,w){return Oo._fromVerification(p,w)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:T}=p;return w&&T?Oo._fromTokenResponse(w,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function qs(_,f){return f?ee(f):(z(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class mu extends gi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ks(f,this._buildIdpRequest())}_linkToIdToken(f,p){return ks(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return ks(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function Nt(_){return sr(_.auth,new mu(_),_.bypassAuthState)}function rd(_){const{auth:f,user:p}=_;return z(p,f,"internal-error"),nu(p,new mu(_),_.bypassAuthState)}function ps(_){return qn.apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(_){const{auth:f,user:p}=_;return z(p,f,"internal-error"),la(p,new mu(_),_.bypassAuthState)})).apply(this,arguments)}class zs{constructor(f,p,w,T,P=!1){this.auth=f,this.resolver=w,this.user=T,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,d.Z)(function*(w,T){f.pendingPromise={resolve:w,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(w,T){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:T,postBody:P,tenantId:Z,error:ae,type:Fe}=f;if(ae)return void p.reject(ae);const Ye={auth:p.auth,requestUri:w,sessionId:T,tenantId:Z||void 0,postBody:P||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Fe)(Ye))}catch(ft){p.reject(ft)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Nt;case"linkViaPopup":case"linkViaRedirect":return ps;case"reauthViaPopup":case"reauthViaRedirect":return rd;default:Te(this.auth,"internal-error")}}resolve(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zs=new Yt(2e3,1e4);function Zo(){return(Zo=(0,d.Z)(function*(_,f,p){const w=ct(_);Ue(_,f,_r);const T=qs(w,p);return new sd(w,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function xc(){return(xc=(0,d.Z)(function*(_,f,p){const w=(0,N.m9)(_);Ue(w.auth,f,_r);const T=qs(w.auth,p);return new sd(w.auth,"reauthViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}function _u(){return(_u=(0,d.Z)(function*(_,f,p){const w=(0,N.m9)(_);Ue(w.auth,f,_r);const T=qs(w.auth,p);return new sd(w.auth,"linkViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}let sd=(()=>{class _ extends zs{constructor(p,w,T,P,Z){super(p,w,P,Z),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,d.Z)(function*(){const w=yield p.execute();return z(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,d.Z)(function*(){K(1===p.filter.length,"Popup operations only handle one event");const w=jo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,T;this.pollId=(null===(T=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Zs.get())};p()}}return _.currentPopupAction=null,_})();const Xn=new Map;class yu extends zs{constructor(f,p,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,d.Z)(function*(){let w=Xn.get(p.auth._key());if(!w){try{const P=(yield function Pp(_,f){return Or.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;w=()=>Promise.resolve(P)}catch(T){w=()=>Promise.reject(T)}Xn.set(p.auth._key(),w)}return p.bypassAuthState||Xn.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(w,f);if("unknown"!==f.type){if(f.eventId){const T=yield w.auth._redirectUserForId(f.eventId);if(T)return w.user=T,p().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Or(){return(Or=(0,d.Z)(function*(_,f){const p=wu(f),w=vu(_);if(!(yield w._isAvailable()))return!1;const T="true"===(yield w._get(p));return yield w._remove(p),T})).apply(this,arguments)}function Wo(_,f){return si.apply(this,arguments)}function si(){return(si=(0,d.Z)(function*(_,f){return vu(_)._set(wu(f),"true")})).apply(this,arguments)}function ad(_,f){Xn.set(_._key(),f)}function vu(_){return ee(_._redirectPersistence)}function wu(_){return Yn("pendingRedirect",_.config.apiKey,_.name)}function C(){return(C=(0,d.Z)(function*(_,f,p){const w=ct(_);Ue(_,f,_r);const T=qs(w,p);return yield Wo(T,w),T._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,d.Z)(function*(_,f,p){const w=(0,N.m9)(_);Ue(w.auth,f,_r);const T=qs(w.auth,p);yield Wo(T,w.auth);const P=yield rt(w);return T._openRedirect(w.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function be(){return(be=(0,d.Z)(function*(_,f,p){const w=(0,N.m9)(_);Ue(w.auth,f,_r);const T=qs(w.auth,p);yield zt(!1,w,f.providerId),yield Wo(T,w.auth);const P=yield rt(w);return T._openRedirect(w.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(_,f){return yield ct(_)._initializationPromise,vt(_,f,!1)})).apply(this,arguments)}function vt(_,f){return bt.apply(this,arguments)}function bt(){return(bt=(0,d.Z)(function*(_,f,p=!1){const w=ct(_),T=qs(w,f),Z=yield new yu(w,T,p).execute();return Z&&!p&&(delete Z.user._redirectEventId,yield w._persistUserIfCurrent(Z.user),yield w._setRedirectUser(null,f)),Z})).apply(this,arguments)}function rt(_){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(_){const f=jo(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Ws{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(p=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Cu(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wi(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var w;if(f.error&&!Wi(f)){const T=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,T))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const w=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ks(f))}saveEventToCache(f){this.cachedEventUids.add(Ks(f)),this.lastProcessedEventTime=Date.now()}}function Ks(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Wi({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ta(_){return yo.apply(this,arguments)}function yo(){return(yo=(0,d.Z)(function*(_,f={}){return kt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Ki=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ci=/^https?/;function Fh(){return(Fh=(0,d.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Ta(_);for(const p of f)try{if(o0(p))return}catch(w){}Te(_,"unauthorized-domain")})).apply(this,arguments)}function o0(_){const f=Ne(),{protocol:p,hostname:w}=new URL(f);if(_.startsWith("chrome-extension://")){const Z=new URL(_);return""===Z.hostname&&""===w?"chrome-extension:"===p&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&Z.hostname===w}if(!Ci.test(p))return!1;if(Ki.test(_))return w===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(w)}const Rp=new Yt(3e4,6e4);function Lh(){const _=wn().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let bu=null;function vo(_){return bu=bu||function Np(_){return new Promise((f,p)=>{var w,T,P;function Z(){Lh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Lh(),p(_e(_,"network-request-failed"))},timeout:Rp.get()})}if(null===(T=null===(w=wn().gapi)||void 0===w?void 0:w.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(P=wn().gapi)||void 0===P?void 0:P.load)){const ae=Gs("iframefcb");return wn()[ae]=()=>{gapi.load?Z():p(_e(_,"network-request-failed"))},qi(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Fe=>p(Fe))}Z()}}).catch(f=>{throw bu=null,f})}(_),bu}const Iu=new Yt(5e3,15e3),Du={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kp(_){const f=_.config;z(f.authDomain,_,"auth-domain-config-required");const p=f.emulator?mn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:_.name,v:le.SDK_VERSION},T=Tu.get(_.config.apiHost);T&&(w.eid=T);const P=_._getFrameworks();return P.length&&(w.fw=P.join(",")),`${p}?${(0,N.xO)(w).slice(1)}`}function wo(){return wo=(0,d.Z)(function*(_){const f=yield vo(_),p=wn().gapi;return z(p,_,"internal-error"),f.open({where:document.body,url:kp(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Du,dontclear:!0},w=>new Promise(function(){var T=(0,d.Z)(function*(P,Z){yield w.restyle({setHideOnLeave:!1});const ae=_e(_,"network-request-failed"),Fe=wn().setTimeout(()=>{Z(ae)},Iu.get());function Ye(){wn().clearTimeout(Fe),P(w)}w.ping(Ye).then(Ye,()=>{Z(ae)})});return function(P,Z){return T.apply(this,arguments)}}()))}),wo.apply(this,arguments)}const cd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fp{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function bi(_,f,p,w,T,P){z(_.config.authDomain,_,"auth-domain-config-required"),z(_.config.apiKey,_,"invalid-api-key");const Z={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:w,v:le.SDK_VERSION,eventId:T};if(f instanceof _r){f.setDefaultLanguage(_.languageCode),Z.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,Ye]of Object.entries(P||{}))Z[Fe]=Ye}if(f instanceof ro){const Fe=f.getScopes().filter(Ye=>""!==Ye);Fe.length>0&&(Z.scopes=Fe.join(","))}_.tenantId&&(Z.tid=_.tenantId);const ae=Z;for(const Fe of Object.keys(ae))void 0===ae[Fe]&&delete ae[Fe];return`${function Eo({config:_}){return _.emulator?mn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,N.xO)(ae).slice(1)}`}const Rc="webStorageSupport";class fd extends class u0{constructor(f){this.factorId=f}_process(f,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,w);case"signin":return this._finalizeSignIn(f,p.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new fd(f)}_finalizeEnroll(f,p,w){return function Mp(_,f){return kt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(_,f))}(f,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function Ac(_,f){return kt(_,"POST","/v2/accounts/mfaSignIn:finalize",Ht(_,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let c0=(()=>{class _{constructor(){}static assertion(p){return fd._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var Uh="@firebase/auth";class Up{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,d.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(w=>{var T;f((null===(T=w)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);!p||(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Aa(){return window}function Yi(){return(Yi=(0,d.Z)(function*(_,f,p){var w;const{BuildInfo:T}=Aa();K(f.sessionId,"AuthEvent did not contain a session ID");const P=yield l0(f.sessionId),Z={};return Ur()?Z.ibi=T.packageName:br()?Z.apn=T.packageName:Te(_,"operation-not-supported-in-this-environment"),T.displayName&&(Z.appDisplayName=T.displayName),Z.sessionId=P,bi(_,p,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,Z)})).apply(this,arguments)}function gd(){return(gd=(0,d.Z)(function*(_){const{BuildInfo:f}=Aa(),p={};Ur()?p.iosBundleId=f.packageName:br()?p.androidPackageName=f.packageName:Te(_,"operation-not-supported-in-this-environment"),yield Ta(_,p)})).apply(this,arguments)}function Bp(){return(Bp=(0,d.Z)(function*(_,f,p){const{cordova:w}=Aa();let T=()=>{};try{yield new Promise((P,Z)=>{let ae=null;function Fe(){var ht;P();const Cn=null===(ht=w.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof Cn&&Cn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Ye(){ae||(ae=window.setTimeout(()=>{Z(_e(_,"redirect-cancelled-by-user"))},2e3))}function ft(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}f.addPassiveListener(Fe),document.addEventListener("resume",Ye,!1),br()&&document.addEventListener("visibilitychange",ft,!1),T=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",ft,!1),ae&&window.clearTimeout(ae)}})}finally{T()}})).apply(this,arguments)}function l0(_){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,d.Z)(function*(_){const f=jh(_),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function jh(_){if(K(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),p=new Uint8Array(f);for(let w=0;w<_.length;w++)p[w]=_.charCodeAt(w);return p}!function r_(_){(0,le._registerComponent)(new de.wA("auth",(f,{options:p})=>{const w=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:P,authDomain:Z}=w.options;return((ae,Fe)=>{z(P&&!P.includes(":"),"invalid-api-key",{appName:ae.name}),z(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:ae.name});const Ye={apiKey:P,authDomain:Z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xo(_)},ft=new ze(ae,Fe,Ye);return function oe(_,f){const p=(null==f?void 0:f.persistence)||[],w=(Array.isArray(p)?p:[p]).map(ee);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(ft,p),ft})(w,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,w)=>{f.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new de.wA("auth-internal",f=>{const p=ct(f.getProvider("auth").getImmediate());return new Up(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(Uh,"0.20.5",function pd(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,le.registerVersion)(Uh,"0.20.5","esm2017")}("Browser");class _d extends Ws{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function Su(_){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,d.Z)(function*(_){const f=yield Vc()._get(Mu(_));return f&&(yield Vc()._remove(Mu(_))),f})).apply(this,arguments)}function $p(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const w=Math.floor(Math.random()*f.length);_.push(f.charAt(w))}return _.join("")}function Vc(){return ee(Tr)}function Mu(_){return Yn("authEvent",_.config.apiKey,_.name)}function Gr(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...p]=_.split("?");return(0,N.zd)(p.join("?"))}function Sa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Yo(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function zp(_=(0,N.z$)()){return!("file:"!==Yo()&&"ionic:"!==Yo()&&"capacitor:"!==Yo()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gh(){try{const _=self.localStorage,f=jo();if(_)return _.setItem(f,"1"),_.removeItem(f),!function wd(_=(0,N.z$)()){return function xu(){return(0,N.w1)()&&11===(null==document?void 0:document.documentMode)}()||function er(_=(0,N.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,N.hl)()}catch(_){return Ed()&&(0,N.hl)()}return!1}function Ed(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ur(){return(function qp(){return"http:"===Yo()||"https:"===Yo()}()||(0,N.ru)()||zp())&&!function Hh(){return(0,N.b$)()||(0,N.UG)()}()&&Gh()&&!Ed()}function Ou(){return zp()&&"undefined"!=typeof document}function Bc(){return(Bc=(0,d.Z)(function*(){return!!Ou()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const qr={LOCAL:"local",NONE:"none",SESSION:"session"},Qo=z,zh="persistence";function Ma(_){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,d.Z)(function*(_){yield _._initializationPromise;const f=Cd(),p=Yn(zh,_.config.apiKey,_.name);f&&f.setItem(p,_._getPersistence())})).apply(this,arguments)}function Cd(){var _;try{return(null===(_=function l_(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const h_=z;class Qi{constructor(){this.browserResolver=ee(class n_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=On,this._completeRedirectFn=vt,this._overrideRedirectResult=ad}_openPopup(f,p,w,T){var P=this;return(0,d.Z)(function*(){var Z;K(null===(Z=P.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ae=bi(f,p,w,Ne(),T);return function Pc(_,f,p,w=500,T=600){const P=Math.max((window.screen.availHeight-T)/2,0).toString(),Z=Math.max((window.screen.availWidth-w)/2,0).toString();let ae="";const Fe=Object.assign(Object.assign({},cd),{width:w.toString(),height:T.toString(),top:P,left:Z}),Ye=(0,N.z$)().toLowerCase();p&&(ae=sa(Ye)?"_blank":p),Ri(Ye)&&(f=f||"http://localhost",Fe.scrollbars="yes");const ft=Object.entries(Fe).reduce((Cn,[ai,Pu])=>`${Cn}${ai}=${Pu},`,"");if(function to(_=(0,N.z$)()){var f;return Ur(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ye)&&"_self"!==ae)return function Xm(_,f){const p=document.createElement("a");p.href=_,p.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(f||"",ae),new Fp(null);const ht=window.open(f||"",ae,ft);z(ht,_,"popup-blocked");try{ht.focus()}catch(Cn){}return new Fp(ht)}(f,ae,jo())})()}_openRedirect(f,p,w,T){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(f),function js(_){wn().location.href=_}(bi(f,p,w,Ne(),T)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:T,promise:P}=this.eventManagers[p];return T?Promise.resolve(T):(K(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(f);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(f){var p=this;return(0,d.Z)(function*(){const w=yield function a0(_){return wo.apply(this,arguments)}(f),T=new Ws(f);return w.register("authEvent",P=>(z(null==P?void 0:P.authEvent,f,"invalid-auth-event"),{status:T.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:T},p.iframes[f._key()]=w,T})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Rc,{type:Rc},T=>{var P;const Z=null===(P=null==T?void 0:T[0])||void 0===P?void 0:P[Rc];void 0!==Z&&p(!!Z),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ko(_){return Fh.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ps()||Mo()||Ur()}}),this.cordovaResolver=ee(class Hp{constructor(){this._redirectPersistence=On,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vt,this._overrideRedirectResult=ad}_initialize(f){var p=this;return(0,d.Z)(function*(){const w=f._key();let T=p.eventManagers.get(w);return T||(T=new _d(f),p.eventManagers.set(w,T),p.attachCallbackListeners(f,T)),T})()}_openPopup(f){Te(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,w,T){var P=this;return(0,d.Z)(function*(){!function Au(_){var f,p,w,T,P,Z,ae,Fe,Ye,ft;const ht=Aa();z("function"==typeof(null===(f=null==ht?void 0:ht.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(void 0!==(null===(p=null==ht?void 0:ht.BuildInfo)||void 0===p?void 0:p.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z("function"==typeof(null===(P=null===(T=null===(w=null==ht?void 0:ht.cordova)||void 0===w?void 0:w.plugins)||void 0===T?void 0:T.browsertab)||void 0===P?void 0:P.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(Fe=null===(ae=null===(Z=null==ht?void 0:ht.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Fe?void 0:Fe.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(ft=null===(Ye=null==ht?void 0:ht.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===ft?void 0:ft.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield P._initialize(f);yield Z.initialized(),Z.resetRedirect(),function od(){Xn.clear()}(),yield P._originValidation(f);const ae=function yd(_,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:$p(),postBody:null,tenantId:_.tenantId,error:_e(_,"no-auth-event")}}(f,w,T);yield function jp(_,f){return Vc()._set(Mu(_),f)}(f,ae);const Fe=yield function Bh(_,f,p){return Yi.apply(this,arguments)}(f,ae,p),Ye=yield function md(_){const{cordova:f}=Aa();return new Promise(p=>{f.plugins.browsertab.isAvailable(w=>{let T=null;w?f.plugins.browsertab.openUrl(_):T=f.InAppBrowser.open(_,function Ml(_=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(T)})})}(Fe);return function Co(_,f,p){return Bp.apply(this,arguments)}(f,Z,Ye)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function kc(_){return gd.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:w,handleOpenURL:T,BuildInfo:P}=Aa(),Z=setTimeout((0,d.Z)(function*(){yield Su(f),p.onEvent(Sa())}),500),ae=function(){var ft=(0,d.Z)(function*(ht){clearTimeout(Z);const Cn=yield Su(f);let ai=null;Cn&&(null==ht?void 0:ht.url)&&(ai=function s_(_,f){var p,w;const T=function Uc(_){const f=Gr(_),p=f.link?decodeURIComponent(f.link):void 0,w=Gr(p).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Gr(T).link||T||w||p||_}(f);if(T.includes("/__/auth/callback")){const P=Gr(T),Z=P.firebaseError?function o_(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(P.firebaseError)):null,ae=null===(w=null===(p=null==Z?void 0:Z.code)||void 0===p?void 0:p.split("auth/"))||void 0===w?void 0:w[1],Fe=ae?_e(ae):null;return Fe?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(Cn,ht.url)),p.onEvent(ai||Sa())});return function(Cn){return ft.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,ae);const Fe=T,Ye=`${P.packageName.toLowerCase()}://`;Aa().handleOpenURL=function(){var ft=(0,d.Z)(function*(ht){if(ht.toLowerCase().startsWith(Ye)&&ae({url:ht}),"function"==typeof Fe)try{Fe(ht)}catch(Cn){console.error(Cn)}});return function(ht){return ft.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=On,this._completeRedirectFn=vt,this._overrideRedirectResult=ad}_initialize(f){var p=this;return(0,d.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,w,T){var P=this;return(0,d.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(f,p,w,T)})()}_openRedirect(f,p,w,T){var P=this;return(0,d.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(f,p,w,T)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Ou()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return h_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const p=yield function qh(){return Bc.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function bd(_){return _.unwrap()}function p_(_){return Zp(_)}function Zp(_){const{_tokenResponse:f}=_ instanceof N.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return zo.credentialFromResult(_);const p=f.providerId;if(!p||"password"===p)return null;let w;switch(p){case"google.com":w=Vl;break;case"facebook.com":w=Po;break;case"github.com":w=Sh;break;case"twitter.com":w=Bl;break;default:const{oauthIdToken:T,oauthAccessToken:P,oauthTokenSecret:Z,pendingToken:ae,nonce:Fe}=f;return P||Z||T||ae?ae?p.startsWith("saml.")?io._create(p,ae):as._fromParams({providerId:p,signInMethod:p,pendingToken:ae,idToken:T,accessToken:P}):new Ui(p).credential({idToken:T,accessToken:P,rawNonce:Fe}):null}return _ instanceof N.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function oi(_,f){return f.catch(p=>{throw p instanceof N.ZR&&function Id(_,f){var p,w;const T=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=f)||void 0===w?void 0:w.code))f.resolver=new g_(_,function Hn(_,f){var p;const w=(0,N.m9)(_),T=f;return z(f.customData.operationType,w,"argument-error"),z(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),lo._fromError(w,T)}(_,f));else if(T){const P=Zp(f),Z=f;P&&(Z.credential=P,Z.tenantId=T.tenantId||void 0,Z.email=T.email||void 0,Z.phoneNumber=T.phoneNumber||void 0)}}(_,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:p_(p),additionalUserInfo:Qn(p),user:ms.getOrCreate(T)}})}function Wh(_,f){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,d.Z)(function*(_,f){const p=yield f;return{verificationId:p.verificationId,confirm:w=>oi(_,p.confirm(w))}})).apply(this,arguments)}class g_{constructor(f,p){this.resolver=p,this.auth=function f_(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return oi(bd(this.auth),this.resolver.resolveSignIn(f))}}class ms{constructor(f){this._delegate=f,this.multiFactor=function xp(_){const f=(0,N.m9)(_);return fu.has(f)||fu.set(f,Bo._fromUser(f)),fu.get(f)}(f)}static getOrCreate(f){return ms.USER_MAP.has(f)||ms.USER_MAP.set(f,new ms(f)),ms.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,d.Z)(function*(){return oi(p.auth,or(p._delegate,f))})()}linkWithPhoneNumber(f,p){var w=this;return(0,d.Z)(function*(){return Wh(w.auth,function Ia(_,f,p){return nd.apply(this,arguments)}(w._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,d.Z)(function*(){return oi(p.auth,function kh(_,f,p){return _u.apply(this,arguments)}(p._delegate,f,Qi))})()}linkWithRedirect(f){var p=this;return(0,d.Z)(function*(){return yield Ma(ct(p.auth)),function Y(_,f,p){return function re(_,f,p){return be.apply(this,arguments)}(_,f,p)}(p._delegate,f,Qi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,d.Z)(function*(){return oi(p.auth,us(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return Wh(this.auth,function Nh(_,f,p){return Mr.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return oi(this.auth,function gs(_,f,p){return xc.apply(this,arguments)}(this._delegate,f,Qi))}reauthenticateWithRedirect(f){var p=this;return(0,d.Z)(function*(){return yield Ma(ct(p.auth)),function D(_,f,p){return function x(_,f,p){return F.apply(this,arguments)}(_,f,p)}(p._delegate,f,Qi)})()}sendEmailVerification(f){return function yi(_,f){return bc.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,d.Z)(function*(){return yield function Mh(_,f){return tn.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function Hl(_,f){return du((0,N.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function Gl(_,f){return du((0,N.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Mc(_,f){return _o.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function cu(_,f){return lu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function au(_,f,p){return uu.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ms.USER_MAP=new WeakMap;const $c=z;let Wp=(()=>{class _{constructor(p,w){if(this.app=p,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;$c(T,"invalid-api-key",{appName:p.name}),$c(T,"invalid-api-key",{appName:p.name});const P="undefined"!=typeof window?Qi:void 0;this._delegate=w.initialize({options:{persistence:m_(T,p.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Pe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ms.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,w){!function jr(_,f,p){const w=ct(_);z(w._canInitEmulator,w,"emulator-config-failed"),z(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),P=Ni(f),{host:Z,port:ae}=function Mn(_){const f=Ni(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(w);if(T){const P=T[1];return{host:P,port:ki(w.substr(P.length+1))}}{const[P,Z]=w.split(":");return{host:P,port:ki(Z)}}}(f);w.config.emulator={url:`${P}//${Z}${null===ae?"":`:${ae}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Z,port:ae,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function sn(){function _(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,w)}applyActionCode(p){return function Lo(_,f){return Se.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Ft(this._delegate,p)}confirmPasswordReset(p,w){return function iu(_,f,p){return vc.apply(this,arguments)}(this._delegate,p,w)}createUserWithEmailAndPassword(p,w){var T=this;return(0,d.Z)(function*(){return oi(T._delegate,function ao(_,f,p){return ni.apply(this,arguments)}(T._delegate,p,w))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function ou(_,f){return Us.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function $l(_,f){const p=tu.parseLink(f);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,d.Z)(function*(){$c(ur(),p._delegate,"operation-not-supported-in-this-environment");const w=yield function He(_,f){return at.apply(this,arguments)}(p._delegate,Qi);return w?oi(p._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Gp(_,f){ct(_)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,w,T){const{next:P,error:Z,complete:ae}=Kp(p,w,T);return this._delegate.onAuthStateChanged(P,Z,ae)}onIdTokenChanged(p,w,T){const{next:P,error:Z,complete:ae}=Kp(p,w,T);return this._delegate.onIdTokenChanged(P,Z,ae)}sendSignInLinkToEmail(p,w){return function Ec(_,f,p){return Cc.apply(this,arguments)}(this._delegate,p,w)}sendPasswordResetEmail(p,w){return function yc(_,f,p){return ru.apply(this,arguments)}(this._delegate,p,w||void 0)}setPersistence(p){var w=this;return(0,d.Z)(function*(){let T;switch(function d_(_,f){Qo(Object.values(qr).includes(f),_,"invalid-persistence-type"),(0,N.b$)()?Qo(f!==qr.SESSION,_,"unsupported-persistence-type"):(0,N.UG)()?Qo(f===qr.NONE,_,"unsupported-persistence-type"):Ed()?Qo(f===qr.NONE||f===qr.LOCAL&&(0,N.hl)(),_,"unsupported-persistence-type"):Qo(f===qr.NONE||Gh(),_,"unsupported-persistence-type")}(w._delegate,p),p){case qr.SESSION:T=On;break;case qr.LOCAL:T=(yield ee(go)._isAvailable())?go:Tr;break;case qr.NONE:T=$t;break;default:return Te("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return oi(this._delegate,function jl(_){return pc.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return oi(this._delegate,cn(this._delegate,p))}signInWithCustomToken(p){return oi(this._delegate,function Fo(_,f){return _t.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,w){return oi(this._delegate,function wc(_,f,p){return cn((0,N.m9)(_),Ll.credential(f,p))}(this._delegate,p,w))}signInWithEmailLink(p,w){return oi(this._delegate,function Ap(_,f,p){return cs.apply(this,arguments)}(this._delegate,p,w))}signInWithPhoneNumber(p,w){return Wh(this._delegate,function En(_,f,p){return qo.apply(this,arguments)}(this._delegate,p,w))}signInWithPopup(p){var w=this;return(0,d.Z)(function*(){return $c(ur(),w._delegate,"operation-not-supported-in-this-environment"),oi(w._delegate,function id(_,f,p){return Zo.apply(this,arguments)}(w._delegate,p,Qi))})()}signInWithRedirect(p){var w=this;return(0,d.Z)(function*(){return $c(ur(),w._delegate,"operation-not-supported-in-this-environment"),yield Ma(w._delegate),function Eu(_,f,p){return function Zi(_,f,p){return C.apply(this,arguments)}(_,f,p)}(w._delegate,p,Qi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function an(_,f){return su.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=qr,_})();function Kp(_,f,p){let w=_;"function"!=typeof _&&({next:w,error:f,complete:p}=_);const T=w;return{next:Z=>T(Z&&ms.getOrCreate(Z)),error:f,complete:p}}function m_(_,f){const p=function jc(_,f){const p=Cd();if(!p)return[];const w=Yn(zh,_,f);switch(p.getItem(w)){case qr.NONE:return[$t];case qr.LOCAL:return[go,On];case qr.SESSION:return[On];default:return[]}}(_,f);if("undefined"!=typeof self&&!p.includes(go)&&p.push(go),"undefined"!=typeof window)for(const w of[Tr,On])p.includes(w)||p.push(w);return p.includes($t)||p.push($t),p}class Yh{constructor(){this.providerId="phone",this._delegate=new zo(bd(X.Z.auth()))}static credential(f,p){return zo.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}Yh.PHONE_SIGN_IN_METHOD=zo.PHONE_SIGN_IN_METHOD,Yh.PROVIDER_ID=zo.PROVIDER_ID;const Yp=z;class d0{constructor(f,p,w=X.Z.app()){var T;Yp(null===(T=w.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Rh(f,p,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function xa(_){_.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new Wp(p,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ll,FacebookAuthProvider:Po,GithubAuthProvider:Sh,GoogleAuthProvider:Vl,OAuthProvider:Ui,SAMLAuthProvider:Ir,PhoneAuthProvider:Yh,PhoneMultiFactorGenerator:c0,RecaptchaVerifier:d0,TwitterAuthProvider:Bl,Auth:Wp,AuthCredential:gi,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.18")}(X.Z)},8306:(Qe,we,R)=>{R.d(we,{y:()=>B});var d=R(2961),X=R(727),N=R(8822),le=R(4671);var de=R(2416),ue=R(576),pe=R(2806);let B=(()=>{class Ie{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const he=new Ie;return he.source=this,he.operator=Be,he}subscribe(Be,he,Ee){const qe=function $e(Ie){return Ie&&Ie instanceof d.Lv||function te(Ie){return Ie&&(0,ue.m)(Ie.next)&&(0,ue.m)(Ie.error)&&(0,ue.m)(Ie.complete)}(Ie)&&(0,X.Nn)(Ie)}(Be)?Be:new d.Hp(Be,he,Ee);return(0,pe.x)(()=>{const{operator:Ke,source:Te}=this;qe.add(Ke?Ke.call(qe,Te):Te?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Be){try{return this._subscribe(Be)}catch(he){Be.error(he)}}forEach(Be,he){return new(he=H(he))((Ee,qe)=>{const Ke=new d.Hp({next:Te=>{try{Be(Te)}catch(_e){qe(_e),Ke.unsubscribe()}},error:qe,complete:Ee});this.subscribe(Ke)})}_subscribe(Be){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Be)}[N.L](){return this}pipe(...Be){return function fe(Ie){return 0===Ie.length?le.y:1===Ie.length?Ie[0]:function(Be){return Ie.reduce((he,Ee)=>Ee(he),Be)}}(Be)(this)}toPromise(Be){return new(Be=H(Be))((he,Ee)=>{let qe;this.subscribe(Ke=>qe=Ke,Ke=>Ee(Ke),()=>he(qe))})}}return Ie.create=Pe=>new Ie(Pe),Ie})();function H(Ie){var Pe;return null!==(Pe=null!=Ie?Ie:de.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(Qe,we,R)=>{R.d(we,{x:()=>de});var d=R(8306),X=R(727);const le=(0,R(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=R(8737),fe=R(2806);let de=(()=>{class pe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const te=new ue(this,this);return te.operator=H,te}_throwIfClosed(){if(this.closed)throw new le}next(H){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(H)}})}error(H){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:te}=this;for(;te.length;)te.shift().error(H)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:te,isStopped:$e,observers:Ie}=this;return te||$e?X.Lc:(this.currentObservers=null,Ie.push(H),new X.w0(()=>{this.currentObservers=null,(0,ie.P)(Ie,H)}))}_checkFinalizedStatuses(H){const{hasError:te,thrownError:$e,isStopped:Ie}=this;te?H.error($e):Ie&&H.complete()}asObservable(){const H=new d.y;return H.source=this,H}}return pe.create=(B,H)=>new ue(B,H),pe})();class ue extends de{constructor(B,H){super(),this.destination=B,this.source=H}next(B){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===te||te.call(H,B)}error(B){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===te||te.call(H,B)}complete(){var B,H;null===(H=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===H||H.call(B)}_subscribe(B){var H,te;return null!==(te=null===(H=this.source)||void 0===H?void 0:H.subscribe(B))&&void 0!==te?te:X.Lc}}},2961:(Qe,we,R)=>{R.d(we,{Hp:()=>Be,Lv:()=>te});var d=R(576),X=R(727),N=R(2416),le=R(7849);function ie(){}const fe=pe("C",void 0,void 0);function pe(Te,_e,Ce){return{kind:Te,value:_e,error:Ce}}var B=R(3410),H=R(2806);class te extends X.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,X.Nn)(_e)&&_e.add(this)):this.destination=Ke}static create(_e,Ce,Ue){return new Be(_e,Ce,Ue)}next(_e){this.isStopped?qe(function ue(Te){return pe("N",Te,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?qe(function de(Te){return pe("E",void 0,Te)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?qe(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Ie(Te,_e){return $e.call(Te,_e)}class Pe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(_e)}catch(Ue){he(Ue)}}error(_e){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(_e)}catch(Ue){he(Ue)}else he(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ce){he(Ce)}}}class Be extends te{constructor(_e,Ce,Ue){let je;if(super(),(0,d.m)(_e)||!_e)je={next:null!=_e?_e:void 0,error:null!=Ce?Ce:void 0,complete:null!=Ue?Ue:void 0};else{let z;this&&N.v.useDeprecatedNextContext?(z=Object.create(_e),z.unsubscribe=()=>this.unsubscribe(),je={next:_e.next&&Ie(_e.next,z),error:_e.error&&Ie(_e.error,z),complete:_e.complete&&Ie(_e.complete,z)}):je=_e}this.destination=new Pe(je)}}function he(Te){N.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Te):(0,le.h)(Te)}function qe(Te,_e){const{onStoppedNotification:Ce}=N.v;Ce&&B.z.setTimeout(()=>Ce(Te,_e))}const Ke={closed:!0,next:ie,error:function Ee(Te){throw Te},complete:ie}},727:(Qe,we,R)=>{R.d(we,{Lc:()=>fe,w0:()=>ie,Nn:()=>de});var d=R(576);const N=(0,R(3888).d)(pe=>function(H){pe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((te,$e)=>`${$e+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var le=R(8737);class ie{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Ie of H)Ie.remove(this);else H.remove(this);const{initialTeardown:te}=this;if((0,d.m)(te))try{te()}catch(Ie){B=Ie instanceof N?Ie.errors:[Ie]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Ie of $e)try{ue(Ie)}catch(Pe){B=null!=B?B:[],Pe instanceof N?B=[...B,...Pe.errors]:B.push(Pe)}}if(B)throw new N(B)}}add(B){var H;if(B&&B!==this)if(this.closed)ue(B);else{if(B instanceof ie){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(B)}}_hasParent(B){const{_parentage:H}=this;return H===B||Array.isArray(H)&&H.includes(B)}_addParent(B){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(B),H):H?[H,B]:B}_removeParent(B){const{_parentage:H}=this;H===B?this._parentage=null:Array.isArray(H)&&(0,le.P)(H,B)}remove(B){const{_finalizers:H}=this;H&&(0,le.P)(H,B),B instanceof ie&&B._removeParent(this)}}ie.EMPTY=(()=>{const pe=new ie;return pe.closed=!0,pe})();const fe=ie.EMPTY;function de(pe){return pe instanceof ie||pe&&"closed"in pe&&(0,d.m)(pe.remove)&&(0,d.m)(pe.add)&&(0,d.m)(pe.unsubscribe)}function ue(pe){(0,d.m)(pe)?pe():pe.unsubscribe()}},2416:(Qe,we,R)=>{R.d(we,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Qe,we,R)=>{R.d(we,{E:()=>X});const X=new(R(8306).y)(ie=>ie.complete())},8996:(Qe,we,R)=>{R.d(we,{D:()=>_e});var d=R(8421),X=R(5363),N=R(9468),fe=R(8306),ue=R(2202),pe=R(576),B=R(9672);function te(Ce,Ue){if(!Ce)throw new Error("Iterable cannot be null");return new fe.y(je=>{(0,B.f)(je,Ue,()=>{const z=Ce[Symbol.asyncIterator]();(0,B.f)(je,Ue,()=>{z.next().then(ve=>{ve.done?je.complete():je.next(ve.value)})},0,!0)})})}var $e=R(3670),Ie=R(8239),Pe=R(1144),Be=R(6495),he=R(2206),Ee=R(4532),qe=R(3260);function _e(Ce,Ue){return Ue?function Te(Ce,Ue){if(null!=Ce){if((0,$e.c)(Ce))return function le(Ce,Ue){return(0,d.Xf)(Ce).pipe((0,N.R)(Ue),(0,X.Q)(Ue))}(Ce,Ue);if((0,Pe.z)(Ce))return function de(Ce,Ue){return new fe.y(je=>{let z=0;return Ue.schedule(function(){z===Ce.length?je.complete():(je.next(Ce[z++]),je.closed||this.schedule())})})}(Ce,Ue);if((0,Ie.t)(Ce))return function ie(Ce,Ue){return(0,d.Xf)(Ce).pipe((0,N.R)(Ue),(0,X.Q)(Ue))}(Ce,Ue);if((0,he.D)(Ce))return te(Ce,Ue);if((0,Be.T)(Ce))return function H(Ce,Ue){return new fe.y(je=>{let z;return(0,B.f)(je,Ue,()=>{z=Ce[ue.h](),(0,B.f)(je,Ue,()=>{let ve,K;try{({value:ve,done:K}=z.next())}catch(ne){return void je.error(ne)}K?je.complete():je.next(ve)},0,!0)}),()=>(0,pe.m)(null==z?void 0:z.return)&&z.return()})}(Ce,Ue);if((0,qe.L)(Ce))return function Ke(Ce,Ue){return te((0,qe.Q)(Ce),Ue)}(Ce,Ue)}throw(0,Ee.z)(Ce)}(Ce,Ue):(0,d.Xf)(Ce)}},8421:(Qe,we,R)=>{R.d(we,{Xf:()=>$e});var d=R(655),X=R(1144),N=R(8239),le=R(8306),ie=R(3670),fe=R(2206),de=R(4532),ue=R(6495),pe=R(3260),B=R(576),H=R(7849),te=R(8822);function $e(Te){if(Te instanceof le.y)return Te;if(null!=Te){if((0,ie.c)(Te))return function Ie(Te){return new le.y(_e=>{const Ce=Te[te.L]();if((0,B.m)(Ce.subscribe))return Ce.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,X.z)(Te))return function Pe(Te){return new le.y(_e=>{for(let Ce=0;Ce<Te.length&&!_e.closed;Ce++)_e.next(Te[Ce]);_e.complete()})}(Te);if((0,N.t)(Te))return function Be(Te){return new le.y(_e=>{Te.then(Ce=>{_e.closed||(_e.next(Ce),_e.complete())},Ce=>_e.error(Ce)).then(null,H.h)})}(Te);if((0,fe.D)(Te))return Ee(Te);if((0,ue.T)(Te))return function he(Te){return new le.y(_e=>{for(const Ce of Te)if(_e.next(Ce),_e.closed)return;_e.complete()})}(Te);if((0,pe.L)(Te))return function qe(Te){return Ee((0,pe.Q)(Te))}(Te)}throw(0,de.z)(Te)}function Ee(Te){return new le.y(_e=>{(function Ke(Te,_e){var Ce,Ue,je,z;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,d.KL)(Te);!(Ue=yield Ce.next()).done;)if(_e.next(Ue.value),_e.closed)return}catch(ve){je={error:ve}}finally{try{Ue&&!Ue.done&&(z=Ce.return)&&(yield z.call(Ce))}finally{if(je)throw je.error}}_e.complete()})})(Te,_e).catch(Ce=>_e.error(Ce))})}},6451:(Qe,we,R)=>{R.d(we,{T:()=>fe});var d=R(8189),X=R(8421),N=R(515),le=R(7669),ie=R(8996);function fe(...de){const ue=(0,le.yG)(de),pe=(0,le._6)(de,1/0),B=de;return B.length?1===B.length?(0,X.Xf)(B[0]):(0,d.J)(pe)((0,ie.D)(B,ue)):N.E}},5403:(Qe,we,R)=>{R.d(we,{x:()=>X});var d=R(2961);function X(le,ie,fe,de,ue){return new N(le,ie,fe,de,ue)}class N extends d.Lv{constructor(ie,fe,de,ue,pe,B){super(ie),this.onFinalize=pe,this.shouldUnsubscribe=B,this._next=fe?function(H){try{fe(H)}catch(te){ie.error(te)}}:super._next,this._error=ue?function(H){try{ue(H)}catch(te){ie.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(H){ie.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(Qe,we,R)=>{R.d(we,{U:()=>N});var d=R(4482),X=R(5403);function N(le,ie){return(0,d.e)((fe,de)=>{let ue=0;fe.subscribe((0,X.x)(de,pe=>{de.next(le.call(ie,pe,ue++))}))})}},8189:(Qe,we,R)=>{R.d(we,{J:()=>N});var d=R(5577),X=R(4671);function N(le=1/0){return(0,d.z)(X.y,le)}},5577:(Qe,we,R)=>{R.d(we,{z:()=>ue});var d=R(4004),X=R(8421),N=R(4482),le=R(9672),ie=R(5403),de=R(576);function ue(pe,B,H=1/0){return(0,de.m)(B)?ue((te,$e)=>(0,d.U)((Ie,Pe)=>B(te,Ie,$e,Pe))((0,X.Xf)(pe(te,$e))),H):("number"==typeof B&&(H=B),(0,N.e)((te,$e)=>function fe(pe,B,H,te,$e,Ie,Pe,Be){const he=[];let Ee=0,qe=0,Ke=!1;const Te=()=>{Ke&&!he.length&&!Ee&&B.complete()},_e=Ue=>Ee<te?Ce(Ue):he.push(Ue),Ce=Ue=>{Ie&&B.next(Ue),Ee++;let je=!1;(0,X.Xf)(H(Ue,qe++)).subscribe((0,ie.x)(B,z=>{null==$e||$e(z),Ie?_e(z):B.next(z)},()=>{je=!0},void 0,()=>{if(je)try{for(Ee--;he.length&&Ee<te;){const z=he.shift();Pe?(0,le.f)(B,Pe,()=>Ce(z)):Ce(z)}Te()}catch(z){B.error(z)}}))};return pe.subscribe((0,ie.x)(B,_e,()=>{Ke=!0,Te()})),()=>{null==Be||Be()}}(te,$e,pe,H)))}},5363:(Qe,we,R)=>{R.d(we,{Q:()=>le});var d=R(9672),X=R(4482),N=R(5403);function le(ie,fe=0){return(0,X.e)((de,ue)=>{de.subscribe((0,N.x)(ue,pe=>(0,d.f)(ue,ie,()=>ue.next(pe),fe),()=>(0,d.f)(ue,ie,()=>ue.complete(),fe),pe=>(0,d.f)(ue,ie,()=>ue.error(pe),fe)))})}},3099:(Qe,we,R)=>{R.d(we,{B:()=>ie});var d=R(8421),X=R(7579),N=R(2961),le=R(4482);function ie(de={}){const{connector:ue=(()=>new X.x),resetOnError:pe=!0,resetOnComplete:B=!0,resetOnRefCountZero:H=!0}=de;return te=>{let $e,Ie,Pe,Be=0,he=!1,Ee=!1;const qe=()=>{null==Ie||Ie.unsubscribe(),Ie=void 0},Ke=()=>{qe(),$e=Pe=void 0,he=Ee=!1},Te=()=>{const _e=$e;Ke(),null==_e||_e.unsubscribe()};return(0,le.e)((_e,Ce)=>{Be++,!Ee&&!he&&qe();const Ue=Pe=null!=Pe?Pe:ue();Ce.add(()=>{Be--,0===Be&&!Ee&&!he&&(Ie=fe(Te,H))}),Ue.subscribe(Ce),!$e&&Be>0&&($e=new N.Hp({next:je=>Ue.next(je),error:je=>{Ee=!0,qe(),Ie=fe(Ke,pe,je),Ue.error(je)},complete:()=>{he=!0,qe(),Ie=fe(Ke,B),Ue.complete()}}),(0,d.Xf)(_e).subscribe($e))})(te)}}function fe(de,ue,...pe){if(!0===ue)return void de();if(!1===ue)return;const B=new N.Hp({next:()=>{B.unsubscribe(),de()}});return ue(...pe).subscribe(B)}},9468:(Qe,we,R)=>{R.d(we,{R:()=>X});var d=R(4482);function X(N,le=0){return(0,d.e)((ie,fe)=>{fe.add(N.schedule(()=>ie.subscribe(fe),le))})}},8505:(Qe,we,R)=>{R.d(we,{b:()=>ie});var d=R(576),X=R(4482),N=R(5403),le=R(4671);function ie(fe,de,ue){const pe=(0,d.m)(fe)||de||ue?{next:fe,error:de,complete:ue}:fe;return pe?(0,X.e)((B,H)=>{var te;null===(te=pe.subscribe)||void 0===te||te.call(pe);let $e=!0;B.subscribe((0,N.x)(H,Ie=>{var Pe;null===(Pe=pe.next)||void 0===Pe||Pe.call(pe,Ie),H.next(Ie)},()=>{var Ie;$e=!1,null===(Ie=pe.complete)||void 0===Ie||Ie.call(pe),H.complete()},Ie=>{var Pe;$e=!1,null===(Pe=pe.error)||void 0===Pe||Pe.call(pe,Ie),H.error(Ie)},()=>{var Ie,Pe;$e&&(null===(Ie=pe.unsubscribe)||void 0===Ie||Ie.call(pe)),null===(Pe=pe.finalize)||void 0===Pe||Pe.call(pe)}))}):le.y}},4408:(Qe,we,R)=>{R.d(we,{o:()=>ie});var d=R(727);class X extends d.w0{constructor(de,ue){super()}schedule(de,ue=0){return this}}const N={setInterval(fe,de,...ue){const{delegate:pe}=N;return(null==pe?void 0:pe.setInterval)?pe.setInterval(fe,de,...ue):setInterval(fe,de,...ue)},clearInterval(fe){const{delegate:de}=N;return((null==de?void 0:de.clearInterval)||clearInterval)(fe)},delegate:void 0};var le=R(8737);class ie extends X{constructor(de,ue){super(de,ue),this.scheduler=de,this.work=ue,this.pending=!1}schedule(de,ue=0){if(this.closed)return this;this.state=de;const pe=this.id,B=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(B,pe,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(B,this.id,ue),this}requestAsyncId(de,ue,pe=0){return N.setInterval(de.flush.bind(de,this),pe)}recycleAsyncId(de,ue,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return ue;N.clearInterval(ue)}execute(de,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(de,ue);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ue){let B,pe=!1;try{this.work(de)}catch(H){pe=!0,B=H||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:de,scheduler:ue}=this,{actions:pe}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(pe,this),null!=de&&(this.id=this.recycleAsyncId(ue,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(Qe,we,R)=>{R.d(we,{v:()=>N});var d=R(6063);class X{constructor(ie,fe=X.now){this.schedulerActionCtor=ie,this.now=fe}schedule(ie,fe=0,de){return new this.schedulerActionCtor(this,ie).schedule(de,fe)}}X.now=d.l.now;class N extends X{constructor(ie,fe=X.now){super(ie,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:fe}=this;if(this._active)return void fe.push(ie);let de;this._active=!0;do{if(de=ie.execute(ie.state,ie.delay))break}while(ie=fe.shift());if(this._active=!1,de){for(;ie=fe.shift();)ie.unsubscribe();throw de}}}},4986:(Qe,we,R)=>{R.d(we,{z:()=>N});var d=R(4408);const N=new(R(7565).v)(d.o)},6063:(Qe,we,R)=>{R.d(we,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Qe,we,R)=>{R.d(we,{z:()=>d});const d={setTimeout(X,N,...le){const{delegate:ie}=d;return(null==ie?void 0:ie.setTimeout)?ie.setTimeout(X,N,...le):setTimeout(X,N,...le)},clearTimeout(X){const{delegate:N}=d;return((null==N?void 0:N.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(Qe,we,R)=>{R.d(we,{h:()=>X});const X=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Qe,we,R)=>{R.d(we,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Qe,we,R)=>{R.d(we,{_6:()=>fe,jO:()=>le,yG:()=>ie});var d=R(576);function N(de){return de[de.length-1]}function le(de){return(0,d.m)(N(de))?de.pop():void 0}function ie(de){return function X(de){return de&&(0,d.m)(de.schedule)}(N(de))?de.pop():void 0}function fe(de,ue){return"number"==typeof N(de)?de.pop():ue}},8737:(Qe,we,R)=>{function d(X,N){if(X){const le=X.indexOf(N);0<=le&&X.splice(le,1)}}R.d(we,{P:()=>d})},3888:(Qe,we,R)=>{function d(X){const le=X(ie=>{Error.call(ie),ie.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}R.d(we,{d:()=>d})},2806:(Qe,we,R)=>{R.d(we,{O:()=>le,x:()=>N});var d=R(2416);let X=null;function N(ie){if(d.v.useDeprecatedSynchronousErrorHandling){const fe=!X;if(fe&&(X={errorThrown:!1,error:null}),ie(),fe){const{errorThrown:de,error:ue}=X;if(X=null,de)throw ue}}else ie()}function le(ie){d.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ie)}},9672:(Qe,we,R)=>{function d(X,N,le,ie=0,fe=!1){const de=N.schedule(function(){le(),fe?X.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(X.add(de),!fe)return de}R.d(we,{f:()=>d})},4671:(Qe,we,R)=>{function d(X){return X}R.d(we,{y:()=>d})},1144:(Qe,we,R)=>{R.d(we,{z:()=>d});const d=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(Qe,we,R)=>{R.d(we,{D:()=>X});var d=R(576);function X(N){return Symbol.asyncIterator&&(0,d.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(Qe,we,R)=>{function d(X){return"function"==typeof X}R.d(we,{m:()=>d})},3670:(Qe,we,R)=>{R.d(we,{c:()=>N});var d=R(8822),X=R(576);function N(le){return(0,X.m)(le[d.L])}},6495:(Qe,we,R)=>{R.d(we,{T:()=>N});var d=R(2202),X=R(576);function N(le){return(0,X.m)(null==le?void 0:le[d.h])}},8239:(Qe,we,R)=>{R.d(we,{t:()=>X});var d=R(576);function X(N){return(0,d.m)(null==N?void 0:N.then)}},3260:(Qe,we,R)=>{R.d(we,{L:()=>le,Q:()=>N});var d=R(655),X=R(576);function N(ie){return(0,d.FC)(this,arguments,function*(){const de=ie.getReader();try{for(;;){const{value:ue,done:pe}=yield(0,d.qq)(de.read());if(pe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ue)}}finally{de.releaseLock()}})}function le(ie){return(0,X.m)(null==ie?void 0:ie.getReader)}},4482:(Qe,we,R)=>{R.d(we,{A:()=>X,e:()=>N});var d=R(576);function X(le){return(0,d.m)(null==le?void 0:le.lift)}function N(le){return ie=>{if(X(ie))return ie.lift(function(fe){try{return le(fe,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Qe,we,R)=>{R.d(we,{h:()=>N});var d=R(2416),X=R(3410);function N(le){X.z.setTimeout(()=>{const{onUnhandledError:ie}=d.v;if(!ie)throw le;ie(le)})}},4532:(Qe,we,R)=>{function d(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(we,{z:()=>d})},655:(Qe,we,R)=>{function le(K,ne){var ee={};for(var ge in K)Object.prototype.hasOwnProperty.call(K,ge)&&ne.indexOf(ge)<0&&(ee[ge]=K[ge]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(ge=Object.getOwnPropertySymbols(K);oe<ge.length;oe++)ne.indexOf(ge[oe])<0&&Object.prototype.propertyIsEnumerable.call(K,ge[oe])&&(ee[ge[oe]]=K[ge[oe]])}return ee}function ue(K,ne,ee,ge){return new(ee||(ee=Promise))(function(Ne,lt){function Bt(Yt){try{We(ge.next(Yt))}catch(mn){lt(mn)}}function Lt(Yt){try{We(ge.throw(Yt))}catch(mn){lt(mn)}}function We(Yt){Yt.done?Ne(Yt.value):function oe(Ne){return Ne instanceof ee?Ne:new ee(function(lt){lt(Ne)})}(Yt.value).then(Bt,Lt)}We((ge=ge.apply(K,ne||[])).next())})}function he(K){return this instanceof he?(this.v=K,this):new he(K)}function Ee(K,ne,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ge=ee.apply(K,ne||[]),Ne=[];return oe={},lt("next"),lt("throw"),lt("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function lt(Xt){ge[Xt]&&(oe[Xt]=function(qt){return new Promise(function(Er,Ht){Ne.push([Xt,qt,Er,Ht])>1||Bt(Xt,qt)})})}function Bt(Xt,qt){try{!function Lt(Xt){Xt.value instanceof he?Promise.resolve(Xt.value.v).then(We,Yt):mn(Ne[0][2],Xt)}(ge[Xt](qt))}catch(Er){mn(Ne[0][3],Er)}}function We(Xt){Bt("next",Xt)}function Yt(Xt){Bt("throw",Xt)}function mn(Xt,qt){Xt(qt),Ne.shift(),Ne.length&&Bt(Ne[0][0],Ne[0][1])}}function Ke(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,ne=K[Symbol.asyncIterator];return ne?ne.call(K):(K=function te(K){var ne="function"==typeof Symbol&&Symbol.iterator,ee=ne&&K[ne],ge=0;if(ee)return ee.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ge>=K.length&&(K=void 0),{value:K&&K[ge++],done:!K}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ee={},ge("next"),ge("throw"),ge("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function ge(Ne){ee[Ne]=K[Ne]&&function(lt){return new Promise(function(Bt,Lt){!function oe(Ne,lt,Bt,Lt){Promise.resolve(Lt).then(function(We){Ne({value:We,done:Bt})},lt)}(Bt,Lt,(lt=K[Ne](lt)).done,lt.value)})}}}R.d(we,{FC:()=>Ee,KL:()=>Ke,_T:()=>le,mG:()=>ue,qq:()=>he})},5e3:(Qe,we,R)=>{R.d(we,{$8M:()=>qi,$Z:()=>FI,AFp:()=>hC,AaK:()=>ue,CHM:()=>Vo,CRH:()=>tv,CZH:()=>on,CqO:()=>Gw,EJc:()=>UD,EpF:()=>UI,F4k:()=>BI,FYo:()=>$y,FiY:()=>rt,G48:()=>Sm,GfV:()=>sm,Gpc:()=>H,JOm:()=>P,LFG:()=>x,LSH:()=>Sa,Lbi:()=>vm,NdJ:()=>jd,OlP:()=>dn,Oqu:()=>qd,PXZ:()=>yC,Q6J:()=>Bw,QGY:()=>Hw,Qsj:()=>pD,R0b:()=>Xs,RDi:()=>gc,Rgc:()=>Uf,SBq:()=>Qu,Sil:()=>$D,Suo:()=>pm,TTD:()=>Ui,TgZ:()=>Og,VKq:()=>JE,VLi:()=>mC,X6Q:()=>Am,XFs:()=>mt,Xpm:()=>Ve,Y36:()=>xg,YKP:()=>ec,YNc:()=>Mw,Yjl:()=>sa,Yz7:()=>qt,ZZ4:()=>Rm,_Bn:()=>HE,_UZ:()=>Bd,_Vd:()=>kf,_c5:()=>bv,_uU:()=>fy,aQg:()=>Cv,c2e:()=>fC,cJS:()=>Ht,cg1:()=>Ey,dDg:()=>Mi,deG:()=>Xl,dqk:()=>Vt,eFA:()=>vC,ekj:()=>Lg,g9A:()=>ch,h0i:()=>dl,hGG:()=>SC,hij:()=>zd,iGM:()=>ev,ifc:()=>jt,ip1:()=>uv,kL8:()=>Cy,lG2:()=>Mo,n5z:()=>hn,oAB:()=>Rt,oxw:()=>Rg,q4F:()=>Lf,qLn:()=>Id,qOj:()=>hf,qZA:()=>mf,sBO:()=>KD,sIi:()=>Rd,s_b:()=>Jy,soG:()=>dv,tBr:()=>bt,tb:()=>Zf,tp0:()=>Rn,uIk:()=>Qc,vHH:()=>Pe,vpe:()=>To,wAp:()=>yt,xp6:()=>C_,z2F:()=>Dm,zSh:()=>fw,zs3:()=>La});var d=R(7579),X=R(727),N=R(8306),le=R(6451),ie=R(3099);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function de(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ue(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ue).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function pe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=fe({__forward_ref__:fe});function H(i){return i.__forward_ref__=H,i.toString=function(){return ue(this())},i}function te(i){return $e(i)?i():i}function $e(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===H}class Pe extends Error{constructor(s,a){super(function Be(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new Pe(-201,`No provider for ${Ee(i)} found${a}`)}function Lt(i,s){null==i&&function We(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ht(i){return{providers:i.providers||[],imports:i.imports||[]}}function kt(i){return is(i,xi)||is(i,Lr)}function is(i,s){return i.hasOwnProperty(s)?i[s]:null}function Fr(i){return i&&(i.hasOwnProperty(Ms)||i.hasOwnProperty(Oi))?i[Ms]:null}const xi=fe({\u0275prov:fe}),Ms=fe({\u0275inj:fe}),Lr=fe({ngInjectableDef:fe}),Oi=fe({ngInjectorDef:fe});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Vr;function Un(i){const s=Vr;return Vr=i,s}function Pi(i,s,a){const c=kt(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&mt.Optional?null:void 0!==s?s:void _e(ue(i),"Injector")}function yn(i){return{toString:i}.toString()}var Sn=(()=>((Sn=Sn||{})[Sn.OnPush=0]="OnPush",Sn[Sn.Default=1]="Default",Sn))(),jt=(()=>{return(i=jt||(jt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",jt;var i})();const ot="undefined"!=typeof globalThis&&globalThis,Et="undefined"!=typeof window&&window,pr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vt=ot||"undefined"!=typeof global&&global||Et||pr,Cr={},dt=[],Os=fe({\u0275cmp:fe}),U=fe({\u0275dir:fe}),q=fe({\u0275pipe:fe}),L=fe({\u0275mod:fe}),j=fe({\u0275fac:fe}),G=fe({__NG_ELEMENT_ID__:fe});let Ae=0;function Ve(i){return yn(()=>{const a={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Sn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||dt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||jt.Emulated,id:"c",styles:i.styles||dt,_:null,setInput:null,schemas:i.schemas||null,tView:null},h=i.directives,g=i.features,y=i.pipes;return c.id+=Ae++,c.inputs=Ri(i.inputs,a),c.outputs=Ri(i.outputs),g&&g.forEach(E=>E(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(Qt):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map($t):null,c})}function Qt(i){return Bn(i)||function br(i){return i[U]||null}(i)}function $t(i){return function os(i){return i[q]||null}(i)}const Yn={};function Rt(i){return yn(()=>{const s={type:i.type,bootstrap:i.bootstrap||dt,declarations:i.declarations||dt,imports:i.imports||dt,exports:i.exports||dt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Yn[i.id]=i.type),s})}function Ri(i,s){if(null==i)return Cr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let h=i[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),a[h]=c,s&&(s[h]=g)}return a}const Mo=Ve;function sa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Bn(i){return i[Os]||null}function jn(i,s){const a=i[L]||null;if(!a&&!0===s)throw new Error(`Type ${ue(i)} does not have '\u0275mod' property.`);return a}function $r(i){return Array.isArray(i)&&"object"==typeof i[1]}function Fi(i){return Array.isArray(i)&&!0===i[1]}function eu(i){return 0!=(8&i.flags)}function xl(i){return 2==(2&i.flags)}function Li(i){return 1==(1&i.flags)}function Vi(i){return null!==i.template}function dc(i){return 0!=(512&i[2])}function _r(i,s){return i.hasOwnProperty(j)?i[j]:null}class ro{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ui(){return Po}function Po(i){return i.type.prototype.ngOnChanges&&(i.setInput=Sh),Vl}function Vl(){const i=io(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Cr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Sh(i,s,a,c){const h=io(i)||function Ro(i,s){return i[Ul]=s}(i,{previous:Cr,current:null}),g=h.current||(h.current={}),y=h.previous,E=this.declaredInputs[a],b=y[E];g[E]=new ro(b&&b.currentValue,s,y===Cr),i[c]=s}Ui.ngInherit=!0;const Ul="__ngSimpleChanges__";function io(i){return i[Ul]||null}let ko;function gc(i){ko=i}function tn(i){return!!i.listen}const la={createRenderer:(i,s)=>function Bi(){return void 0!==ko?ko:"undefined"!=typeof document?document:void 0}()};function zt(i){for(;Array.isArray(i);)i=i[0];return i}function Ls(i,s){return zt(s[i])}function sr(i,s){return zt(s[i.index])}function cn(i,s){return i.data[s]}function or(i,s){const a=s[i];return $r(a)?a:a[0]}function oo(i){return 4==(4&i[2])}function us(i){return 128==(128&i[2])}function _i(i,s){return null==s?null:i[s]}function $i(i){i[18]=0}function Fo(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const _t={lFrame:Uo(null),bindingsEnabled:!0};function iu(){return _t.bindingsEnabled}function Se(){return _t.lFrame.lView}function Ft(){return _t.lFrame.tView}function Vo(i){return _t.lFrame.contextLView=i,i[8]}function an(){let i=su();for(;null!==i&&64===i.type;)i=i.parent;return i}function su(){return _t.lFrame.currentTNode}function ni(i,s){const a=_t.lFrame;a.currentTNode=i,a.isParent=s}function wc(){return _t.lFrame.isParent}function Us(){return _t.lFrame.bindingIndex++}function uu(i,s){const a=_t.lFrame;a.bindingIndex=a.bindingRootIndex=i,pa(s)}function pa(i){_t.lFrame.currentDirectiveIndex=i}function lu(){return _t.lFrame.currentQueryIndex}function Hl(i){_t.lFrame.currentQueryIndex=i}function Gl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function du(i,s,a){if(a&mt.SkipSelf){let h=s,g=i;for(;!(h=h.parent,null!==h||a&mt.Host||(h=Gl(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;s=h,i=g}const c=_t.lFrame=ql();return c.currentTNode=s,c.lView=i,!0}function uo(i){const s=ql(),a=i[1];_t.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function ql(){const i=_t.lFrame,s=null===i?null:i.child;return null===s?Uo(i):s}function Uo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function zl(){const i=_t.lFrame;return _t.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const hu=zl;function Hr(){const i=zl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Qn(){return _t.lFrame.selectedIndex}function co(i){_t.lFrame.selectedIndex=i}function xn(){const i=_t.lFrame;return cn(i.tView,i.selectedIndex)}function ga(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:M}=g;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function ls(i,s,a){Wl(i,s,3,a)}function lo(i,s,a,c){(3&i[2])===a&&Wl(i,s,a,c)}function Hn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Wl(i,s,a,c){const g=null!=c?c:-1,y=s.length-1;let E=0;for(let b=void 0!==c?65535&i[18]:0;b<y;b++)if("number"==typeof s[b+1]){if(E=s[b],null!=c&&E>=c)break}else s[b]<0&&(i[18]+=65536),(E<g||-1==g)&&(Mp(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function Mp(i,s,a,c){const h=a[c]<0,g=a[c+1],E=i[h?-a[c]:a[c]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Bo{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Tr(i,s,a){const c=tn(i);let h=0;for(;h<a.length;){const g=a[h];if("number"==typeof g){if(0!==g)break;h++;const y=a[h++],E=a[h++],b=a[h++];c?i.setAttribute(s,E,b,y):s.setAttributeNS(y,E,b)}else{const y=g,E=a[++h];On(y)?c&&i.setProperty(s,y,E):c?i.setAttribute(s,y,E):s.setAttribute(y,E),h++}}return h}function vi(i){return 3===i||4===i||6===i}function On(i){return 64===i.charCodeAt(0)}function _a(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const h=s[c];"number"==typeof h?a=h:0===a||Kl(i,a,h,null,-1===a||2===a?s[++c]:null)}}return i}function Kl(i,s,a,c,h){let g=0,y=i.length;if(-1===s)y=-1;else for(;g<i.length;){const E=i[g++];if("number"==typeof E){if(E===s){y=-1;break}if(E>s){y=g-1;break}}}for(;g<i.length;){const E=i[g];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==h&&(i[g+1]=h));if(c===i[g+1])return void(i[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==y&&(i.splice(y,0,s),g=y+1),i.splice(g++,0,a),null!==c&&i.splice(g++,0,c),null!==h&&i.splice(g++,0,h)}function jo(i){return-1!==i}function Bs(i){return 32767&i}function js(i,s){let a=function wn(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Hi=!0;function Tt(i){const s=Hi;return Hi=i,s}let ya=0;function Gi(i,s){const a=hs(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,gu(c.data,i),gu(s,null),gu(c.blueprint,null));const h=$s(i,s),g=i.injectorIndex;if(jo(h)){const y=Bs(h),E=js(h,s),b=E[1].data;for(let A=0;A<8;A++)s[g+A]=E[y+A]|b[y+A]}return s[g+8]=h,g}function gu(i,s){i.push(0,0,0,0,0,0,0,0,s)}function hs(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function $s(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,h=s;for(;null!==h;){const g=h[1],y=g.type;if(c=2===y?g.declTNode:1===y?h[6]:null,null===c)return-1;if(a++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Hs(i,s,a){!function ar(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(G)&&(c=a[G]),null==c&&(c=a[G]=ya++);const h=255&c;s.data[i+(h>>5)]|=1<<h}(i,s,a)}function va(i,s,a){if(a&mt.Optional)return i;_e(s,"NodeInjector")}function fo(i,s,a,c){if(a&mt.Optional&&void 0===c&&(c=null),0==(a&(mt.Self|mt.Host))){const h=i[9],g=Un(void 0);try{return h?h.get(s,c,a&mt.Optional):Pi(s,c,a&mt.Optional)}finally{Un(g)}}return va(c,s,a)}function po(i,s,a,c=mt.Default,h){if(null!==i){const g=function go(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(G)?i[G]:void 0;return"number"==typeof s?s>=0?255&s:wa:s}(a);if("function"==typeof g){if(!du(s,i,c))return c&mt.Host?va(h,a,c):fo(s,a,c,h);try{const y=g(c);if(null!=y||c&mt.Optional)return y;_e(a)}finally{hu()}}else if("number"==typeof g){let y=null,E=hs(i,s),b=-1,A=c&mt.Host?s[16][6]:null;for((-1===E||c&mt.SkipSelf)&&(b=-1===E?$s(i,s):s[E+8],-1!==b&&Ac(c,!1)?(y=s[1],E=Bs(b),s=js(b,s)):E=-1);-1!==E;){const M=s[1];if(Gn(g,E,M.data)){const k=Ea(E,s,a,y,c,A);if(k!==Ho)return k}b=s[E+8],-1!==b&&Ac(c,s[1].data[E+8]===A)&&Gn(g,E,s)?(y=M,E=Bs(b),s=js(b,s)):E=-1}}}return fo(s,a,c,h)}const Ho={};function wa(){return new Ar(an(),Se())}function Ea(i,s,a,c,h,g){const y=s[1],E=y.data[i+8],M=Ca(E,y,a,null==c?xl(E)&&Hi:c!=y&&0!=(3&E.type),h&mt.Host&&g===E);return null!==M?ii(s,y,M,E):Ho}function Ca(i,s,a,c,h){const g=i.providerIndexes,y=s.data,E=1048575&g,b=i.directiveStart,M=g>>20,$=h?E+M:i.directiveEnd;for(let Q=c?E:E+M;Q<$;Q++){const ye=y[Q];if(Q<b&&a===ye||Q>=b&&ye.type===a)return Q}if(h){const Q=y[b];if(Q&&Vi(Q)&&Q.type===a)return b}return null}function ii(i,s,a,c){let h=i[a];const g=s.data;if(function fu(i){return i instanceof Bo}(h)){const y=h;y.resolving&&function qe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ee(g[a]));const E=Tt(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?Un(y.injectImpl):null;du(i,c,mt.Default);try{h=i[a]=y.factory(void 0,g,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Jm(i,s,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=s.type.prototype;if(c){const y=Po(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],s)}finally{null!==b&&Un(b),Tt(E),y.resolving=!1,hu()}}return h}function Gn(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Ac(i,s){return!(i&mt.Self||i&mt.Host&&s)}class Ar{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return po(this._tNode,this._lView,s,c,a)}}function hn(i){return yn(()=>{const s=i.prototype.constructor,a=s[j]||Go(s),c=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==c;){const g=h[j]||Go(h);if(g&&g!==a)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Go(i){return $e(i)?()=>{const s=Go(te(i));return s&&s()}:_r(i)}function qi(i){return function $o(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const g=a[h];if(vi(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(g===s)return a[h+1];h+=2}}}return null}(an(),i)}const wi="__parameters__";function zi(i,s,a){return yn(()=>{const c=function Jn(i){return function(...a){if(i){const c=i(...a);for(const h in c)this[h]=c[h]}}}(s);function h(...g){if(this instanceof h)return c.apply(this,g),this;const y=new h(...g);return E.annotation=y,E;function E(b,A,M){const k=b.hasOwnProperty(wi)?b[wi]:Object.defineProperty(b,wi,{value:[]})[wi];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(y),b}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class dn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xl=new dn("AnalyzeForEntryComponents");function Mr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),Mr(c,s)):s!==i&&s.push(c)}return s}function xr(i,s){i.forEach(a=>Array.isArray(a)?xr(a,s):s(a))}function Da(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Mc(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function qn(i,s,a){let c=Zs(i,s);return c>=0?i[1|c]=a:(c=~c,function mu(i,s,a,c){let h=i.length;if(h==s)i.push(a,c);else if(1===h)i.push(c,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>s;)i[h]=i[h-2],h--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function zs(i,s){const a=Zs(i,s);if(a>=0)return i[1|a]}function Zs(i,s){return function Zo(i,s,a){let c=0,h=i.length>>a;for(;h!==c;){const g=c+(h-c>>1),y=i[g<<a];if(s===y)return g<<a;y>s?h=g:c=g+1}return~(h<<a)}(i,s,1)}const Or={},Wo="__NG_DI_FLAG__",si="ngTempTokenPath",ad=/\n/gm,wu="__source",Eu=fe({provide:String,useValue:fe});let Zi;function C(i){const s=Zi;return Zi=i,s}function D(i,s=mt.Default){if(void 0===Zi)throw new Pe(203,"");return null===Zi?Pi(i,void 0,s):Zi.get(i,s&mt.Optional?null:void 0,s)}function x(i,s=mt.Default){return(function _n(){return Vr}()||D)(te(i),s)}const Y=x;function re(i){const s=[];for(let a=0;a<i.length;a++){const c=te(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Pe(900,"");let h,g=mt.Default;for(let y=0;y<c.length;y++){const E=c[y],b=He(E);"number"==typeof b?-1===b?h=E.token:g|=b:h=E}s.push(x(h,g))}else s.push(x(c))}return s}function be(i,s){return i[Wo]=s,i.prototype[Wo]=s,i}function He(i){return i[Wo]}const bt=be(zi("Inject",i=>({token:i})),-1),rt=be(zi("Optional"),8),Rn=be(zi("SkipSelf"),4);class hd{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function bi(i){return i instanceof hd?i.changingThisBreaksApplicationSecurity:i}const r_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Aa=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Nn=(()=>((Nn=Nn||{})[Nn.NONE=0]="NONE",Nn[Nn.HTML=1]="HTML",Nn[Nn.STYLE=2]="STYLE",Nn[Nn.SCRIPT=3]="SCRIPT",Nn[Nn.URL=4]="URL",Nn[Nn.RESOURCE_URL=5]="RESOURCE_URL",Nn))();function Sa(i){const s=function xu(){const i=Se();return i&&i[12]}();return s?s.sanitize(Nn.URL,i)||"":function Eo(i,s){const a=function Rc(i){return i instanceof hd&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?bi(i):function Nc(i){return(i=String(i)).match(r_)||i.match(Aa)?i:"unsafe:"+i}(he(i))}const Ed="__ngContext__";function ur(i,s){i[Ed]=s}function qh(i){const s=function Ou(i){return i[Ed]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function bd(i){return i.ngOriginalError}function p_(i,...s){i.error(...s)}class Id{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),c=function f_(i){return i&&i.ngErrorLogger||p_}(s);c(this._console,"ERROR",s),a&&c(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&bd(s);for(;a&&bd(a);)a=bd(a);return a||null}}const Yh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vt))();function _(i){return i instanceof Function?i():i}var P=(()=>((P=P||{})[P.Important=1]="Important",P[P.DashCase=2]="DashCase",P))();function ae(i,s){return undefined(i,s)}function ft(i){const s=i[3];return Fi(s)?s[3]:s}function ai(i){return Qh(i[13])}function Pu(i){return Qh(i[4])}function Qh(i){for(;null!==i&&!Fi(i);)i=i[4];return i}function Oa(i,s,a,c,h){if(null!=c){let g,y=!1;Fi(c)?g=c:$r(c)&&(y=!0,c=c[0]);const E=zt(c);0===i&&null!==a?null==h?g0(s,a,E):ku(s,a,E,h||null,!0):1===i&&null!==a?ku(s,a,E,h||null,!0):2===i?function C0(i,s,a){const c=ng(i,s);c&&function _0(i,s,a,c){tn(i)?i.removeChild(s,a,c):s.removeChild(a)}(i,c,s,a)}(s,E,y):3===i&&s.destroyNode(E),null!=g&&function Ii(i,s,a,c,h){const g=a[7];g!==zt(a)&&Oa(s,i,c,g,h);for(let E=10;E<a.length;E++){const b=a[E];Ad(b[1],b,i,s,c,g)}}(s,i,g,a,h)}}function kn(i,s,a){if(tn(i))return i.createElement(s,a);{const c=null!==a?function pc(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===c?i.createElement(s):i.createElementNS(c,s)}}function h0(i,s){const a=i[9],c=a.indexOf(s),h=s[3];1024&s[2]&&(s[2]&=-1025,Fo(h,-1)),a.splice(c,1)}function eg(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const h=c[17];null!==h&&h!==i&&h0(h,c),s>0&&(i[a-1][4]=c[4]);const g=Mc(i,10+s);!function Jh(i,s){Ad(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const y=g[19];null!==y&&y.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function f0(i,s){if(!(256&s[2])){const a=s[11];tn(a)&&a.destroyNode&&Ad(i,s,a,3,null,null),function Gc(i){let s=i[13];if(!s)return tg(i[1],i);for(;s;){let a=null;if($r(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)$r(s)&&tg(s[1],s),s=s[3];null===s&&(s=i),$r(s)&&tg(s[1],s),a=s&&s[4]}s=a}}(s)}}function tg(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function __(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const h=s[a[c]];if(!(h instanceof Bo)){const g=a[c+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const E=h[g[y]],b=g[y+1];try{b.call(E)}finally{}}else try{g.call(h)}finally{}}}}(i,s),function p0(i,s){const a=i.cleanup,c=s[7];let h=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const y=a[g+1],E="function"==typeof y?y(s):zt(s[y]),b=c[h=a[g+2]],A=a[g+3];"boolean"==typeof A?E.removeEventListener(a[g],b,A):A>=0?c[h=A]():c[h=-A].unsubscribe(),g+=2}else{const y=c[h=a[g+1]];a[g].call(y)}if(null!==c){for(let g=h+1;g<c.length;g++)c[g]();s[7]=null}}(i,s),1===s[1].type&&tn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Fi(s[3])){a!==s[3]&&h0(a,s);const c=s[19];null!==c&&c.detachView(i)}}}function vb(i,s,a){return function Nu(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const h=i.data[c.directiveStart].encapsulation;if(h===jt.None||h===jt.Emulated)return null}return sr(c,a)}(i,s.parent,a)}function ku(i,s,a,c,h){tn(i)?i.insertBefore(s,a,c,h):s.insertBefore(a,c,h)}function g0(i,s,a){tn(i)?i.appendChild(s,a):s.appendChild(a)}function m0(i,s,a,c,h){null!==c?ku(i,s,a,c,h):g0(i,s,a)}function ng(i,s){return tn(i)?i.parentNode(s):s.parentNode}let v0=function y_(i,s,a){return 40&i.type?sr(i,a):null};function Td(i,s,a,c){const h=vb(i,c,s),g=s[11],E=function y0(i,s,a){return v0(i,s,a)}(c.parent||s[6],c,s);if(null!=h)if(Array.isArray(a))for(let b=0;b<a.length;b++)m0(g,h,a[b],E,!1);else m0(g,h,a,E,!1)}function rg(i,s){if(null!==s){const a=s.type;if(3&a)return sr(s,i);if(4&a)return ig(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return rg(i,c);{const h=i[s.index];return Fi(h)?ig(-1,h):zt(h)}}if(32&a)return ae(s,i)()||zt(i[s.index]);{const c=E0(i,s);return null!==c?Array.isArray(c)?c[0]:rg(ft(i[16]),c):rg(i,s.next)}}return null}function E0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ig(i,s){const a=10+i+1;if(a<s.length){const c=s[a],h=c[1].firstChild;if(null!==h)return rg(c,h)}return s[7]}function b0(i,s,a,c,h,g,y){for(;null!=a;){const E=c[a.index],b=a.type;if(y&&0===s&&(E&&ur(zt(E),c),a.flags|=4),64!=(64&a.flags))if(8&b)b0(i,s,a.child,c,h,g,!1),Oa(s,i,h,E,g);else if(32&b){const A=ae(a,c);let M;for(;M=A();)Oa(s,i,h,M,g);Oa(s,i,h,E,g)}else 16&b?Fn(i,s,c,a,h,g):Oa(s,i,h,E,g);a=y?a.projectionNext:a.next}}function Ad(i,s,a,c,h,g){b0(a,c,i.firstChild,s,h,g,!1)}function Fn(i,s,a,c,h,g){const y=a[16],b=y[6].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)Oa(s,i,h,b[A],g);else b0(i,s,b,y[3],h,g,!0)}function me(i,s,a){tn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function _s(i,s,a){tn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function It(i,s,a){let c=i.length;for(;;){const h=i.indexOf(s,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const g=s.length;if(h+g===c||i.charCodeAt(h+g)<=32)return h}a=h+1}}const w_="ng-template";function D0(i,s,a){let c=0;for(;c<i.length;){let h=i[c++];if(a&&"class"===h){if(h=i[c],-1!==It(h.toLowerCase(),s,0))return!0}else if(1===h){for(;c<i.length&&"string"==typeof(h=i[c++]);)if(h.toLowerCase()===s)return!0;return!1}}return!1}function T0(i){return 4===i.type&&i.value!==w_}function Cb(i,s,a){return s===(4!==i.type||a?i.value:w_)}function zn(i,s,a){let c=4;const h=i.attrs||[],g=function Ib(i){for(let s=0;s<i.length;s++)if(vi(i[s]))return s;return i.length}(h);let y=!1;for(let E=0;E<s.length;E++){const b=s[E];if("number"!=typeof b){if(!y)if(4&c){if(c=2|1&c,""!==b&&!Cb(i,b,a)||""===b&&1===s.length){if(ys(c))return!1;y=!0}}else{const A=8&c?b:s[++E];if(8&c&&null!==i.attrs){if(!D0(i.attrs,A,a)){if(ys(c))return!1;y=!0}continue}const k=E_(8&c?"class":b,h,T0(i),a);if(-1===k){if(ys(c))return!1;y=!0;continue}if(""!==A){let $;$=k>g?"":h[k+1].toLowerCase();const Q=8&c?$:null;if(Q&&-1!==It(Q,A,0)||2&c&&A!==$){if(ys(c))return!1;y=!0}}}}else{if(!y&&!ys(c)&&!ys(b))return!1;if(y&&ys(b))continue;y=!1,c=b|1&c}}return ys(c)||y}function ys(i){return 0==(1&i)}function E_(i,s,a,c){if(null===s)return-1;let h=0;if(c||!a){let g=!1;for(;h<s.length;){const y=s[h];if(y===i)return h;if(3===y||6===y)g=!0;else{if(1===y||2===y){let E=s[++h];for(;"string"==typeof E;)E=s[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=g?1:2}return-1}return function Db(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function A0(i,s,a=!1){for(let c=0;c<s.length;c++)if(zn(i,s[c],a))return!0;return!1}function S0(i,s){return i?":not("+s.trim()+")":s}function M0(i){let s=i[0],a=1,c=2,h="",g=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const E=i[++a];h+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!ys(y)&&(s+=S0(g,h),h=""),c=y,g=g||!ys(c);a++}return""!==h&&(s+=S0(g,h)),s}const xt={};function C_(i){x0(Ft(),Se(),Qn()+i,!1)}function x0(i,s,a,c){if(!c)if(3==(3&s[2])){const g=i.preOrderCheckHooks;null!==g&&ls(s,g,a)}else{const g=i.preOrderHooks;null!==g&&lo(s,g,0,a)}co(a)}function Pa(i,s){return i<<17|s<<2}function Ys(i){return i>>17&32767}function qc(i){return 2|i}function bn(i){return(131068&i)>>2}function I_(i,s){return-131069&i|s<<2}function D_(i){return 1|i}function $0(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const h=a[c],g=a[c+1];if(-1!==g){const y=i.data[g];Hl(h),y.contentQueries(2,s[g],g)}}}function Md(i,s,a,c,h,g,y,E,b,A){const M=s.blueprint.slice();return M[0]=h,M[2]=140|c,$i(M),M[3]=M[15]=i,M[8]=a,M[10]=y||i&&i[10],M[11]=E||i&&i[11],M[12]=b||i&&i[12]||null,M[9]=A||i&&i[9]||null,M[6]=g,M[16]=2==s.type?i[16]:M,M}function xd(i,s,a,c,h){let g=i.data[s];if(null===g)g=function M_(i,s,a,c,h){const g=su(),y=wc(),b=i.data[s]=function W0(i,s,a,c,h,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,a,s,c,h);return null===i.firstChild&&(i.firstChild=b),null!==g&&(y?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b)),b}(i,s,a,c,h),function bc(){return _t.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=c,g.attrs=h;const y=function ao(){const i=_t.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return ni(g,!0),g}function Di(i,s,a,c){if(0===a)return-1;const h=s.length;for(let g=0;g<a;g++)s.push(c),i.blueprint.push(c),i.data.push(null);return h}function Ji(i,s,a){uo(s);try{const c=i.viewQuery;null!==c&&gg(1,c,a);const h=i.template;null!==h&&G0(i,s,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&$0(i,s),i.staticViewQueries&&gg(2,i.viewQuery,a);const g=i.components;null!==g&&function H0(i,s){for(let a=0;a<s.length;a++)sw(i,s[a])}(s,g)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Hr()}}function Ra(i,s,a,c){const h=s[2];if(256!=(256&h)){uo(s);try{$i(s),function ou(i){return _t.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&G0(i,s,a,2,c);const y=3==(3&h);if(y){const A=i.preOrderCheckHooks;null!==A&&ls(s,A,null)}else{const A=i.preOrderHooks;null!==A&&lo(s,A,0,null),Hn(s,0)}if(function Wb(i){for(let s=ai(i);null!==s;s=Pu(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const h=a[c],g=h[3];0==(1024&h[2])&&Fo(g,1),h[2]|=1024}}}(s),function Zb(i){for(let s=ai(i);null!==s;s=Pu(s))for(let a=10;a<s.length;a++){const c=s[a],h=c[1];us(c)&&Ra(h,c,h.template,c[8])}}(s),null!==i.contentQueries&&$0(i,s),y){const A=i.contentCheckHooks;null!==A&&ls(s,A)}else{const A=i.contentHooks;null!==A&&lo(s,A,1),Hn(s,1)}!function j0(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const h=a[c];if(h<0)co(~h);else{const g=h,y=a[++c],E=a[++c];uu(y,g),E(2,s[g])}}}finally{co(-1)}}(i,s);const E=i.components;null!==E&&function S_(i,s){for(let a=0;a<s.length;a++)Kb(i,s[a])}(s,E);const b=i.viewQuery;if(null!==b&&gg(2,b,c),y){const A=i.viewCheckHooks;null!==A&&ls(s,A)}else{const A=i.viewHooks;null!==A&&lo(s,A,2),Hn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,Fo(s[3],-1))}finally{Hr()}}}function Ub(i,s,a,c){const h=s[10],y=oo(s);try{!y&&h.begin&&h.begin(),y&&Ji(i,s,c),Ra(i,s,a,c)}finally{!y&&h.end&&h.end()}}function G0(i,s,a,c,h){const g=Qn(),y=2&c;try{co(-1),y&&s.length>20&&x0(i,s,20,!1),a(c,h)}finally{co(g)}}function Wc(i,s,a){!iu()||(function Io(i,s,a,c){const h=a.directiveStart,g=a.directiveEnd;i.firstCreatePass||Gi(a,s),ur(c,s);const y=a.initialInputs;for(let E=h;E<g;E++){const b=i.data[E],A=Vi(b);A&&nw(s,a,b);const M=ii(s,i,E,a);ur(M,s),null!==y&&zb(0,E-h,M,b,0,y),A&&(or(a.index,s)[8]=M)}}(i,s,a,sr(a,s)),128==(128&a.flags)&&function Gb(i,s,a){const c=a.directiveStart,h=a.directiveEnd,y=a.index,E=function Ic(){return _t.lFrame.currentDirectiveIndex}();try{co(y);for(let b=c;b<h;b++){const A=i.data[b],M=s[b];pa(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Q0(A,M)}}finally{co(-1),pa(E)}}(i,s,a))}function ug(i,s,a=sr){const c=s.localNames;if(null!==c){let h=s.index+1;for(let g=0;g<c.length;g+=2){const y=c[g+1],E=-1===y?a(s,i):i[y];i[h++]=E}}}function q0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=cf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function cf(i,s,a,c,h,g,y,E,b,A){const M=20+c,k=M+h,$=function Bb(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:xt);return a}(M,k),Q="function"==typeof A?A():A;return $[1]={type:i,blueprint:$,template:a,queries:null,viewQuery:E,declTNode:s,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:Q,incompleteFirstPass:!1}}function x_(i,s,a,c){const h=eI(s);null===a?h.push(c):(h.push(a),i.firstCreatePass&&ow(i).push(c,h.length-1))}function lf(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const h=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,h):a[c]=[s,h]}return a}function lg(i,s,a,c){let h=!1;if(iu()){const g=function qb(i,s,a){const c=i.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const y=c[g];A0(a,y.selectors,!1)&&(h||(h=[]),Hs(Gi(a,s),i,y.type),Vi(y)?(J0(i,a),h.unshift(y)):h.push(y))}return h}(i,s,a),y=null===c?null:{"":-1};if(null!==g){h=!0,ew(a,i.data.length,g.length);for(let M=0;M<g.length;M++){const k=g[M];k.providersResolver&&k.providersResolver(k)}let E=!1,b=!1,A=Di(i,s,g.length,null);for(let M=0;M<g.length;M++){const k=g[M];a.mergedAttrs=_a(a.mergedAttrs,k.hostAttrs),tw(i,a,s,A,k),Kc(A,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const $=k.type.prototype;!E&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!b&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function O_(i,s){const c=s.directiveEnd,h=i.data,g=s.attrs,y=[];let E=null,b=null;for(let A=s.directiveStart;A<c;A++){const M=h[A],k=M.inputs,$=null===g||T0(s)?null:rw(k,g);y.push($),E=lf(k,A,E),b=lf(M.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=E,s.outputs=b}(i,a)}y&&function X0(i,s,a){if(s){const c=i.localNames=[];for(let h=0;h<s.length;h+=2){const g=a[s[h+1]];if(null==g)throw new Pe(-301,!1);c.push(s[h],g)}}}(a,c,y)}return a.mergedAttrs=_a(a.mergedAttrs,a.attrs),h}function Y0(i,s,a,c,h,g){const y=g.hostBindings;if(y){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const b=~s.index;(function Hb(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(c,h,y)}}function Q0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function J0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Kc(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Vi(s)&&(a[""]=i)}}function ew(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function tw(i,s,a,c,h){i.data[c]=h;const g=h.factory||(h.factory=_r(h.type)),y=new Bo(g,Vi(h),null);i.blueprint[c]=y,a[c]=y,Y0(i,s,0,c,Di(i,a,h.hostVars,xt),h)}function nw(i,s,a){const c=sr(s,i),h=q0(a),g=i[10],y=dg(i,Md(i,h,null,a.onPush?64:16,c,s,g,g.createRenderer(c,a),null,null));i[s.index]=y}function Jo(i,s,a,c,h,g){const y=sr(i,s);!function P_(i,s,a,c,h,g,y){if(null==g)tn(i)?i.removeAttribute(s,h,a):s.removeAttribute(h);else{const E=null==y?he(g):y(g,c||"",h);tn(i)?i.setAttribute(s,h,E,a):a?s.setAttributeNS(a,h,E):s.setAttribute(h,E)}}(s[11],y,g,i.value,a,c,h)}function zb(i,s,a,c,h,g){const y=g[s];if(null!==y){const E=c.setInput;for(let b=0;b<y.length;){const A=y[b++],M=y[b++],k=y[b++];null!==E?c.setInput(a,k,A,M):a[M]=k}}}function rw(i,s){let a=null,c=0;for(;c<s.length;){const h=s[c];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,i[h],s[c+1])),c+=2}else c+=2;else c+=4}return a}function R_(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function Kb(i,s){const a=or(s,i);if(us(a)){const c=a[1];80&a[2]?Ra(c,a,c.template,a[8]):a[5]>0&&N_(a)}}function N_(i){for(let c=ai(i);null!==c;c=Pu(c))for(let h=10;h<c.length;h++){const g=c[h];if(1024&g[2]){const y=g[1];Ra(y,g,y.template,g[8])}else g[5]>0&&N_(g)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const h=or(a[c],i);us(h)&&h[5]>0&&N_(h)}}function sw(i,s){const a=or(s,i),c=a[1];(function Yb(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Ji(c,a,a[8])}function dg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function hg(i){for(;i;){i[2]|=64;const s=ft(i);if(dc(i)&&!s)return i;i=s}return null}function pg(i){!function fg(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],c=qh(a),h=c[1];Ub(h,c,h.template,a)}}(i[8])}function gg(i,s,a){Hl(0),s(i,a)}const AS=(()=>Promise.resolve(null))();function eI(i){return i[7]||(i[7]=[])}function ow(i){return i.cleanup||(i.cleanup=[])}function uw(i,s){const a=i[9],c=a?a.get(Id,null):null;c&&c.handleError(s)}function cw(i,s,a,c,h){for(let g=0;g<a.length;){const y=a[g++],E=a[g++],b=s[y],A=i.data[y];null!==A.setInput?A.setInput(b,h,c,E):b[E]=h}}function Na(i,s,a){const c=Ls(s,i);!function Dd(i,s,a){tn(i)?i.setValue(s,a):s.textContent=a}(i[11],c,a)}function mg(i,s,a){let c=a?i.styles:null,h=a?i.classes:null,g=0;if(null!==s)for(let y=0;y<s.length;y++){const E=s[y];"number"==typeof E?g=E:1==g?h=pe(h,E):2==g&&(c=pe(c,E+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=h:i.classesWithoutHost=h}const dw=new dn("INJECTOR",-1);class hw{get(s,a=Or){if(a===Or){const c=new Error(`NullInjectorError: No provider for ${ue(s)}!`);throw c.name="NullInjectorError",c}return a}}const fw=new dn("Set Injector scope."),_g={},nI={};let F_;function df(){return void 0===F_&&(F_=new hw),F_}function L_(i,s=null,a=null,c){const h=V_(i,s,a,c);return h._resolveInjectorDefTypes(),h}function V_(i,s=null,a=null,c){return new ka(i,a,s||df(),c)}class ka{constructor(s,a,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&xr(a,E=>this.processProvider(E,s,a)),xr([s],E=>this.processInjectorType(E,[],g)),this.records.set(dw,Pd(void 0,this));const y=this.records.get(fw);this.scope=null!=y?y.value:null,this.source=h||("object"==typeof s?null:ue(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Or,c=mt.Default){this.assertNotDestroyed();const h=C(this),g=Un(void 0);try{if(!(c&mt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const b=function U_(i){return"function"==typeof i||"object"==typeof i&&i instanceof dn}(s)&&kt(s);E=b&&this.injectableDefInScope(b)?Pd(yg(s),_g):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(c&mt.Self?df():this.parent).get(s,a=c&mt.Optional&&a===Or?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[si]=y[si]||[]).unshift(ue(s)),h)throw y;return function at(i,s,a,c){const h=i[si];throw s[wu]&&h.unshift(s[wu]),i.message=function vt(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let h=ue(s);if(Array.isArray(s))h=s.map(ue).join(" -> ");else if("object"==typeof s){let g=[];for(let y in s)if(s.hasOwnProperty(y)){let E=s[y];g.push(y+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}h=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${i.replace(ad,"\n  ")}`}("\n"+i.message,h,a,c),i.ngTokenPath=h,i[si]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Un(g),C(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((c,h)=>s.push(ue(h))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(s,a,c){if(!(s=te(s)))return!1;let h=Fr(s);const g=null==h&&s.ngModule||void 0,y=void 0===g?s:g,E=-1!==c.indexOf(y);if(void 0!==g&&(h=Fr(g)),null==h)return!1;if(null!=h.imports&&!E){let M;c.push(y);try{xr(h.imports,k=>{this.processInjectorType(k,a,c)&&(void 0===M&&(M=[]),M.push(k))})}finally{}if(void 0!==M)for(let k=0;k<M.length;k++){const{ngModule:$,providers:Q}=M[k];xr(Q,ye=>this.processProvider(ye,$,Q||dt))}}this.injectorDefTypes.add(y);const b=_r(y)||(()=>new y);this.records.set(y,Pd(b,_g));const A=h.providers;if(null!=A&&!E){const M=s;xr(A,k=>this.processProvider(k,M,A))}return void 0!==g&&void 0!==s.providers}processProvider(s,a,c){let h=Fa(s=te(s))?s:te(s&&s.provide);const g=function rI(i,s,a){return mw(i)?Pd(void 0,i.useValue):Pd(gw(i),_g)}(s);if(Fa(s)||!0!==s.multi)this.records.get(h);else{let y=this.records.get(h);y||(y=Pd(void 0,_g,!0),y.factory=()=>re(y.multi),this.records.set(h,y)),h=s,y.multi.push(s)}this.records.set(h,g)}hydrate(s,a){return a.value===_g&&(a.value=nI,a.value=a.factory()),"object"==typeof a.value&&a.value&&function oI(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=te(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function yg(i){const s=kt(i),a=null!==s?s.factory:_r(i);if(null!==a)return a;if(i instanceof dn)throw new Pe(204,!1);if(i instanceof Function)return function pw(i){const s=i.length;if(s>0)throw function _o(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new Pe(204,!1);const a=function Jr(i){const s=i&&(i[xi]||i[Lr]);if(s){const a=function fr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Pe(204,!1)}function gw(i,s,a){let c;if(Fa(i)){const h=te(i);return _r(h)||yg(h)}if(mw(i))c=()=>te(i.useValue);else if(function _w(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...re(i.deps||[]));else if(function iI(i){return!(!i||!i.useExisting)}(i))c=()=>x(te(i.useExisting));else{const h=te(i&&(i.useClass||i.provide));if(!function MS(i){return!!i.deps}(i))return _r(h)||yg(h);c=()=>new h(...re(i.deps))}return c}function Pd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function mw(i){return null!==i&&"object"==typeof i&&Eu in i}function Fa(i){return"function"==typeof i}let La=(()=>{class i{static create(a,c){var h;if(Array.isArray(a))return L_({name:""},c,a,"");{const g=null!==(h=a.name)&&void 0!==h?h:"";return L_({name:g},a.parent,a.providers,g)}}}return i.THROW_IF_NOT_FOUND=Or,i.NULL=new hw,i.\u0275prov=qt({token:i,providedIn:"any",factory:()=>x(dw)}),i.__NG_ELEMENT_ID__=-1,i})();function Ti(i,s){ga(qh(i)[1],an())}function hf(i){let s=function j_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let h;if(Vi(i))h=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Pe(903,"");h=s.\u0275dir}if(h){if(a){c.push(h);const y=i;y.inputs=ff(i.inputs),y.declaredInputs=ff(i.declaredInputs),y.outputs=ff(i.outputs);const E=h.hostBindings;E&&fI(i,E);const b=h.viewQuery,A=h.contentQueries;if(b&&$_(i,b),A&&hI(i,A),de(i.inputs,h.inputs),de(i.declaredInputs,h.declaredInputs),de(i.outputs,h.outputs),Vi(h)&&h.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let y=0;y<g.length;y++){const E=g[y];E&&E.ngInherit&&E(i),E===hf&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Eg(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const h=i[c];h.hostVars=s+=h.hostVars,h.hostAttrs=_a(h.hostAttrs,a=_a(a,h.hostAttrs))}}(c)}function ff(i){return i===Cr?{}:i===dt?[]:i}function $_(i,s){const a=i.viewQuery;i.viewQuery=a?(c,h)=>{s(c,h),a(c,h)}:s}function hI(i,s){const a=i.contentQueries;i.contentQueries=a?(c,h,g)=>{s(c,h,g),a(c,h,g)}:s}function fI(i,s){const a=i.hostBindings;i.hostBindings=a?(c,h)=>{s(c,h),a(c,h)}:s}let Vu=null;function Yc(){if(!Vu){const i=Vt.Symbol;if(i&&i.iterator)Vu=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Vu=c)}}}return Vu}function Rd(i){return!!H_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Yc()in i)}function H_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Pr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Qc(i,s,a,c){const h=Se();return Pr(h,Us(),s)&&(Ft(),Jo(xn(),h,i,s,a,c)),Qc}function Mw(i,s,a,c,h,g,y,E){const b=Se(),A=Ft(),M=i+20,k=A.firstCreatePass?function Tg(i,s,a,c,h,g,y,E,b){const A=s.consts,M=xd(s,i,4,y||null,_i(A,E));lg(s,a,M,_i(A,b)),ga(s,M);const k=M.tViews=cf(2,M,c,h,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,M),k.queries=s.queries.embeddedTView(M)),M}(M,A,b,s,a,c,h,g,y):A.data[M];ni(k,!1);const $=b[11].createComment("");Td(A,b,$,k),ur($,b),dg(b,b[M]=R_($,b,$,k)),Li(k)&&Wc(A,b,k),null!=y&&ug(b,k,E)}function xg(i,s=mt.Default){const a=Se();return null===a?x(i,s):po(an(),a,te(i),s)}function FI(){throw new Error("invalid")}function Bw(i,s,a){const c=Se();return Pr(c,Us(),s)&&function vs(i,s,a,c,h,g,y,E){const b=sr(s,a);let M,A=s.inputs;!E&&null!=A&&(M=A[c])?(cw(i,a,M,c,h),xl(s)&&function K0(i,s){const a=or(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(c=function jb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),h=null!=y?y(h,s.value||"",c):h,tn(g)?g.setProperty(b,c,h):On(c)||(b.setProperty?b.setProperty(c,h):b[c]=h))}(Ft(),xn(),c,i,s,c[11],a,!1),Bw}function jw(i,s,a,c,h){const y=h?"class":"style";cw(i,a,s.inputs[y],y,c)}function Og(i,s,a,c){const h=Se(),g=Ft(),y=20+i,E=h[11],b=h[y]=kn(E,s,function Sp(){return _t.lFrame.currentNamespace}()),A=g.firstCreatePass?function LI(i,s,a,c,h,g,y){const E=s.consts,A=xd(s,i,2,h,_i(E,g));return lg(s,a,A,_i(E,y)),null!==A.attrs&&mg(A,A.attrs,!1),null!==A.mergedAttrs&&mg(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(y,g,h,0,s,a,c):g.data[y];ni(A,!0);const M=A.mergedAttrs;null!==M&&Tr(E,b,M);const k=A.classes;null!==k&&_s(E,b,k);const $=A.styles;return null!==$&&me(E,b,$),64!=(64&A.flags)&&Td(g,h,b,A),0===function fa(){return _t.lFrame.elementDepthCount}()&&ur(b,h),function yc(){_t.lFrame.elementDepthCount++}(),Li(A)&&(Wc(g,h,A),function Zc(i,s,a){if(eu(s)){const h=s.directiveEnd;for(let g=s.directiveStart;g<h;g++){const y=i.data[g];y.contentQueries&&y.contentQueries(1,a[g],g)}}}(g,A,h)),null!==c&&ug(h,A),Og}function mf(){let i=an();wc()?function Ec(){_t.lFrame.isParent=!1}():(i=i.parent,ni(i,!1));const s=i;!function ru(){_t.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(ga(a,i),eu(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Op(i){return 0!=(16&i.flags)}(s)&&jw(a,s,Se(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function nn(i){return 0!=(32&i.flags)}(s)&&jw(a,s,Se(),s.stylesWithoutHost,!1),mf}function Bd(i,s,a,c){return Og(i,s,a,c),mf(),Bd}function UI(){return Se()}function Hw(i){return!!i&&"function"==typeof i.then}function BI(i){return!!i&&"function"==typeof i.subscribe}const Gw=BI;function jd(i,s,a,c){const h=Se(),g=Ft(),y=an();return function zw(i,s,a,c,h,g,y,E){const b=Li(c),M=i.firstCreatePass&&ow(i),k=s[8],$=eI(s);let Q=!0;if(3&c.type||E){const ke=sr(c,s),Xe=E?E(ke):ke,De=$.length,tt=E?Ut=>E(zt(Ut[c.index])):c.index;if(tn(a)){let Ut=null;if(!E&&b&&(Ut=function jI(i,s,a,c){const h=i.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const y=h[g];if(y===a&&h[g+1]===c){const E=s[7],b=h[g+2];return E.length>b?E[b]:null}"string"==typeof y&&(g+=2)}return null}(i,s,h,c.index)),null!==Ut)(Ut.__ngLastListenerFn__||Ut).__ngNextListenerFn__=g,Ut.__ngLastListenerFn__=g,Q=!1;else{g=Pg(c,s,k,g,!1);const Wt=a.listen(Xe,h,g);$.push(g,Wt),M&&M.push(h,tt,De,De+1)}}else g=Pg(c,s,k,g,!0),Xe.addEventListener(h,g,y),$.push(g),M&&M.push(h,tt,De,y)}else g=Pg(c,s,k,g,!1);const ye=c.outputs;let Le;if(Q&&null!==ye&&(Le=ye[h])){const ke=Le.length;if(ke)for(let Xe=0;Xe<ke;Xe+=2){const ts=s[Le[Xe]][Le[Xe+1]].subscribe(g),Dl=$.length;$.push(g,ts),M&&M.push(h,c.index,Dl,-(Dl+1))}}}(g,h,h[11],y,i,s,!!a,c),jd}function ey(i,s,a,c){try{return!1!==a(c)}catch(h){return uw(i,h),!1}}function Pg(i,s,a,c,h){return function g(y){if(y===Function)return c;const E=2&i.flags?or(i.index,s):s;0==(32&s[2])&&hg(E);let b=ey(s,0,c,y),A=g.__ngNextListenerFn__;for(;A;)b=ey(s,0,A,y)&&b,A=A.__ngNextListenerFn__;return h&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function Rg(i=1){return function xh(i){return(_t.lFrame.contextLView=function Dc(i,s){for(;i>0;)s=s[15],i--;return s}(i,_t.lFrame.contextLView))[8]}(i)}function Je(i,s,a,c,h){const g=i[a+1],y=null===s;let E=c?Ys(g):bn(g),b=!1;for(;0!==E&&(!1===b||y);){const M=i[E+1];sy(i[E],s)&&(b=!0,i[E+1]=c?D_(M):qc(M)),E=c?Ys(M):bn(M)}b&&(i[a+1]=c?qc(g):D_(g))}function sy(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Zs(i,s)>=0}function Lg(i,s){return function Js(i,s,a,c){const h=Se(),g=Ft(),y=function yi(i){const s=_t.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);g.firstUpdatePass&&function ui(i,s,a,c){const h=i.data;if(null===h[a+1]){const g=h[Qn()],y=function Vg(i,s){return s>=i.expandoStartIndex}(i,a);(function uE(i,s){return 0!=(i.flags&(s?16:32))})(g,c)&&null===s&&!y&&(s=!1),s=function rE(i,s,a,c){const h=function cu(i){const s=_t.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let g=c?s.residualClasses:s.residualStyles;if(null===h)0===(c?s.classBindings:s.styleBindings)&&(a=Hd(a=Ug(null,i,s,a,c),s.attrs,c),g=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==h)if(a=Ug(h,i,s,a,c),null===g){let b=function iE(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==bn(c))return i[Ys(c)]}(i,s,c);void 0!==b&&Array.isArray(b)&&(b=Ug(null,i,s,b[1],c),b=Hd(b,s.attrs,c),function ly(i,s,a,c){i[Ys(a?s.classBindings:s.styleBindings)]=c}(i,s,c,b))}else g=function sE(i,s,a){let c;const h=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<h;g++)c=Hd(c,i[g].hostAttrs,a);return Hd(c,s.attrs,a)}(i,s,c)}return void 0!==g&&(c?s.residualClasses=g:s.residualStyles=g),a}(h,g,s,c),function HI(i,s,a,c,h,g){let y=g?s.classBindings:s.styleBindings,E=Ys(y),b=bn(y);i[c]=a;let M,A=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||Zs(k,M)>0)&&(A=!0)}else M=a;if(h)if(0!==b){const $=Ys(i[E+1]);i[c+1]=Pa($,E),0!==$&&(i[$+1]=I_(i[$+1],c)),i[E+1]=function nf(i,s){return 131071&i|s<<17}(i[E+1],c)}else i[c+1]=Pa(E,0),0!==E&&(i[E+1]=I_(i[E+1],c)),E=c;else i[c+1]=Pa(b,0),0===E?E=c:i[b+1]=I_(i[b+1],c),b=c;A&&(i[c+1]=qc(i[c+1])),Je(i,M,c,!0),Je(i,M,c,!1),function Ua(i,s,a,c,h){const g=h?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof s&&Zs(g,s)>=0&&(a[c+1]=D_(a[c+1]))}(s,M,i,c,g),y=Pa(E,b),g?s.classBindings=y:s.styleBindings=y}(h,g,s,a,y,c)}}(g,i,y,c),s!==xt&&Pr(h,y,s)&&function tl(i,s,a,c,h,g,y,E){if(!(3&s.type))return;const b=i.data,A=b[E+1];Gd(function P0(i){return 1==(1&i)}(A)?hy(b,s,a,h,bn(A),y):void 0)||(Gd(g)||function b_(i){return 2==(2&i)}(A)&&(g=hy(b,null,a,h,E,y)),function I0(i,s,a,c,h){const g=tn(i);if(s)h?g?i.addClass(a,c):a.classList.add(c):g?i.removeClass(a,c):a.classList.remove(c);else{let y=-1===c.indexOf("-")?void 0:P.DashCase;if(null==h)g?i.removeStyle(a,c,y):a.style.removeProperty(c);else{const E="string"==typeof h&&h.endsWith("!important");E&&(h=h.slice(0,-10),y|=P.Important),g?i.setStyle(a,c,h,y):a.style.setProperty(c,h,E?"important":"")}}}(c,y,Ls(Qn(),a),h,g))}(g,g.data[Qn()],h,h[11],i,h[y+1]=function aE(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ue(bi(i)))),i}(s,a),c,y)}(i,s,null,!0),Lg}function Ug(i,s,a,c,h){let g=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(g=s[E],c=Hd(c,g.hostAttrs,h),g!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function Hd(i,s,a){const c=a?1:2;let h=-1;if(null!==s)for(let g=0;g<s.length;g++){const y=s[g];"number"==typeof y?h=y:h===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),qn(i,y,!!a||s[++g]))}return void 0===i?null:i}function hy(i,s,a,c,h,g){const y=null===s;let E;for(;h>0;){const b=i[h],A=Array.isArray(b),M=A?b[1]:b,k=null===M;let $=a[h+1];$===xt&&($=k?dt:void 0);let Q=k?zs($,c):M===c?$:void 0;if(A&&!Gd(Q)&&(Q=zs(b,c)),Gd(Q)&&(E=Q,y))return E;const ye=i[h+1];h=y?Ys(ye):bn(ye)}if(null!==s){let b=g?s.residualClasses:s.residualStyles;null!=b&&(E=zs(b,c))}return E}function Gd(i){return void 0!==i}function fy(i,s=""){const a=Se(),c=Ft(),h=i+20,g=c.firstCreatePass?xd(c,h,1,s,null):c.data[h],y=a[h]=function Hc(i,s){return tn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Td(c,a,y,g),ni(g,!1)}function qd(i){return zd("",i,""),qd}function zd(i,s,a){const c=Se(),h=function Bu(i,s,a,c){return Pr(i,Us(),a)?s+he(a)+c:xt}(c,i,s,a);return h!==xt&&Na(c,Qn(),h),zd}const Gu=void 0;var YI=["en",[["a","p"],["AM","PM"],Gu],[["AM","PM"],Gu,Gu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gu,"{1} 'at' {0}",Gu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function KI(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let qu={};function Ey(i){const s=function Iy(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=CE(s);if(a)return a;const c=s.split("-")[0];if(a=CE(c),a)return a;if("en"===c)return YI;throw new Error(`Missing locale data for the locale "${i}".`)}function Cy(i){return Ey(i)[yt.PluralCase]}function CE(i){return i in qu||(qu[i]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[i]),qu[i]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const zu="en-US";let DE=zu;function Uy(i,s,a,c,h){if(i=te(i),Array.isArray(i))for(let g=0;g<i.length;g++)Uy(i[g],s,a,c,h);else{const g=Ft(),y=Se();let E=Fa(i)?i:te(i.provide),b=gw(i);const A=an(),M=1048575&A.providerIndexes,k=A.directiveStart,$=A.providerIndexes>>20;if(Fa(i)||!i.multi){const Q=new Bo(b,h,xg),ye=Jd(E,s,h?M:M+$,k);-1===ye?(Hs(Gi(A,y),g,E),Yd(g,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(Q),y.push(Q)):(a[ye]=Q,y[ye]=Q)}else{const Q=Jd(E,s,M+$,k),ye=Jd(E,s,M,M+$),Le=Q>=0&&a[Q],ke=ye>=0&&a[ye];if(h&&!ke||!h&&!Le){Hs(Gi(A,y),g,E);const Xe=function Nf(i,s,a,c,h){const g=new Bo(i,a,xg);return g.multi=[],g.index=s,g.componentProviders=0,Qd(g,h,c&&!a),g}(h?$E:By,a.length,h,c,b);!h&&ke&&(a[ye].providerFactory=Xe),Yd(g,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(Xe),y.push(Xe)}else Yd(g,i,Q>-1?Q:ye,Qd(a[h?ye:Q],b,!h&&c));!h&&c&&ke&&a[ye].componentProviders++}}}function Yd(i,s,a,c){const h=Fa(s),g=function sI(i){return!!i.useClass}(s);if(h||g){const b=(g?te(s.useClass):s).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!h&&s.multi){const M=A.indexOf(a);-1===M?A.push(a,[c,b]):A[M+1].push(c,b)}else A.push(a,b)}}}function Qd(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Jd(i,s,a,c){for(let h=a;h<c;h++)if(s[h]===i)return h;return-1}function By(i,s,a,c){return cl(this.multi,[])}function $E(i,s,a,c){const h=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=ii(a,a[1],this.providerFactory.index,c);g=E.slice(0,y),cl(h,g);for(let b=y;b<E.length;b++)g.push(E[b])}else g=[],cl(h,g);return g}function cl(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function HE(i,s=[]){return a=>{a.providersResolver=(c,h)=>function dD(i,s,a){const c=Ft();if(c.firstCreatePass){const h=Vi(i);Uy(a,c.data,c.blueprint,h,!0),Uy(s,c.data,c.blueprint,h,!1)}}(c,h?h(i):i,s)}}class jy{}class fD{resolveComponentFactory(s){throw function hD(i){const s=Error(`No component factory found for ${ue(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let kf=(()=>{class i{}return i.NULL=new fD,i})();function qE(){return ll(an(),Se())}function ll(i,s){return new Qu(sr(i,s))}let Qu=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=qE,i})();function zE(i){return i instanceof Qu?i.nativeElement:i}class $y{}let pD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Ff(){const i=Se(),a=or(an().index,i);return function Hy(i){return i[11]}($r(a)?a:i)}(),i})(),ZE=(()=>{class i{}return i.\u0275prov=qt({token:i,providedIn:"root",factory:()=>null}),i})();class sm{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Lf=new sm("13.3.11"),om={};function Xd(i,s,a,c,h=!1){for(;null!==a;){const g=s[a.index];if(null!==g&&c.push(zt(g)),Fi(g))for(let E=10;E<g.length;E++){const b=g[E],A=b[1].firstChild;null!==A&&Xd(b[1],b,A,c)}const y=a.type;if(8&y)Xd(i,s,a.child,c);else if(32&y){const E=ae(a,s);let b;for(;b=E();)c.push(b)}else if(16&y){const E=E0(s,a);if(Array.isArray(E))c.push(...E);else{const b=ft(s[16]);Xd(b[1],b,E,c,!0)}}a=h?a.projectionNext:a.next}return c}class Xu{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Xd(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Fi(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(eg(s,c),Mc(a,c))}this._attachedToViewContainer=!1}f0(this._lView[1],this._lView)}onDestroy(s){x_(this._lView[1],this._lView,null,s)}markForCheck(){hg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function k_(i,s,a){const c=s[10];c.begin&&c.begin();try{Ra(i,s,i.template,a)}catch(h){throw uw(s,h),h}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ef(i,s){Ad(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=s}}class gD extends Xu{constructor(s){super(s),this._view=s}detectChanges(){pg(this._view)}checkNoChanges(){}get context(){return null}}class Gy extends kf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Bn(s);return new Vf(a,this.ngModule)}}function eh(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Vf extends jy{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Ab(i){return i.map(M0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return eh(this.componentDef.inputs)}get outputs(){return eh(this.componentDef.outputs)}create(s,a,c,h){const g=(h=h||this.ngModule)?function KE(i,s){return{get:(a,c,h)=>{const g=i.get(a,om,h);return g!==om||c===om?g:s.get(a,c,h)}}}(s,h.injector):s,y=g.get($y,la),E=g.get(ZE,null),b=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=c?function Z0(i,s,a){if(tn(i))return i.selectRootElement(s,a===jt.ShadowDom);let c="string"==typeof s?i.querySelector(s):s;return c.textContent="",c}(b,c,this.componentDef.encapsulation):kn(y.createRenderer(null,this.componentDef),A,function WE(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),k=this.componentDef.onPush?576:528,$=function Dw(i,s){return{components:[],scheduler:i||Yh,clean:AS,playerHandler:s||null,flags:0}}(),Q=cf(0,null,null,1,0,null,null,null,null,null),ye=Md(null,Q,$,k,null,null,y,b,E,g);let Le,ke;uo(ye);try{const Xe=function bw(i,s,a,c,h,g){const y=a[1];a[20]=i;const b=xd(y,20,2,"#host",null),A=b.mergedAttrs=s.hostAttrs;null!==A&&(mg(b,A,!0),null!==i&&(Tr(h,i,A),null!==b.classes&&_s(h,i,b.classes),null!==b.styles&&me(h,i,b.styles)));const M=c.createRenderer(i,s),k=Md(a,q0(s),null,s.onPush?64:16,a[20],b,c,M,g||null,null);return y.firstCreatePass&&(Hs(Gi(b,a),y,s.type),J0(y,b),ew(b,a.length,1)),dg(a,k),a[20]=k}(M,this.componentDef,ye,y,b);if(M)if(c)Tr(b,M,["ng-version",Lf.full]);else{const{attrs:De,classes:tt}=function Sb(i){const s=[],a=[];let c=1,h=2;for(;c<i.length;){let g=i[c];if("string"==typeof g)2===h?""!==g&&s.push(g,i[++c]):8===h&&a.push(g);else{if(!ys(h))break;h=g}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);De&&Tr(b,M,De),tt&&tt.length>0&&_s(b,M,tt.join(" "))}if(ke=cn(Q,20),void 0!==a){const De=ke.projection=[];for(let tt=0;tt<this.ngContentSelectors.length;tt++){const Ut=a[tt];De.push(null!=Ut?Array.from(Ut):null)}}Le=function Iw(i,s,a,c,h){const g=a[1],y=function Od(i,s,a){const c=an();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),tw(i,c,s,Di(i,s,1,null),a));const h=ii(s,i,c.directiveStart,c);ur(h,s);const g=sr(c,s);return g&&ur(g,s),h}(g,a,s);if(c.components.push(y),i[8]=y,h&&h.forEach(b=>b(y,s)),s.contentQueries){const b=an();s.contentQueries(1,y,b.directiveStart)}const E=an();return!g.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(co(E.index),Y0(a[1],E,0,E.directiveStart,E.directiveEnd,s),Q0(s,y)),y}(Xe,this.componentDef,ye,$,[Ti]),Ji(Q,ye,null)}finally{Hr()}return new am(this.componentType,Le,ll(ke,ye),ye,ke)}}class am extends class cr{}{constructor(s,a,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new gD(h),this.componentType=s}get injector(){return new Ar(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class dl{}class ec{}const hl=new Map;class Wy extends dl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Gy(this);const c=jn(s);this._bootstrapComponents=_(c.bootstrap),this._r3Injector=V_(s,a,[{provide:dl,useValue:this},{provide:kf,useValue:this.componentFactoryResolver}],ue(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=La.THROW_IF_NOT_FOUND,c=mt.Default){return s===La||s===dl||s===dw?this:this._r3Injector.get(s,a,c)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class tc extends ec{constructor(s){super(),this.moduleType=s,null!==jn(s)&&function QE(i){const s=new Set;!function a(c){const h=jn(c,!0),g=h.id;null!==g&&(function zy(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ue(s)} vs ${ue(s.name)}`)}(g,hl.get(g),c),hl.set(g,c));const y=_(h.imports);for(const E of y)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new Wy(this.moduleType,s)}}function JE(i,s,a,c){return function fl(i,s,a,c,h,g){const y=s+a;return Pr(i,y,h)?function Xo(i,s,a){return i[s]=a}(i,y+1,g?c.call(g,h):c(h)):function Zn(i,s){const a=i[s];return a===xt?void 0:a}(i,y+1)}(Se(),function yr(){const i=_t.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),i,s,a,c)}function lr(i){return s=>{setTimeout(i,void 0,s)}}const To=class xe extends d.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){var h,g,y;let E=s,b=a||(()=>null),A=c;if(s&&"object"==typeof s){const k=s;E=null===(h=k.next)||void 0===h?void 0:h.bind(k),b=null===(g=k.error)||void 0===g?void 0:g.bind(k),A=null===(y=k.complete)||void 0===y?void 0:y.bind(k)}this.__isAsync&&(b=lr(b),E&&(E=lr(E)),A&&(A=lr(A)));const M=super.subscribe({next:E,error:b,complete:A});return s instanceof X.w0&&s.add(M),M}};function DD(){return this._results[Yc()]()}class Qy{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Yc(),c=Qy.prototype;c[a]||(c[a]=DD)}get changes(){return this._changes||(this._changes=new To)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const h=Mr(s);(this._changesDetected=!function Nh(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let h=i[c],g=s[c];if(a&&(h=a(h),g=a(g)),g!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Uf=(()=>{class i{}return i.__NG_ELEMENT_ID__=nC,i})();const TD=Uf,AD=class extends TD{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s){const a=this._declarationTContainer.tViews,c=Md(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(c[19]=g.createEmbeddedView(a)),Ji(a,c,s),new Xu(c)}};function nC(){return lm(an(),Se())}function lm(i,s){return 4&i.type?new AD(s,i,ll(i,s)):null}let Jy=(()=>{class i{}return i.__NG_ELEMENT_ID__=SD,i})();function SD(){return gn(an(),Se())}const rC=Jy,Mt=class extends rC{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return ll(this._hostTNode,this._hostLView)}get injector(){return new Ar(this._hostTNode,this._hostLView)}get parentInjector(){const s=$s(this._hostTNode,this._hostLView);if(jo(s)){const a=js(s,this._hostLView),c=Bs(s);return new Ar(a[1].data[c+8],a)}return new Ar(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=gl(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){const h=s.createEmbeddedView(a||{});return this.insert(h,c),h}createComponent(s,a,c,h,g){const y=s&&!function Ia(i){return"function"==typeof i}(s);let E;if(y)E=a;else{const k=a||{};E=k.index,c=k.injector,h=k.projectableNodes,g=k.ngModuleRef}const b=y?s:new Vf(Bn(s)),A=c||this.parentInjector;if(!g&&null==b.ngModule){const $=(y?A:this.parentInjector).get(dl,null);$&&(g=$)}const M=b.create(A,h,void 0,g);return this.insert(M.hostView,E),M}insert(s,a){const c=s._lView,h=c[1];if(function ha(i){return Fi(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const k=c[3],$=new Mt(k,k[6],k[3]);$.detach($.indexOf(s))}}const g=this._adjustIndex(a),y=this._lContainer;!function Ru(i,s,a,c){const h=10+c,g=a.length;c>0&&(a[h-1][4]=s),c<g-10?(s[4]=a[h],Da(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function yb(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(h,c,y,g);const E=ig(g,y),b=c[11],A=ng(b,y[7]);return null!==A&&function Xh(i,s,a,c,h,g){c[0]=h,c[6]=s,Ad(i,c,a,1,h,g)}(h,y[6],b,c,A,E),s.attachToViewContainerRef(),Da(dm(y),g,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=gl(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=eg(this._lContainer,a);c&&(Mc(dm(this._lContainer),a),f0(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=eg(this._lContainer,a);return c&&null!=Mc(dm(this._lContainer),a)?new Xu(c):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function gl(i){return i[8]}function dm(i){return i[8]||(i[8]=[])}function gn(i,s){let a;const c=s[i.index];if(Fi(c))a=c;else{let h;if(8&i.type)h=zt(c);else{const g=s[11];h=g.createComment("");const y=sr(i,s);ku(g,ng(g,y),h,function wb(i,s){return tn(i)?i.nextSibling(s):s.nextSibling}(g,y),!1)}s[i.index]=a=R_(c,s,h,i),dg(s,a)}return new Mt(a,i,s)}class Xy{constructor(s){this.queryList=s,this.matches=null}clone(){return new Xy(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dn{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,h=[];for(let g=0;g<c;g++){const y=a.getByIndex(g);h.push(this.queries[y.indexInDeclarationView].clone())}return new Dn(h)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==$f(s,a).matches&&this.queries[a].setDirty()}}class Ge{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class th{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(s,h);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new th(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class jf{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new jf(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(s,a,ml(a,g)),this.matchTNodeWithReadOption(s,a,Ca(a,s,g,!1,!1))}else c===Uf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ca(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Qu||h===Jy||h===Uf&&4&a.type)this.addMatch(a.index,-2);else{const g=Ca(a,s,h,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function ml(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function hm(i,s,a,c){return-1===a?function MD(i,s){return 11&i.type?ll(i,s):4&i.type?lm(i,s):null}(s,i):-2===a?function xD(i,s,a){return a===Qu?ll(s,i):a===Uf?lm(s,i):a===Jy?gn(s,i):void 0}(i,s,c):ii(i,i[1],a,s)}function nh(i,s,a,c){const h=s[19].queries[c];if(null===h.matches){const g=i.data,y=a.matches,E=[];for(let b=0;b<y.length;b+=2){const A=y[b];E.push(A<0?null:hm(s,g[A],y[b+1],a.metadata.read))}h.matches=E}return h.matches}function fm(i,s,a,c){const h=i.queries.getByIndex(a),g=h.matches;if(null!==g){const y=nh(i,s,h,a);for(let E=0;E<g.length;E+=2){const b=g[E];if(b>0)c.push(y[E/2]);else{const A=g[E+1],M=s[-b];for(let k=10;k<M.length;k++){const $=M[k];$[17]===$[3]&&fm($[1],$,A,c)}if(null!==M[9]){const k=M[9];for(let $=0;$<k.length;$++){const Q=k[$];fm(Q[1],Q,A,c)}}}}}return c}function ev(i){const s=Se(),a=Ft(),c=lu();Hl(c+1);const h=$f(a,c);if(i.dirty&&oo(s)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const g=h.crossesNgTemplate?fm(a,s,c,[]):nh(a,s,h,c);i.reset(g,zE),i.notifyOnChanges()}return!0}return!1}function pm(i,s,a,c){const h=Ft();if(h.firstCreatePass){const g=an();(function gm(i,s,a){null===i.queries&&(i.queries=new th),i.queries.track(new jf(s,a))})(h,new Ge(s,a,c),g.index),function se(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function Ha(i,s,a){const c=new Qy(4==(4&a));x_(i,s,c,c.destroy),null===s[19]&&(s[19]=new Dn),s[19].queries.push(new Xy(c))}(h,Se(),a)}function tv(){return function iC(i,s){return i[19].queries[s].queryList}(Se(),lu())}function $f(i,s){return i.queries.getByIndex(s)}function zf(...i){}const uv=new dn("Application Initializer");let on=(()=>{class i{constructor(a){this.appInits=a,this.resolve=zf,this.reject=zf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Hw(g))a.push(g);else if(Gw(g)){const y=new Promise((E,b)=>{g.subscribe({complete:E,error:b})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(x(uv,8))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hC=new dn("AppId",{providedIn:"root",factory:function cv(){return`${lv()}${lv()}${lv()}`}});function lv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ch=new dn("Platform Initializer"),vm=new dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Zf=new dn("appBootstrapListener");let fC=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const dv=new dn("LocaleId",{providedIn:"root",factory:()=>Y(dv,mt.Optional|mt.SkipSelf)||function Yr(){return"undefined"!=typeof $localize&&$localize.locale||zu}()}),UD=new dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class jD{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let $D=(()=>{class i{compileModuleSync(a){return new tc(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=_(jn(a).declarations).reduce((y,E)=>{const b=Bn(E);return b&&y.push(new Vf(b)),y},[]);return new jD(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const lh=(()=>Promise.resolve(0))();function hv(i){"undefined"==typeof Zone?lh.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Xs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new To(!1),this.onMicrotaskEmpty=new To(!1),this.onStable=new To(!1),this.onError=new To(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function pC(){let i=Vt.requestAnimationFrame,s=Vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function gC(i){const s=()=>{!function dh(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Vt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Wf(i),i.isCheckStableRunning=!0,wm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Wf(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,g,y,E)=>{try{return Em(i),a.invokeTask(h,g,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&s(),Cm(i)}},onInvoke:(a,c,h,g,y,E,b)=>{try{return Em(i),a.invoke(h,g,y,E,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),Cm(i)}},onHasTask:(a,c,h,g)=>{a.hasTask(h,g),c===h&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,Wf(i),wm(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,h,g)=>(a.handleError(h,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,h){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+h,s,za,zf,zf);try{return g.runTask(y,a,c)}finally{g.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const za={};function wm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Wf(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Em(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Cm(i){i._nesting--,wm(i)}class hh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new To,this.onMicrotaskEmpty=new To,this.onStable=new To,this.onError=new To}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,h){return s.apply(a,c)}}let Mi=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xs.assertNotInAngularZone(),hv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(x(Xs))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})(),bm=(()=>{class i{constructor(){this._applications=new Map,Yf.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Yf.findTestabilityInTree(this,a,c)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Kf{addToWindow(s){}findTestabilityInTree(s,a,c){return null}}function mC(i){Yf=i}let Yf=new Kf,Za=null;const fv=new dn("AllowMultipleToken"),pv=new dn("PlatformOnDestroy");class yC{constructor(s,a){this.name=s,this.token=a}}function vC(i,s,a=[]){const c=`Platform: ${s}`,h=new dn(c);return(g=[])=>{let y=Wa();if(!y||y.injector.get(fv,!1)){const E=[...a,...g,{provide:h,useValue:!0}];i?i(E):function Im(i){if(Za&&!Za.get(fv,!1))throw new Pe(400,"");Za=i;const s=i.get(gv),a=i.get(ch,null);a&&a.forEach(c=>c())}(function wC(i=[],s){return La.create({name:s,providers:[{provide:fw,useValue:"platform"},{provide:pv,useValue:()=>Za=null},...i]})}(E,c))}return function zD(i){const s=Wa();if(!s)throw new Pe(401,"");return s}()}}function Wa(){var i;return null!==(i=null==Za?void 0:Za.get(gv))&&void 0!==i?i:null}let gv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const E=function Cl(i,s){let a;return a="noop"===i?new hh:("zone.js"===i?void 0:i)||new Xs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),b=[{provide:Xs,useValue:E}];return E.run(()=>{const A=La.create({providers:b,parent:this.injector,name:a.moduleType.name}),M=a.create(A),k=M.injector.get(Id,null);if(!k)throw new Pe(402,"");return E.runOutsideAngular(()=>{const $=E.onError.subscribe({next:Q=>{k.handleError(Q)}});M.onDestroy(()=>{Tm(this._modules,M),$.unsubscribe()})}),function EC(i,s,a){try{const c=a();return Hw(c)?c.catch(h=>{throw s.runOutsideAngular(()=>i.handleError(h)),h}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(k,E,()=>{const $=M.injector.get(on);return $.runInitializers(),$.donePromise.then(()=>(function Zd(i){Lt(i,"Expected localeId to be defined"),"string"==typeof i&&(DE=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(dv,zu)||zu),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,c=[]){const h=bl({},c);return function GD(i,s,a){const c=new tc(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(a){const c=a.injector.get(Dm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Pe(403,"");a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(pv,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(x(La))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function bl(i,s){return Array.isArray(s)?s.reduce(bl,i):Object.assign(Object.assign({},i),s)}let Dm=(()=>{class i{constructor(a,c,h,g){this._zone=a,this._injector=c,this._exceptionHandler=h,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new N.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new N.y(b=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Xs.assertNotInAngularZone(),hv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Xs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{A.unsubscribe(),M.unsubscribe()}});this.isStable=(0,le.T)(y,E.pipe((0,ie.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new Pe(405,"");let h;h=a instanceof jy?a:this._injector.get(kf).resolveComponentFactory(a),this.componentTypes.push(h.componentType);const g=function _C(i){return i.isBoundToModule}(h)?void 0:this._injector.get(dl),E=h.create(La.NULL,[],c||h.selector,g),b=E.location.nativeElement,A=E.injector.get(Mi,null),M=A&&E.injector.get(bm);return A&&M&&M.registerApplication(b,A),E.onDestroy(()=>{this.detachView(E.hostView),Tm(this.components,E),M&&M.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Tm(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Zf,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(x(Xs),x(La),x(Id),x(on))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Tm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let CC=!0,An=!1;function Am(){return An=!0,CC}function Sm(){if(An)throw new Error("Cannot enable prod mode after platform setup.");CC=!1}let KD=(()=>{class i{}return i.__NG_ELEMENT_ID__=bC,i})();function bC(i){return function gh(i,s,a){if(xl(i)&&!a){const c=or(i.index,s);return new Xu(c,c)}return 47&i.type?new Xu(s[16],s):null}(an(),Se(),16==(16&i))}class Ot{constructor(){}supports(s){return Rd(s)}create(s){return new Pm(s)}}const eT=(i,s)=>s;class Pm{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||eT}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,h=0,g=null;for(;a||c;){const y=!c||a&&a.currentIndex<vv(c,h,g)?a:c,E=vv(y,h,g),b=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{g||(g=[]);const A=E-h,M=b-h;if(A!=M){for(let $=0;$<A;$++){const Q=$<g.length?g[$]:g[$]=0,ye=Q+$;M<=ye&&ye<A&&(g[$]=Q+1)}g[y.previousIndex]=M-A}}E!==b&&s(y,E,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Rd(s))throw new Pe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let h,g,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)g=s[E],y=this._trackByFn(E,g),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,g,y,E)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,y,E),c=!0),a=a._next}else h=0,function yI(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Yc()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{y=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,E,y,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,h){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,h)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,h)):s=this._addAfter(new Xf(a,c),g,h),s}_verifyReinsertion(s,a,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?s=this._reinsertAfter(g,s._prev,h):s.currentIndex!=h&&(s.currentIndex=h,this._addToMoves(s,h)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const h=s._prevRemoved,g=s._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const h=null===a?this._itHead:a._next;return s._next=h,s._prev=a,null===h?this._itTail=s:h._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new tp),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tp),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Xf{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ep{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class tp{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new ep,this.map.set(a,c)),c.add(s)}get(s,a){const h=this.map.get(s);return h?h.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vv(i,s,a){const c=i.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+s+h}class wv{constructor(){}supports(s){return s instanceof Map||H_(s)}create(){return new DC}}class DC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||H_(s)))throw new Pe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const h=this._records.get(s);this._maybeAddToChanges(h,a);const g=h._prev,y=h._next;return g&&(g._next=y),y&&(y._prev=g),h._next=null,h._prev=null,h}const c=new tT(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class tT{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ev(){return new Rm([new Ot])}let Rm=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Ev()),deps:[[i,new Rn,new rt]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new Pe(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:Ev}),i})();function TC(){return new Cv([new wv])}let Cv=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||TC()),deps:[[i,new Rn,new rt]]}}find(a){const c=this.factories.find(g=>g.supports(a));if(c)return c;throw new Pe(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:TC}),i})();const bv=vC(null,"core",[]);let SC=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(x(Dm))},i.\u0275mod=Rt({type:i}),i.\u0275inj=Ht({}),i})()},3942:(Qe,we,R)=>{R.d(we,{Z:()=>Pe});var d=R(2090),X=R(4859),N=R(9681),le=R(1877);class ie{constructor(he,Ee){this._delegate=he,this.firebase=Ee,(0,N._addComponent)(he,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(he,Ee=N._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(he);return!Ke.isInitialized()&&"EXPLICIT"===(null===(qe=Ke.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:Ee})}_removeServiceInstance(he,Ee=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ee)}_addComponent(he){(0,N._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,N._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function pe(){const Be=function ue(Be){const he={},Ee={__esModule:!0,initializeApp:function Te(je,z={}){const ve=N.initializeApp(je,z);if((0,d.r3)(he,ve.name))return he[ve.name];const K=new Be(ve,Ee);return he[ve.name]=K,K},app:Ke,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Ce(je){const z=je.name,ve=z.replace("-compat","");if(N._registerComponent(je)&&"PUBLIC"===je.type){const K=(ne=Ke())=>{if("function"!=typeof ne[ve])throw de.create("invalid-app-argument",{appName:z});return ne[ve]()};void 0!==je.serviceProps&&(0,d.ZB)(K,je.serviceProps),Ee[ve]=K,Be.prototype[ve]=function(...ne){return this._getService.bind(this,z).apply(this,je.multipleInstances?ne:[])}}return"PUBLIC"===je.type?Ee[ve]:null},removeApp:function qe(je){delete he[je]},useAsService:function Ue(je,z){return"serverAuth"===z?null:z},modularAPIs:N}};function Ke(je){if(!(0,d.r3)(he,je=je||N._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:je});return he[je]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function _e(){return Object.keys(he).map(je=>he[je])}}),Ke.App=Be,Ee}(ie);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function he(Ee){(0,d.ZB)(Be,Ee)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Be}(),H=new le.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=B;!function Ie(Be){(0,N.registerVersion)("@firebase/app-compat","0.1.32",Be)}()},9681:(Qe,we,R)=>{R.r(we),R.d(we,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>xi,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>qt,_apps:()=>Yt,_clearComponents:()=>is,_components:()=>mn,_getProvider:()=>Ht,_registerComponent:()=>Er,_removeServiceInstance:()=>kt,deleteApp:()=>mt,getApp:()=>Lr,getApps:()=>Oi,initializeApp:()=>Ms,onLog:()=>Un,registerVersion:()=>_n,setLogLevel:()=>Pi});var d=R(5861),X=R(4859),N=R(1877),le=R(2090),ie=R(8766);class fe{constructor(j){this.container=j}getPlatformInfoString(){return this.container.getProviders().map(G=>{if(function de(L){const j=L.getComponent();return"VERSION"===(null==j?void 0:j.type)}(G)){const Ae=G.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(G=>G).join(" ")}}const ue="@firebase/app",B=new N.Yd("@firebase/app"),Lt="[DEFAULT]",We={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yt=new Map,mn=new Map;function Xt(L,j){try{L.container.addComponent(j)}catch(G){B.debug(`Component ${j.name} failed to register with FirebaseApp ${L.name}`,G)}}function qt(L,j){L.container.addOrOverwriteComponent(j)}function Er(L){const j=L.name;if(mn.has(j))return B.debug(`There were multiple attempts to register component ${j}.`),!1;mn.set(j,L);for(const G of Yt.values())Xt(G,L);return!0}function Ht(L,j){const G=L.container.getProvider("heartbeat").getImmediate({optional:!0});return G&&G.triggerHeartbeat(),L.container.getProvider(j)}function kt(L,j,G=Lt){Ht(L,j).clearInstance(G)}function is(){mn.clear()}const fr=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fr{constructor(j,G,Ae){this._isDeleted=!1,this._options=Object.assign({},j),this._config=Object.assign({},G),this._name=G.name,this._automaticDataCollectionEnabled=G.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(j){this.checkDestroyed(),this._automaticDataCollectionEnabled=j}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(j){this._isDeleted=j}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const xi="9.9.3";function Ms(L,j={}){"object"!=typeof j&&(j={name:j});const G=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},j),Ae=G.name;if("string"!=typeof Ae||!Ae)throw fr.create("bad-app-name",{appName:String(Ae)});const Ve=Yt.get(Ae);if(Ve){if((0,le.vZ)(L,Ve.options)&&(0,le.vZ)(G,Ve.config))return Ve;throw fr.create("duplicate-app",{appName:Ae})}const ut=new X.H0(Ae);for(const $t of mn.values())ut.addComponent($t);const Qt=new Fr(L,G,ut);return Yt.set(Ae,Qt),Qt}function Lr(L=Lt){const j=Yt.get(L);if(!j)throw fr.create("no-app",{appName:L});return j}function Oi(){return Array.from(Yt.values())}function mt(L){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,d.Z)(function*(L){const j=L.name;Yt.has(j)&&(Yt.delete(j),yield Promise.all(L.container.getProviders().map(G=>G.delete())),L.isDeleted=!0)})).apply(this,arguments)}function _n(L,j,G){var Ae;let Ve=null!==(Ae=We[L])&&void 0!==Ae?Ae:L;G&&(Ve+=`-${G}`);const ut=Ve.match(/\s|\//),Qt=j.match(/\s|\//);if(ut||Qt){const $t=[`Unable to register library "${Ve}" with version "${j}":`];return ut&&$t.push(`library name "${Ve}" contains illegal characters (whitespace or "/")`),ut&&Qt&&$t.push("and"),Qt&&$t.push(`version name "${j}" contains illegal characters (whitespace or "/")`),void B.warn($t.join(" "))}Er(new X.wA(`${Ve}-version`,()=>({library:Ve,version:j}),"VERSION"))}function Un(L,j){if(null!==L&&"function"!=typeof L)throw fr.create("invalid-log-argument");(0,N.Am)(L,j)}function Pi(L){(0,N.Ub)(L)}const Sn="firebase-heartbeat-store";let pi=null;function So(){return pi||(pi=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(L,j)=>{0===j&&L.createObjectStore(Sn)}}).catch(L=>{throw fr.create("idb-open",{originalErrorMessage:L.message})})),pi}function ot(){return(ot=(0,d.Z)(function*(L){var j;try{return(yield So()).transaction(Sn).objectStore(Sn).get(Xr(L))}catch(G){if(G instanceof le.ZR)B.warn(G.message);else{const Ae=fr.create("idb-get",{originalErrorMessage:null===(j=G)||void 0===j?void 0:j.message});B.warn(Ae.message)}}})).apply(this,arguments)}function Et(L,j){return pr.apply(this,arguments)}function pr(){return(pr=(0,d.Z)(function*(L,j){var G;try{const Ve=(yield So()).transaction(Sn,"readwrite");return yield Ve.objectStore(Sn).put(j,Xr(L)),Ve.done}catch(Ae){if(Ae instanceof le.ZR)B.warn(Ae.message);else{const Ve=fr.create("idb-set",{originalErrorMessage:null===(G=Ae)||void 0===G?void 0:G.message});B.warn(Ve.message)}}})).apply(this,arguments)}function Xr(L){return`${L.name}!${L.options.appId}`}class gr{constructor(j){this.container=j,this._heartbeatsCache=null;const G=this.container.getProvider("app").getImmediate();this._storage=new Os(G),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var j=this;return(0,d.Z)(function*(){const Ae=j.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ve=Cr();if(null===j._heartbeatsCache&&(j._heartbeatsCache=yield j._heartbeatsCachePromise),j._heartbeatsCache.lastSentHeartbeatDate!==Ve&&!j._heartbeatsCache.heartbeats.some(ut=>ut.date===Ve))return j._heartbeatsCache.heartbeats.push({date:Ve,agent:Ae}),j._heartbeatsCache.heartbeats=j._heartbeatsCache.heartbeats.filter(ut=>{const Qt=new Date(ut.date).valueOf();return Date.now()-Qt<=2592e6}),j._storage.overwrite(j._heartbeatsCache)})()}getHeartbeatsHeader(){var j=this;return(0,d.Z)(function*(){if(null===j._heartbeatsCache&&(yield j._heartbeatsCachePromise),null===j._heartbeatsCache||0===j._heartbeatsCache.heartbeats.length)return"";const G=Cr(),{heartbeatsToSend:Ae,unsentEntries:Ve}=function dt(L,j=1024){const G=[];let Ae=L.slice();for(const Ve of L){const ut=G.find(Qt=>Qt.agent===Ve.agent);if(ut){if(ut.dates.push(Ve.date),U(G)>j){ut.dates.pop();break}}else if(G.push({agent:Ve.agent,dates:[Ve.date]}),U(G)>j){G.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:G,unsentEntries:Ae}}(j._heartbeatsCache.heartbeats),ut=(0,le.L)(JSON.stringify({version:2,heartbeats:Ae}));return j._heartbeatsCache.lastSentHeartbeatDate=G,Ve.length>0?(j._heartbeatsCache.heartbeats=Ve,yield j._storage.overwrite(j._heartbeatsCache)):(j._heartbeatsCache.heartbeats=[],j._storage.overwrite(j._heartbeatsCache)),ut})()}}function Cr(){return(new Date).toISOString().substring(0,10)}class Os{constructor(j){this.app=j,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var j=this;return(0,d.Z)(function*(){return(yield j._canUseIndexedDBPromise)&&(yield function jt(L){return ot.apply(this,arguments)}(j.app))||{heartbeats:[]}})()}overwrite(j){var G=this;return(0,d.Z)(function*(){var Ae;if(yield G._canUseIndexedDBPromise){const ut=yield G.read();return Et(G.app,{lastSentHeartbeatDate:null!==(Ae=j.lastSentHeartbeatDate)&&void 0!==Ae?Ae:ut.lastSentHeartbeatDate,heartbeats:j.heartbeats})}})()}add(j){var G=this;return(0,d.Z)(function*(){var Ae;if(yield G._canUseIndexedDBPromise){const ut=yield G.read();return Et(G.app,{lastSentHeartbeatDate:null!==(Ae=j.lastSentHeartbeatDate)&&void 0!==Ae?Ae:ut.lastSentHeartbeatDate,heartbeats:[...ut.heartbeats,...j.heartbeats]})}})()}}function U(L){return(0,le.L)(JSON.stringify({version:2,heartbeats:L})).length}!function q(L){Er(new X.wA("platform-logger",j=>new fe(j),"PRIVATE")),Er(new X.wA("heartbeat",j=>new gr(j),"PRIVATE")),_n(ue,"0.7.31",L),_n(ue,"0.7.31","esm2017"),_n("fire-js","")}("")},4859:(Qe,we,R)=>{R.d(we,{H0:()=>ue,wA:()=>N});var d=R(5861),X=R(2090);class N{constructor(B,H,te){this.name=B,this.instanceFactory=H,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const le="[DEFAULT]";class ie{constructor(B,H){this.name=B,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const H=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(H)){const te=new X.BH;if(this.instancesDeferred.set(H,te),this.isInitialized(H)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:H});$e&&te.resolve($e)}catch($e){}}return this.instancesDeferred.get(H).promise}getImmediate(B){var H;const te=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),$e=null!==(H=null==B?void 0:B.optional)&&void 0!==H&&H;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Ie){if($e)return null;throw Ie}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function de(pe){return"EAGER"===pe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:le})}catch(H){}for(const[H,te]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(H);try{const Ie=this.getOrInitializeService({instanceIdentifier:$e});te.resolve(Ie)}catch(Ie){}}}}clearInstance(B=le){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,d.Z)(function*(){const H=Array.from(B.instances.values());yield Promise.all([...H.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...H.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=le){return this.instances.has(B)}getOptions(B=le){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:H={}}=B,te=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:te,options:H});for(const[Ie,Pe]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Ie)&&Pe.resolve($e);return $e}onInit(B,H){var te;const $e=this.normalizeInstanceIdentifier(H),Ie=null!==(te=this.onInitCallbacks.get($e))&&void 0!==te?te:new Set;Ie.add(B),this.onInitCallbacks.set($e,Ie);const Pe=this.instances.get($e);return Pe&&B(Pe,$e),()=>{Ie.delete(B)}}invokeOnInitCallbacks(B,H){const te=this.onInitCallbacks.get(H);if(te)for(const $e of te)try{$e(B,H)}catch(Ie){}}getOrInitializeService({instanceIdentifier:B,options:H={}}){let te=this.instances.get(B);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=B,pe===le?void 0:pe),options:H}),this.instances.set(B,te),this.instancesOptions.set(B,H),this.invokeOnInitCallbacks(te,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,te)}catch($e){}var pe;return te||null}normalizeInstanceIdentifier(B=le){return this.component?this.component.multipleInstances?B:le:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const H=this.getProvider(B.name);if(H.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);H.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const H=new ie(B,this);return this.providers.set(B,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(Qe,we,R)=>{R.d(we,{Am:()=>pe,Ub:()=>ue,Yd:()=>de,in:()=>X});const d=[];var X=(()=>{return(B=X||(X={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",X;var B})();const N={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},le=X.INFO,ie={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},fe=(B,H,...te)=>{if(H<B.logLevel)return;const $e=(new Date).toISOString(),Ie=ie[H];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Ie](`[${$e}]  ${B.name}:`,...te)};class de{constructor(H){this.name=H,this._logLevel=le,this._logHandler=fe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in X))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?N[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...H),this._logHandler(this,X.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...H),this._logHandler(this,X.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,X.INFO,...H),this._logHandler(this,X.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,X.WARN,...H),this._logHandler(this,X.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...H),this._logHandler(this,X.ERROR,...H)}}function ue(B){d.forEach(H=>{H.setLogLevel(B)})}function pe(B,H){for(const te of d){let $e=null;H&&H.level&&($e=N[H.level]),te.userLogHandler=null===B?null:(Ie,Pe,...Be)=>{const he=Be.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(qe){return null}}).filter(Ee=>Ee).join(" ");Pe>=(null!=$e?$e:Ie.logLevel)&&B({level:X[Pe].toLowerCase(),message:he,args:Be,type:Ie.name})}}}},8766:(Qe,we,R)=>{R.d(we,{Lj:()=>Te,X3:()=>Ke});var d=R(5861);let N,le;const de=new WeakMap,ue=new WeakMap,pe=new WeakMap,B=new WeakMap,H=new WeakMap;let Ie={get(z,ve,K){if(z instanceof IDBTransaction){if("done"===ve)return ue.get(z);if("objectStoreNames"===ve)return z.objectStoreNames||pe.get(z);if("store"===ve)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Ee(z[ve])},set:(z,ve,K)=>(z[ve]=K,!0),has:(z,ve)=>z instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in z};function he(z){return"function"==typeof z?function Be(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...ve){return z.apply(qe(this),ve),Ee(de.get(this))}:function(...ve){return Ee(z.apply(qe(this),ve))}:function(ve,...K){const ne=z.call(qe(this),ve,...K);return pe.set(ne,ve.sort?ve.sort():[ve]),Ee(ne)}}(z):(z instanceof IDBTransaction&&function $e(z){if(ue.has(z))return;const ve=new Promise((K,ne)=>{const ee=()=>{z.removeEventListener("complete",ge),z.removeEventListener("error",oe),z.removeEventListener("abort",oe)},ge=()=>{K(),ee()},oe=()=>{ne(z.error||new DOMException("AbortError","AbortError")),ee()};z.addEventListener("complete",ge),z.addEventListener("error",oe),z.addEventListener("abort",oe)});ue.set(z,ve)}(z),((z,ve)=>ve.some(K=>z instanceof K))(z,function ie(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,Ie):z)}function Ee(z){if(z instanceof IDBRequest)return function te(z){const ve=new Promise((K,ne)=>{const ee=()=>{z.removeEventListener("success",ge),z.removeEventListener("error",oe)},ge=()=>{K(Ee(z.result)),ee()},oe=()=>{ne(z.error),ee()};z.addEventListener("success",ge),z.addEventListener("error",oe)});return ve.then(K=>{K instanceof IDBCursor&&de.set(K,z)}).catch(()=>{}),H.set(ve,z),ve}(z);if(B.has(z))return B.get(z);const ve=he(z);return ve!==z&&(B.set(z,ve),H.set(ve,z)),ve}const qe=z=>H.get(z);function Ke(z,ve,{blocked:K,upgrade:ne,blocking:ee,terminated:ge}={}){const oe=indexedDB.open(z,ve),Ne=Ee(oe);return ne&&oe.addEventListener("upgradeneeded",lt=>{ne(Ee(oe.result),lt.oldVersion,lt.newVersion,Ee(oe.transaction))}),K&&oe.addEventListener("blocked",()=>K()),Ne.then(lt=>{ge&&lt.addEventListener("close",()=>ge()),ee&&lt.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Ne}function Te(z,{blocked:ve}={}){const K=indexedDB.deleteDatabase(z);return ve&&K.addEventListener("blocked",()=>ve()),Ee(K).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ue=new Map;function je(z,ve){if(!(z instanceof IDBDatabase)||ve in z||"string"!=typeof ve)return;if(Ue.get(ve))return Ue.get(ve);const K=ve.replace(/FromIndex$/,""),ne=ve!==K,ee=Ce.includes(K);if(!(K in(ne?IDBIndex:IDBObjectStore).prototype)||!ee&&!_e.includes(K))return;const ge=function(){var oe=(0,d.Z)(function*(Ne,...lt){const Bt=this.transaction(Ne,ee?"readwrite":"readonly");let Lt=Bt.store;return ne&&(Lt=Lt.index(lt.shift())),(yield Promise.all([Lt[K](...lt),ee&&Bt.done]))[0]});return function(lt){return oe.apply(this,arguments)}}();return Ue.set(ve,ge),ge}!function Pe(z){Ie=z(Ie)}(z=>EP(wP({},z),{get:(ve,K,ne)=>je(ve,K)||z.get(ve,K,ne),has:(ve,K)=>!!je(ve,K)||z.has(ve,K)}))},5861:(Qe,we,R)=>{function d(N,le,ie,fe,de,ue,pe){try{var B=N[ue](pe),H=B.value}catch(te){return void ie(te)}B.done?le(H):Promise.resolve(H).then(fe,de)}function X(N){return function(){var le=this,ie=arguments;return new Promise(function(fe,de){var ue=N.apply(le,ie);function pe(H){d(ue,fe,de,pe,B,"next",H)}function B(H){d(ue,fe,de,pe,B,"throw",H)}pe(void 0)})}}R.d(we,{Z:()=>X})}},Qe=>{Qe(Qe.s=1153)}]);